<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan CSS Support Power BI Blog</title>
  
  <subtitle>日本マイクロソフトPower BIサポートチームのブログです。チームの担当製品である Power BI の情報を中心にお届けします。</subtitle>
  <link href="https://jpbap-sqlbi.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpbap-sqlbi.github.io/blog/"/>
  <updated>2023-07-11T01:52:54.012Z</updated>
  <id>https://jpbap-sqlbi.github.io/blog/</id>
  
  <author>
    <name>Japan Power BI Team</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Microsoft Fabric パブリック プレビュー</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/microsoft_fabric/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/microsoft_fabric/</id>
    <published>2023-06-17T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.012Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの亀田です。<br>この度、Microsoft Fabric (以下 Fabric) がパブリック プレビューとして公開されました。<br>Fabric はデータサイエンスやリアルタイム分析、可視化などデータに関する操作が行えるオールインワンの分析ソリューションです。<br>本記事では、Fabricとはどのような製品なのかご説明します。また、Fabricは 2023 年 7 月 1 日より既定で有効化されますので、設定についてご案内いたします。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p><p>また、冒頭でもお伝えしました通り、Fabric は現在パブリックプレビュー中でございますので、ご案内した内容が今後変更される可能性が十分にございますことをご了承いただきますようお願いいたします。</p></div><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#Microsoft-Fabric%E3%81%A8%E3%81%AF">Microsoft Fabricとは</a></li><li><a href="#Fabric-%E3%81%AE%E5%88%A9%E7%94%A8">Fabric の利用</a><ul><li><a href="#Fabric-%E8%A9%A6%E7%94%A8%E7%89%88%E3%81%AE%E9%96%8B%E5%A7%8B">Fabric 試用版の開始</a></li><li><a href="#Fabric-%E5%AE%B9%E9%87%8F%E3%81%AE%E4%BD%9C%E6%88%90">Fabric 容量の作成</a></li></ul></li><li><a href="#%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9">ライセンス</a></li><li><a href="#Fabric-%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E3%83%86%E3%83%8A%E3%83%B3%E3%83%88%E8%A8%AD%E5%AE%9A">Fabric に関するテナント設定</a></li><li><a href="#Fabric-%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">Fabric に関するお問い合わせについて</a></li></ul><h2 id="Microsoft-Fabricとは"><a href="#Microsoft-Fabricとは" class="headerlink" title="Microsoft Fabricとは"></a>Microsoft Fabricとは</h2><p>Fabric は 端的に表現するとPower BI、Azure Synapse Analytics、Azure Data Factory を1つのSaaS環境で利用できるオールインワンの分析ソリューションです。この統合によって、データを一元管理でき、コラボレーションをより容易に行うことが可能となります。Fabric で利用できる機能は以下になります。</p><div align="center"><img src="Fabric01.png"></div>  <ul><li><p><strong>Data Engineering</strong><br>ユーザーが構造化データ/非構造化データを一元管理できるレイクハウスを作成することや、Python や R、Scala を利用した対話型のノートブックを作成したデータ分析、データを収集･処理･変換するデータ パイプラインを実行することが可能です。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/data-engineering/data-engineering-overview">Microsoft Fabric のデータ エンジニアリングとは - Microsoft Fabric | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/data-engineering/tutorial-lakehouse-introduction">Lakehouse のエンド ツー エンドのシナリオ: 概要とアーキテクチャ - Microsoft Fabric | Microsoft Learn</a></p></div><div align="center"><img src="Fabric02.png"></div>  </li><li><p><strong>Data Factory</strong><br>さまざまなデータ ソースからデータを取り込み、変換できるデータフローを作成できるほか、データ パイプラインを使用して、複数のタスクを実行できるワークフローを構築することができます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/data-factory/data-factory-overview">Data Factory とは - Microsoft Fabric | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/data-factory/tutorial-end-to-end-introduction">Data Factory のエンド ツー エンドのシナリオ - 概要とアーキテクチャ - Microsoft Fabric | Microsoft Learn</a></p></div><div align="center"><img src="Fabric03.png"></div></li><li><p><strong>Data Science</strong><br>データの取得、クレンジングから、モデルのトレーニングといった機械学習モデルの構築から、デプロイ、運用までを実行できます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/data-science/data-science-overview">Microsoft Fabric のデータ サイエンス - Microsoft Fabric | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/data-science/tutorial-data-science-introduction">データ サイエンスのチュートリアル - 作業の開始 - Microsoft Fabric | Microsoft Learn</a></p></div><div align="center"><img src="Fabric04.png"></div>  </li><li><p><strong>Data Warehouse</strong><br>さまざまなデータ ソースに接続し、ウェアハウスを構築することができます。ウェアハウスでは、接続されたデータを簡単に結合することができるため、より少ないリソースで分析が可能となります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/data-warehouse/data-warehousing">Microsoft Fabric のデータ ウェアハウスとは - Microsoft Fabric | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/data-warehouse/tutorial-introduction">データ ウェアハウスのチュートリアル - 概要 - Microsoft Fabric | Microsoft Learn</a></p></div><div align="center"><img src="Fabric05.png"></div>  </li><li><p><strong>Real-Time Analytics</strong><br>Fabric の Real-Time Analytics は、ストリーミングと時系列データに最適化されており、構造化データだけでなく、半構造化データ、非構造化データに対して優れたパフォーマンスを備えています。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/real-time-analytics/overview">Microsoft Fabric のReal-Time Analytics の概要 - Microsoft Fabric | Microsoft Learn</a></p></div><div align="center"><img src="Fabric06.png"></div>  </li><li><p><strong>Power BI</strong><br>Power BI は、データに迅速かつ直感的にアクセスして、データを使用してより適切な意思決定を行うことができます。 </p></li></ul><p>これらのように、Fabric ではデータの取得から可視化まで、エンドツーエンドで扱うことができる SaaS プラットフォームとなります。<br>より詳細に Fabric について知りたい方は、以下の公開情報やトレーニングをご参照ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/get-started/microsoft-fabric-overview">Microsoft Fabric とは - Microsoft Fabric | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/">Microsoft Fabric のドキュメント - Microsoft Fabric | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/get-started/end-to-end-tutorials">Microsoft Fabric のエンド ツー エンドのチュートリアル - Microsoft Fabric | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/training/paths/get-started-fabric/">Microsoft Fabric の概要 - Training | Microsoft Learn</a></p></div><h2 id="Fabric-の利用"><a href="#Fabric-の利用" class="headerlink" title="Fabric の利用"></a>Fabric の利用</h2><h3 id="Fabric-試用版の開始"><a href="#Fabric-試用版の開始" class="headerlink" title="Fabric 試用版の開始"></a>Fabric 試用版の開始</h3><p>Fabric は、現在 60 日間の試用が可能です。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/get-started/fabric-trial">Fabric (プレビュー) 試用版 - Microsoft Fabric | Microsoft Learn</a></p></div><p>試用版の利用を開始するには、アカウント マネージャーを開き、 <strong>[無料体験する]</strong> を選択するか、</p><div align="center"><img src="Fabric07.png"></div> <div align="center"><img src="Fabric08.png"></div>  <p>ワークスペースを開き、 <strong>[+ 新規]</strong> &gt; <strong>[すべて表示]</strong> を選択し、</p><div align="center"><img src="Fabric09.png"></div>  <p>Fabric アイテムを選択すると、ワークスペースのアップグレードが求められるため、</p><div align="center"><img src="Fabric10.png"></div>  <p><strong>[アップグレード]</strong> を選択してワークスペースを試用版容量ワークスペースにアップグレードし、Fabric の試用を開始します。</p><div align="center"><img src="Fabric11.png"></div>  <p>Fabric 試用版をキャンセルするか、60 日の試用版の利用期限が終了したのち Fabric 容量へ移行しない場合には、試用版容量が削除されますのでご注意ください。</p><h3 id="Fabric-容量の作成"><a href="#Fabric-容量の作成" class="headerlink" title="Fabric 容量の作成"></a>Fabric 容量の作成</h3><p>Fabric を利用するには、Azure Portal 上から Fabric 容量を購入する必要があります。</p><p>Azure Portal にアクセスし、 <strong>[Microsoft Fabric (プレビュー)]</strong> を選択します。</p><div align="center"><img src="Fabric12.png"></div>  <p><strong>[ファブリック容量 の作成]</strong> を選択します。</p><div align="center"><img src="Fabric13.png"></div>  <p>サブスクリプション、リソースグループ、容量の名前、リージョン、サイズ、Fabric 容量管理者を設定し、 <strong>[確認と作成]</strong> を選択します。</p><div align="center"><img src="Fabric14.png"></div>  <h2 id="ライセンス"><a href="#ライセンス" class="headerlink" title="ライセンス"></a>ライセンス</h2><p>これまで、Power BI では Power BI Free、Power BI Pro、Power BI Premium Per User (PPU)、Power BI Premium Per Capacity (Premium容量)の4つのライセンスがあり、ワークスペースについては Pro、Premium Per User、Premium 容量、Embedded の4つのライセンス モードがありました。<br>Fabric によって、ワークスペースのライセンスモードには、Fabric 容量と、Fabric 試用版が追加されました。</p><div align="center"><img src="Fabric15.png"></div>  <p>Fabric のワークロードを利用する場合には、Fabric 容量を作成し、Fabric 容量を割り当てたワークスペースに Fabric アイテムを作成するほか、従来のPremium 容量にも Fabric アイテムを作成することが可能です。以下はライセンスとワークスペースのライセンスについて整理した表になります。</p><table><thead><tr><th></th><th>Pro</th><th>Premium Per User (PPU)</th><th>Premium容量</th><th>Embedded</th><th>Fabric</th></tr></thead><tbody><tr><td>SKU</td><td>なし</td><td>P3</td><td>P1 ~ P5</td><td>EM ~ EM3 / A1~ A8</td><td>F2 ~ F2048</td></tr><tr><td>ワークスペースにあるコンテンツを参照できるユーザー ライセンス</td><td>Pro、PPU</td><td>PPU</td><td>Free、Pro、PPU</td><td>埋め込みの方法によって (*1)</td><td>F64 未満の SKU の場合は Pro、F64 以上の場合は Free、Pro、PPU</td></tr><tr><td>Fabric アイテムの作成</td><td>不可</td><td>不可</td><td>可</td><td>不可</td><td>可</td></tr><tr><td>Embedded での利用</td><td>不可</td><td>不可</td><td>可</td><td>可</td><td>可</td></tr><tr><td>ライセンスの管理</td><td>Microsoft 365 管理センター</td><td>Microsoft 365 管理センター</td><td>Microsoft 365 管理センター</td><td>Azure Portal</td><td>Azure Portal</td></tr></tbody></table><p>*1 埋め込みの方法によって異なります。詳しくは以下の記事をご参照ください。<br>参考# <a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_embedded_license/">Power BI Embedded とは？ライセンスと埋め込み方法 | Japan CSS Support Power BI Blog (jpbap-sqlbi.github.io)</a></p><p>ライセンスについては以下の公開情報もご参照ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/enterprise/licenses">Microsoft Fabric ライセンス - Microsoft Fabric | Microsoft Learn</a></p></div><p>また、従来のライセンスについては以下のブログをご確認ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_license/">Power BI ライセンスの違い（Free・Pro・Premium Per User・Premium Per Capacity・Embedded） | Japan CSS Support Power BI Blog (jpbap-sqlbi.github.io)</a></p></div><h2 id="Fabric-に関するテナント設定"><a href="#Fabric-に関するテナント設定" class="headerlink" title="Fabric に関するテナント設定"></a>Fabric に関するテナント設定</h2><p><strong>[管理ポータル]</strong> &gt; <strong>[テナント設定]</strong> &gt; <strong>[ユーザーは Fabric アイテムを作成できます (パブリック プレビュー)]</strong> を有効化することで、ユーザーが Fabric アイテムを作成することができるようになります。</p><div align="center"><img src="Fabric16.png"></div>  <p>テナント全体で有効にしたくない場合には、Premium 容量単位で有効にすることも可能です。 <strong>[管理ポータル]</strong> &gt; <strong>[容量の設定]</strong> から Premium 容量を選択し、 <strong>[委任されたテナントの設定]</strong> &gt; <strong>[ユーザーは Fabric アイテムを作成できます (パブリック プレビュー)]</strong> を有効化します。このとき、 <strong>[テナント設定]</strong> でこの設定を無効にしている場合には、 <strong>[テナント管理者の選択をオーバーライドする]</strong> にチェックが入っていることを確認します。</p><div align="center"><img src="Fabric17.png"></div>  <div class="alert is-important"><p class="alert-title">重要</p><p>なお、上記設定を無効にしない場合には、【2023 年 7 月 1 日】 にすべての Power BI ユーザーに対して Microsoft Fabric が有効になりますのでご注意ください。</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/fabric/admin/fabric-switch">organizationに対して Microsoft Fabric を有効にする - Microsoft Fabric | Microsoft Learn</a></p></div><div align="center"> <img src="Fabric18.png"> </div>  <h2 id="Fabric-に関するお問い合わせについて"><a href="#Fabric-に関するお問い合わせについて" class="headerlink" title="Fabric に関するお問い合わせについて"></a>Fabric に関するお問い合わせについて</h2><p>Power BI サポートでは、Fabric に関するお問い合わせもご支援が可能でございますが、プレビュー機能でございますため、ご案内ができない内容を含むためご回答が難しい場合や、その後機能が変更される場合などがございます。予めご了承いただくとともに、スムーズな回答のため、お問い合わせの際には事前に以下の公開情報やブログ記事をご一読いただけますと幸いでございます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/support/service-support-options">Power BI Pro、Power BI Premium、Fabric のサポート オプション - Power BI | Microsoft Learn</a></p><p>参考# <a href="https://jpbap-sqlbi.github.io/blog/powerbi/support_boundary/">Power BI のお問い合わせについて | Japan CSS Support Power BI Blog (jpbap-sqlbi.github.io)</a></p><p>参考# <a href="https://jpbap-sqlbi.github.io/blog/powerbi/support_boundary2/">Power BI の開発支援・コンサルティングを含む内容に関するお問い合わせについて | Japan CSS Support Power BI Blog (jpbap-sqlbi.github.io)</a></p></div><p>以上、本ブログが少しでも皆さまのお役に立てますと幸いでございます。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの亀田です。&lt;br&gt;この度、Microsoft Fabric (以下 Fabric) がパブリック プレビューとして公開されました。&lt;br&gt;Fabric はデータサイエンスやリアルタイム分析、可視化などデータに関する操作が行えるオールインワンの分析ソリューションです。&lt;br&gt;本記事では、Fabricとはどのような製品なのかご説明します。また、Fabricは 2023 年 7 月 1 日より既定で有効化されますので、設定についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="Fabric" scheme="https://jpbap-sqlbi.github.io/blog/tags/Fabric/"/>
    
  </entry>
  
  <entry>
    <title>セルフサービス サインアップの無効化</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_self-service-signup/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_self-service-signup/</id>
    <published>2023-06-08T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.596Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの山崎です。</p><p>Power BI にはいくつかのライセンスがあることを、こちらのブログ「 <a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_license/">Power BI ライセンスの違い（Free・Pro・Premium Per User・Premium Per Capacity・Embedded）</a> 」でご紹介させていただきました。</p><p>無償版の Power BI Free ライセンスについては、組織において無制限でライセンスを取得しご利用いただけますが、ライセンス管理者様が割り当てを行わずとも、ユーザー自身でライセンスの利用を開始すること (セルフサービス サインアップ) が可能です。</p><p>今回は、管理者が組織内のユーザーに対して、”ユーザー自身で Power BI Free ライセンスの利用を開始できるようにするかどうかを制御する方法” についてご案内いたします。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#%E6%9B%B4%E6%96%B0%E5%B1%A5%E6%AD%B4">更新履歴</a></li><li><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E8%87%AA%E8%BA%AB%E3%81%8C-power-bi-free-%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E3%81%AE%E5%88%A9%E7%94%A8%E9%96%8B%E5%A7%8B%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E5%88%B6%E5%BE%A1%E3%81%97%E3%81%9F%E3%81%84%E3%81%AE%E3%81%AF%E3%81%A9%E3%82%93%E3%81%AA%E6%99%82">ユーザー自身が Power BI Free ライセンスの利用開始することを制御したいのはどんな時？</a></li><li><a href="#%E3%82%BB%E3%83%AB%E3%83%95%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9-%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97%E3%81%A8%E3%81%AF">セルフサービス サインアップとは？</a></li><li><a href="#%E3%82%BB%E3%83%AB%E3%83%95%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9-%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97%E3%81%AE%E7%84%A1%E5%8A%B9%E5%8C%96%E6%89%8B%E9%A0%86">セルフサービス サインアップの無効化手順</a><ul><li><a href="#1-%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99">1. 事前準備</a></li><li><a href="#2-microsoftgraph-%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AE%E5%AE%9F%E8%A1%8C">2. Microsoft.Graph モジュールの実行</a></li><li><a href="#3-%E3%82%BB%E3%83%AB%E3%83%95%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9-%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E6%88%BB%E3%81%97%E3%81%9F%E3%81%84%E3%81%A8%E3%81%8D">3. セルフサービス サインアップを有効に戻したいとき</a></li></ul></li></ul><hr><h2 id="更新履歴"><a href="#更新履歴" class="headerlink" title="更新履歴"></a>更新履歴</h2><hr><p>2023/6/09 (記: 山本)<br>MSOnline モジュールが2023年6月30日に廃止予定であることに伴い、<a href="#%E3%82%BB%E3%83%AB%E3%83%95%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9-%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97%E3%81%AE%E7%84%A1%E5%8A%B9%E5%8C%96%E6%89%8B%E9%A0%86">セルフサービス サインアップの無効化手順</a> に使用するモジュールの変更およびスクリプトの修正を行ないました。MSOnline モジュールの廃止に関する詳細については Azure Identity サポートチームのブログをご参照ください。</p><blockquote><p><strong>参考情報</strong><br><a href="https://jpazureid.github.io/blog/azure-active-directory/how-to-determine-depreacated-azuread-msol/">Azure AD Graph / MSOnline PowerShell モジュール利用状況の調べ方</a></p></blockquote></br><hr><h2 id="ユーザー自身が-Power-BI-Free-ライセンスの利用開始することを制御したいのはどんな時？"><a href="#ユーザー自身が-Power-BI-Free-ライセンスの利用開始することを制御したいのはどんな時？" class="headerlink" title="ユーザー自身が Power BI Free ライセンスの利用開始することを制御したいのはどんな時？"></a>ユーザー自身が Power BI Free ライセンスの利用開始することを制御したいのはどんな時？</h2><hr><p>Power BI 管理者様や IT 管理者様、これから Power BI 導入のプロジェクトを進められるご担当者様などから、「ユーザーが勝手に Power BI Freeライセンスの利用を開始することを制御したい」とご要望をいただくことがたくさんあります。<br>組織によって背景は様々ですが、多くのお問合せは以下のような場合の時にいただきます。<br>このようなシナリオに該当する場合は、”セルフサービス サインアップ” 機能を無効にすることをご検討ください。</p><ul><li>ライセンス割り当ては管理者側で完全に制御したい</li><li>Power BI を組織内で徐々に展開していることを検討しているため、知らないうちにユーザーが勝手に利用することを防ぎたい</li><li>有償ライセンスのみを利用することを検討しているため、Power BI Free を利用させたくない</li></ul></br><hr><h2 id="セルフサービス-サインアップとは？"><a href="#セルフサービス-サインアップとは？" class="headerlink" title="セルフサービス サインアップとは？"></a>セルフサービス サインアップとは？</h2><hr><p>セルフサービス サインアップとは、管理者側が各ユーザーへのライセンス割り当てをしなくてもユーザー側のサインアップ作業によってライセンスの取得およびサービスの利用開始が可能となる機能です。</p><p>本機能を無効化することで、ユーザーが勝手に Power BI Free ライセンスを利用開始することを制御できます。</p></br><div class="alert is-warning"><p class="alert-title">警告</p><p>無効化の設定は他のセルフサービス プログラムと一括で管理されているため、例えば Power Apps のセルフサービス サインアップなども無効化されます。</p><p>サービスごとに制御する方法はご用意がないことを、ご注意くださいますようお願いいたします。</p></div></br><blockquote><p><strong>参考情報</strong><br>セルフ サービスサインアップが有効なプログラムの一覧はこちらでご案内しております。<br><a href="https://learn.microsoft.com/ja-jp/microsoft-365/admin/misc/self-service-sign-up?view=o365-worldwide">セルフサービスでのサインアップと購入を有効または無効にする - Power BI | Microsoft Learn</a>   </p></blockquote><hr><h2 id="セルフサービス-サインアップの無効化手順"><a href="#セルフサービス-サインアップの無効化手順" class="headerlink" title="セルフサービス サインアップの無効化手順"></a>セルフサービス サインアップの無効化手順</h2><hr><p>セルフサービス サインアップ無効化の一連の設定手順を詳細におまとめいたしました。</p><div class="alert is-info"><p class="alert-title">Note</p><p>本操作はすべて PowerShell 上で実行することを想定しています。</p><p>また本操作は、テナント管理者を想定した操作手順となります。</p></div></br><h4 id="1-事前準備"><a href="#1-事前準備" class="headerlink" title="1. 事前準備"></a>1. 事前準備</h4><p>セルフサービス サインアップの無効化には、PowerShell の Microsoft.Graph モジュール (Microsoft Graph PowerShell SDK) を使用します。<br>次の4つの前提条件を満たしておく必要がありますので、各種準備をします。</p><ul><li>PowerShell 5.1 以降</li><li>.NET Framework 4.7.2以降</li><li>PowerShellGet 最新バージョン</li><li>PowerShellスクリプトの実行ポリシーは、リモート署名またはそれ以下に制限されていること</li></ul></br><blockquote><p><strong>参考情報</strong><br><a href="https://learn.microsoft.com/ja-jp/powershell/microsoftgraph/installation?view=graph-powershell-1.0#prerequisites">Install the Microsoft Graph PowerShell SDK</a></p></blockquote></br><p><strong>1) PowerShell のバージョンを確認する</strong></p><p>管理者として Windows PowerShell を起動し、以下のコマンドを実行します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$PSVersionTable</span></span><br></pre></td></tr></table></figure><p>次のように <code>PSVersion</code> の値が 5.1 以上であればサポートされます。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Name                           Value</span><br><span class="line">----                           -----</span><br><span class="line">PSVersion                      <span class="number">5.1</span>.<span class="number">20348.1366</span></span><br><span class="line">PSEdition                      Desktop</span><br><span class="line">PSCompatibleVersions           &#123;<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>...&#125;</span><br><span class="line">BuildVersion                   <span class="number">10.0</span>.<span class="number">20348.1366</span></span><br><span class="line">CLRVersion                     <span class="number">4.0</span>.<span class="number">30319.42000</span></span><br><span class="line">WSManStackVersion              <span class="number">3.0</span></span><br><span class="line">PSRemotingProtocolVersion      <span class="number">2.3</span></span><br><span class="line">SerializationVersion           <span class="number">1.1</span>.<span class="number">0.1</span></span><br></pre></td></tr></table></figure><p>バージョンが満たない場合、ご利用の環境に合わせて、PowerShell のインストールやアップデートをお試しください。</p></br><p><strong>2) .NET Framework 4.7.2 以降のインストール状況を確認する</strong></p><p>.NET Framework のインストール状況の確認には、いくつかの方法がございますが、ここでは PowerShell を使用して .NET 4.7.2 以上のバージョンがインストールされているかどうか確認します。</p><p>次のコマンドを実行し、<code>True</code> が返ってきたら .NET Framework 4.7.2 に対応していることが確認できます。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">Get-ItemPropertyValue</span> <span class="literal">-LiteralPath</span> <span class="string">&#x27;HKLM:SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full&#x27;</span> <span class="literal">-Name</span> Release) <span class="operator">-ge</span> <span class="number">461808</span></span><br></pre></td></tr></table></figure><p><code>False</code> の場合には <a href="https://learn.microsoft.com/ja-jp/dotnet/framework/install/">インストール ガイド</a> を参考に、アップデートをお試しください。</p><blockquote><p><strong>参考情報</strong><br><a href="https://learn.microsoft.com/ja-jp/dotnet/framework/migration-guide/how-to-determine-which-versions-are-installed">方法: インストールされている .NET Framework バージョンを確認する</a></p></blockquote></br><p><strong>3) PowerShellGet を最新バージョンにする</strong></p><p>次のコマンドを実行し、<code>PowerShellGet</code> を最新バージョンにしておきます。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> PowerShellGet <span class="literal">-Force</span></span><br></pre></td></tr></table></figure><p>次のプロンプトが表示される場合は <code>Y</code> を入力し、<code>Enter</code> キーで続行します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">続行するには NuGet プロバイダーが必要です</span><br><span class="line">PowerShellGet で NuGet ベースのリポジトリを操作するには、<span class="string">&#x27;2.8.5.201&#x27;</span> 以降のバージョンの NuGetプロバイダーが必要です。</span><br><span class="line">NuGet プロバイダーは <span class="string">&#x27;C:\Program Files\PackageManagement\ProviderAssemblies&#x27;</span> または<span class="string">&#x27;C:\Users\XX\AppData\Local\PackageManagement\ProviderAssemblies&#x27;</span></span><br><span class="line">に配置する必要があります。<span class="string">&#x27;Install-PackageProvider -Name NuGet -MinimumVersion 2.8.5.201 -Force&#x27;</span> を実行して NuGet プロバイダーをインストールすることもできます。今すぐ PowerShellGet で NuGet プロバイダーをインストールしてインポートしますか?</span><br><span class="line">[<span class="type">Y</span>] はい(Y)  [<span class="type">N</span>] いいえ(N)  [<span class="type">S</span>] 中断(S)  [?] ヘルプ (既定値は <span class="string">&quot;Y&quot;</span>):</span><br></pre></td></tr></table></figure></br><p>次の警告が表示されアップデートが中断される場合、PowerShell の SecurityProtocol が TLS1.2 に設定されていない可能性があります。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">警告: Unable to resolve package source <span class="string">&#x27;https://www.powershellgallery.com/api/v2&#x27;</span>.</span><br><span class="line">PackageManagement\<span class="built_in">Install-Package</span> : 指定された検索条件とパッケージ名 <span class="string">&#x27;PowerShellGet&#x27;</span> と一致するものが見つかりませんでした。登録されている使用可能なすべてのパッケージ ソースを確認するには、<span class="built_in">Get-PSRepository</span> を使用します。</span><br><span class="line">発生場所 C:\Program Files\WindowsPowerShell\Modules\PowerShellGet\<span class="number">1.0</span>.<span class="number">0.1</span>\PSModule.psm1:<span class="number">1772</span> 文字:<span class="number">21</span></span><br><span class="line">+ ...          <span class="variable">$null</span> = PackageManagement\<span class="built_in">Install-Package</span> @PSBoundParameters</span><br><span class="line">+                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">    + CategoryInfo          : ObjectNotFound: (Microsoft.Power....InstallPackage:InstallPackage) [<span class="built_in">Install-Package</span>], Exception</span><br><span class="line">    + FullyQualifiedErrorId : NoMatchFoundForCriteria,Microsoft.PowerShell.PackageManagement.Cmdlets.InstallPackage</span><br></pre></td></tr></table></figure><p>次のコマンドを実行し、<code>Tls12</code> が含まれていない場合、</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Net.ServicePointManager</span>]::SecurityProtocol</span><br></pre></td></tr></table></figure><p>次のコマンドで <code>Tls12</code> を強制し、再度 <code>Install-Module PowerShellGet -Force</code> をお試しください。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Net.ServicePointManager</span>]::SecurityProtocol = [<span class="type">Net.SecurityProtocolType</span>]::Tls12</span><br></pre></td></tr></table></figure></br><p>また場合によっては、次の警告が表示され、<code>PowerShellGet</code> のインストールが中断されることがあります。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">信頼されていないリポジトリ</span><br><span class="line">信頼されていないリポジトリからモジュールをインストールしようとしています。このリポジトリを信頼する場合は、<span class="built_in">Set-PSRepository</span></span><br><span class="line">コマンドレットを実行して、リポジトリの InstallationPolicy の値を変更してください。<span class="string">&#x27;PSGallery&#x27;</span> からモジュールをインストールしますか?</span><br><span class="line">[<span class="type">Y</span>] はい(Y)  [<span class="type">A</span>] すべて続行(A)  [<span class="type">N</span>] いいえ(N)  [<span class="type">L</span>] すべて無視(L)  [<span class="type">S</span>] 中断(S)  [?] ヘルプ (既定値は <span class="string">&quot;N&quot;</span>):</span><br></pre></td></tr></table></figure><p>この場合には、<code>Set-ExecutionPolicy</code> を <code>Unrestricted</code> に変更するコマンドを実行し、再度お試しください。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-ExecutionPolicy</span> <span class="literal">-ExecutionPolicy</span> Unrestricted <span class="literal">-Scope</span> CurrentUser</span><br></pre></td></tr></table></figure></br><p><strong>4) PowerShell スクリプトの実行ポリシーを変更する</strong></p><p>続けて次のコマンドを実行し、PowerShell スクリプトの実行ポリシーを変更します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-ExecutionPolicy</span> <span class="literal">-ExecutionPolicy</span> RemoteSigned <span class="literal">-Scope</span> CurrentUser</span><br></pre></td></tr></table></figure><p>コマンドを実行後、次のようなプロンプトが表示される場合、<code>A</code> を入力し、<code>Enter</code> キーで続行します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">実行ポリシーの変更</span><br><span class="line">実行ポリシーは、信頼されていないスクリプトからの保護に役立ちます。実行ポリシーを変更すると、about_Execution_Policies</span><br><span class="line">のヘルプ トピック (http://go.microsoft.com/fwlink/?LinkID=<span class="number">135170</span>)</span><br><span class="line">で説明されているセキュリティ上の危険にさらされる可能性があります。実行ポリシーを変更しますか?</span><br><span class="line">[<span class="type">Y</span>] はい(Y)  [<span class="type">A</span>] すべて続行(A)  [<span class="type">N</span>] いいえ(N)  [<span class="type">L</span>] すべて無視(L)  [<span class="type">S</span>] 中断(S)  [?] ヘルプ (既定値は <span class="string">&quot;N&quot;</span>):</span><br></pre></td></tr></table></figure><p>次のコマンドを実行し、実行ポリシーが <code>RemoteSigned</code> となっていることを確認します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-ExecutionPolicy</span> <span class="literal">-Scope</span> CurrentUser</span><br></pre></td></tr></table></figure></br><p><strong>5) Microsoft.Graph をインストールする</strong></p><p>次のコマンドを実行し、Microsoft.Graph モジュールをインストールします。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> Microsoft.Graph <span class="literal">-Scope</span> CurrentUser</span><br></pre></td></tr></table></figure><p><code>信頼されていないレポジトリ</code> と表示される場合がありますが、<code>A</code> を入力し、<code>Enter</code> キーで続行します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">信頼されていないリポジトリ</span><br><span class="line">信頼されていないリポジトリからモジュールをインストールしようとしています。このリポジトリを信頼する場合は、<span class="built_in">Set-PSRepository</span></span><br><span class="line">コマンドレットを実行して、リポジトリの InstallationPolicy の値を変更してください。<span class="string">&#x27;PSGallery&#x27;</span> からモジュールをインストールしますか?</span><br><span class="line">[<span class="type">Y</span>] はい(Y)  [<span class="type">A</span>] すべて続行(A)  [<span class="type">N</span>] いいえ(N)  [<span class="type">L</span>] すべて無視(L)  [<span class="type">S</span>] 中断(S)  [?] ヘルプ (既定値は <span class="string">&quot;N&quot;</span>):</span><br></pre></td></tr></table></figure><p>Microsoft.Graph のインストール後、次のコマンドでモジュールが確認できれば、インストールは成功です。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-InstalledModule</span> Microsoft.Graph</span><br></pre></td></tr></table></figure><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Version    Name                                Repository           Description</span><br><span class="line">-------    ----                                ----------           -----------</span><br><span class="line"><span class="number">1.27</span>.<span class="number">0</span>     Microsoft.Graph                     PSGallery            Microsoft Graph PowerShell module</span><br></pre></td></tr></table></figure></br><h4 id="2-Microsoft-Graph-モジュールの実行"><a href="#2-Microsoft-Graph-モジュールの実行" class="headerlink" title="2. Microsoft.Graph モジュールの実行"></a>2. Microsoft.Graph モジュールの実行</h4><p><strong>1) Microsoft Graph にサインインする</strong></p><p>次のコマンドを実行し、Microsoft.Graph にサインインします。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Scopes</span> <span class="string">&quot;Policy.ReadWrite.Authorization&quot;</span></span><br></pre></td></tr></table></figure><p>ブラウザに遷移し、Microsoft 365 へのサインイン画面が表示されますので、<br>テナント管理者のアカウントでサインインします。</p><p>初めて上記コマンドを実行する場合、スコープに従ってアクセス許可が要求されます。<br>[組織の代理として同意する] にチェックをつけ [承諾] をクリックします。</p><div align="center"><img src="3.png" width=50%></div></br><p>その後 <code>Welcome To Microsoft Graph!</code> と表示されると、認証成功となります。</p></br><p><strong>2) Azure Active Directory 内のドメイン取得</strong></p><p>アクセス先ドメインを確認します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-MgDomain</span></span><br></pre></td></tr></table></figure><p><strong>3) セルフサービス サインアップに関するテナント設定を確認する</strong></p><p>次のコマンドを実行し、セルフサービス サインアップに関するテナント設定の状態を確認します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-MgPolicyAuthorizationPolicy</span> | <span class="built_in">Format-List</span> *Email*</span><br></pre></td></tr></table></figure><p>AllowEmailVerifiedUsersToJoinOrganization が新規ユーザーに対するテナントの自動参加の可否を決める機能であり、AllowedToSignUpEmailBasedSubscriptions　既存ユーザーに対するライセンスの自動配布の可否を決める機能です。<br>この時点で両方の値が False の場合、次の項番4を実施する必要はありません。<br>既にセルフサービス サインアップの機能は無効になっています。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AllowEmailVerifiedUsersToJoinOrganization : True</span><br><span class="line">AllowedToSignUpEmailBasedSubscriptions    : True</span><br></pre></td></tr></table></figure></br><p><strong>4) セルフサービス サインアップを無効化する</strong></p><p>セルフサービス サインアップを無効化したい場合、次のコマンドを実行し、両機能を <code>false</code> にします。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Update-MgPolicyAuthorizationPolicy</span> <span class="literal">-AllowEmailVerifiedUsersToJoinOrganization</span>:<span class="variable">$false</span> <span class="literal">-AllowedToSignUpEmailBasedSubscriptions</span>:<span class="variable">$false</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>参考情報</strong><br><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.identity.signins/update-mgpolicyauthorizationpolicy?view=graph-powershell-1.0">Update-MgPolicyAuthorizationPolicy (Microsoft.Graph.Identity.SignIns) | Microsoft Learn</a></p></blockquote></br><p>上記設定後、Power BI のライセンスをもたないユーザーが Power BI にサインインしようとしても、以下画面の通りセルフサービス サインアップができなくなります。</p><div align="center"><img src="2.png"></div></br><p><strong>5) Microsoft Graph のサインイン セッションを切断</strong></p><p>最後に次のコマンドを実行し、Microsoft Graph へのセッションを切断します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Disconnect-MgGraph</span></span><br></pre></td></tr></table></figure></br><h4 id="3-セルフサービス-サインアップを有効に戻したいとき"><a href="#3-セルフサービス-サインアップを有効に戻したいとき" class="headerlink" title="3. セルフサービス サインアップを有効に戻したいとき"></a>3. セルフサービス サインアップを有効に戻したいとき</h4><p>セルフサービス サインアップを有効化したい場合、次のコマンドを実行し、両機能を <code>true</code> にします。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Update-MgPolicyAuthorizationPolicy</span> <span class="literal">-AllowEmailVerifiedUsersToJoinOrganization</span>:<span class="variable">$true</span> <span class="literal">-AllowedToSignUpEmailBasedSubscriptions</span>:<span class="variable">$true</span></span><br></pre></td></tr></table></figure></br><blockquote><p><strong>参考情報</strong><br><a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-admin-disable-self-service#use-powershell-azure-ad-and-microsoft-365-to-enable-and-disable-self-service">組織でのセルフサービス サインアップの使用 - Microsoft 365 admin | Microsoft Learn</a></p></blockquote></br><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの山崎です。&lt;/p&gt;
&lt;p&gt;Power BI にはいくつかのライセンスがあることを、こちらのブログ「 &lt;a href=&quot;https://jpbap-sqlbi.github.io/blog/powerbi/pbi_license/&quot;&gt;Power BI ライセンスの違い（Free・Pro・Premium Per User・Premium Per Capacity・Embedded）&lt;/a&gt; 」でご紹介させていただきました。&lt;/p&gt;
&lt;p&gt;無償版の Power BI Free ライセンスについては、組織において無制限でライセンスを取得しご利用いただけますが、ライセンス管理者様が割り当てを行わずとも、ユーザー自身でライセンスの利用を開始すること (セルフサービス サインアップ) が可能です。&lt;/p&gt;
&lt;p&gt;今回は、管理者が組織内のユーザーに対して、”ユーザー自身で Power BI Free ライセンスの利用を開始できるようにするかどうかを制御する方法” についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI　　" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="ライセンス" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9/"/>
    
    <category term="Power BI Free" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-Free/"/>
    
    <category term="セルフサービス サインアップ" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%BB%E3%83%AB%E3%83%95%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9-%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97/"/>
    
  </entry>
  
  <entry>
    <title>Power BI サービスでデータモデルを編集する</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_modify_model_in_service/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_modify_model_in_service/</id>
    <published>2023-05-31T06:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.312Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームのチャンです。 </p><p>2023 年 4 月 下旬より、新機能リリースによって、Power BI サービスでもデータセット（データモデル）の編集が可能となりました！</p><p>これまでは、 Power BI サービス上で複数ユーザーで実施可能な共同作業はレポートの編集のみでしたが、本機能により、新しいメジャーや計算列の作成、リレーションシップの管理、行レベルセキュリティのロール作成などといったデータセットの編集作業が、毎回.PBIX ファイルをダウンロードせずとも、Power BI サービス上で、直接実施することができます。早速本機能について詳細をご紹介していきます。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p><p></p><p></p><p></p><p>また、本機能は開発段階 (プレビュー) でございますため、今後予告なしに機能が削除されたり、</p><p>動作変更が発生する可能性がありますことをあらかじめご了承くださいますようお願い申し上げます。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><ol><li><a href="#%E6%9C%AC%E6%A9%9F%E8%83%BD%E3%82%92%E6%9C%89%E5%8A%B9%E5%8C%96%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A">本機能を有効化する設定</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E3%83%BB%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88">使用方法・メリット</a></li><li><a href="#%E8%80%83%E6%85%AE%E4%BA%8B%E9%A0%85%E3%81%A8%E5%88%B6%E9%99%90%E4%BA%8B%E9%A0%85">考慮事項と制限事項</a></li></ol><hr><h2 id="本機能を有効化する設定"><a href="#本機能を有効化する設定" class="headerlink" title="本機能を有効化する設定"></a>本機能を有効化する設定</h2><hr><h4 id="テナント設定"><a href="#テナント設定" class="headerlink" title="テナント設定"></a>テナント設定</h4><p> 既定値では有効となっていますが、 Power BI 管理者権限を持つアカウントにて、[管理ポータル] &gt; [テナント設定] にて以下の設定「ユーザーはPower BI サービスでデータ モデルを編集できます (プレビュー)」を有効化します。</p><div align="center"><img src="tenant_settings.png"></div><h4 id="ワークスペースの設定"><a href="#ワークスペースの設定" class="headerlink" title="ワークスペースの設定"></a>ワークスペースの設定</h4><p>本機能を使用したいワークスペースに対して、ワークスペースの管理者にて、[設定]を開き、[Power BI] [全般] &gt; データモデルの設定の中に、「ユーザーは Power BI サービスでデータ モデルを編集できます (プレビュー)」にチェックを入れてください。</p><div align="center"><img src="workspace_settings.png"></div><p>チェックを入れて、有効化されたら、発行済みのデータセットに対して、[…]でオプションを展開すると、「オープンデータモデル」という選択肢が有効になっていることがわかります。</p><div align="center"><img src="dataset_options.png"></div><p>[オープンデータモデル]をクリックすると、モデルの編集画面へアクセスできます。</p><div align="center"><img src="open_data_model.png"></div><hr><h2 id="使用方法・メリット"><a href="#使用方法・メリット" class="headerlink" title="使用方法・メリット"></a>使用方法・メリット</h2><hr><h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><p>以下の画像の選択肢の通り、Power BI サービス上で、新しいメジャー、計算列と計算テーブル、行レベルセキュリティ用の新しいロールを作成できます。</p><div align="center"><img src="open_data_model2.png"></div><blockquote><p><strong>参考情報</strong><br>メジャーの作成</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-bi/transform-model/desktop-tutorial-create-measures">チュートリアル: Power BI Desktop で独自のメジャーを作成する</a></li></ul><p>計算列の作成</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-bi/transform-model/desktop-tutorial-create-calculated-columns">チュートリアル: Power BI Desktop で計算列を作成する</a></li></ul><p>計算テーブルの作成</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-bi/transform-model/desktop-calculated-tables">Power BI Desktop で計算テーブルを作成する</a></li></ul><p>行レベルセキュリティについて</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-admin-rls">Power BI での行レベルのセキュリティ (RLS)</a></li></ul></blockquote><p>リレーションシップにつきましても作成できますが、現状アイコンがないため、例えば以下の例で示すように Calendar テーブルと financials テーブルの間でリレーションシップを作成する場合、まずリレーションシップとして設定したい両方の「 Date 」列に対して、片方のテーブルの列をドラッグして、もう片方の列にドロップします。</p><div align="center"><img src="tables.png"></div><p>そうすると、リレーションシップを設定するウィザードが表示されますので、そこから詳細なリレーションシップを設定できます。</p><div align="center"><img src="relationship.png"></div></br><div align="center"><img src="relationship2.png"></div><blockquote><p><strong>参考情報</strong><br>モデルのリレーションシップについて</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-bi/transform-model/desktop-relationships-understand">Power BI Desktop でのモデル リレーションシップ</a></li></ul></blockquote><h4 id="メリット"><a href="#メリット" class="headerlink" title="メリット"></a>メリット</h4><p>メジャー・計算列・計算テーブルの作成機能においては、数式のオートコンプリート（入力すると、自動的に利用可能な関数や完全な数式を提示してくれる機能）が実装されているため、 Power BI Desktop でのモデル編集と比較しても全く劣りません。</p><p>また、物理的にレポートファイルの受け渡しをせずとも、簡単に複数のユーザーによる編集が可能な点、会社のルールや端末のスペックにより Power BI Desktop アプリケーションのインストールができないユーザーでも実施できることなども、大きなメリットでございます。</p><p>行レベルセキュリティの作成に関して、特に Power BI Desktop より便利な点としては、ロールを定義したら、すぐに、作成したロールに適用したいユーザーまで設定できることです。</p><div align="center"><img src="rls_role.png"></div><p>これまでは、まずは Power BI Desktop でロールを作成し、 Power BI サービスへ発行してから、データセットの[セキュリティ]から行レベルセキュリティの適用ユーザーを設定する必要がありましたが、本機能を利用することで、一連の流れとして同じ画面内で設定できるため、よりスムーズなオペレーションを実施できます。</p><hr><h2 id="考慮事項と制限事項"><a href="#考慮事項と制限事項" class="headerlink" title="考慮事項と制限事項"></a>考慮事項と制限事項</h2><hr><p>本記事を執筆した時点では、プレビュー機能なため、Power BI Desktop との機能差異や制限事項がまだ多く存在しています。<br>その中から、一部ご紹介いたします。</p><ul><li><p>データ モデルを変更すると、変更は自動的に保存されます。 変更は永続的であり、元に戻すオプションはございませんので十分にご注意ください。</p></li><li><p>本機能はモデルの編集のみなため、新しいデータソースへの接続や、 Power Query によるデータ加工は実施できません。代わりにデータフローやデータマートのご利用をご検討ください。</p></li></ul><div class="alert is-info"><p class="alert-title">Note</p><p><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_dataflow_dataset/">Power BI データフローとデータセット及びデータマートの紹介と比較</a></p></div><ul><li><p>増分更新が設定されているデータセット、デプロイパイプラインによるデプロイされたデータセット、 XMLA エンドポイントによって変更されたデータセット、ライブ接続を持つデータセットなどはサポートされていません。</p></li><li><p>現在はマイワークスペースを含め、すべてのライセンスのワークスペースでご利用可能ですが、 今後一部の Pro ライセンスのワークスペースでは利用できなくなります。</p></li><li><p>データソース側のテーブルや列に対して、名前を変更することはできません。</p></li><li><p>テーブルのストレージモードの変更ができません。</p></li></ul><p>上述した考慮事項の他にもございますので、詳細につきまして、以下の公開情報にて最新状況をご確認ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p><a href="https://learn.microsoft.com/ja-jp/power-bi/transform-model/service-edit-data-models?source=recommendations#considerations-and-limitations">考慮事項と制限事項 | Power BI サービスでデータ モデルを編集する (プレビュー)</a></p></div><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。 </p><blockquote><p><strong>参考情報</strong></p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-bi/transform-model/service-edit-data-models">Power BI サービスでデータ モデルを編集する (プレビュー)</a> </li></ul></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームのチャンです。 &lt;/p&gt;
&lt;p&gt;2023 年 4 月 下旬より、新機能リリースによって、Power BI サービスでもデータセット（データモデル）の編集が可能となりました！&lt;/p&gt;
&lt;p&gt;これまでは、 Power BI サービス上で複数ユーザーで実施可能な共同作業はレポートの編集のみでしたが、本機能により、新しいメジャーや計算列の作成、リレーションシップの管理、行レベルセキュリティのロール作成などといったデータセットの編集作業が、毎回.PBIX ファイルをダウンロードせずとも、Power BI サービス上で、直接実施することができます。早速本機能について詳細をご紹介していきます。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="データモデル" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB/"/>
    
    <category term="Power BIサービス" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9/"/>
    
    <category term="モデル編集" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%A2%E3%83%87%E3%83%AB%E7%B7%A8%E9%9B%86/"/>
    
    <category term="リレーションシップ" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%AA%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%B7%E3%83%83%E3%83%97/"/>
    
    <category term="メジャー" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%A1%E3%82%B8%E3%83%A3%E3%83%BC/"/>
    
    <category term="計算列" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E8%A8%88%E7%AE%97%E5%88%97/"/>
    
    <category term="行レベルのセキュリティー" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E8%A1%8C%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%83%BC/"/>
    
  </entry>
  
  <entry>
    <title>オンプレミス データ ゲートウェイのトラブルシューティング：構成時に発生するエラー</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/gateway_troubleshooting/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/gateway_troubleshooting/</id>
    <published>2023-05-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.012Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの山崎です。<br>オンプレミス上のデータを取得するなどの目的で、対象のサーバーと Power BI サービスをブリッジする機能としてオンプレミス データ ゲートウェイ (※1) がありますが、このゲートウェイの構成時にエラーが発生するというお問合せをいただくことがよくあります。<br>今回は、ゲートウェイ構成時にエラーが発生した際にまずお試しいただきたいトラブルシューティングをご案内いたします。  </p><p>※1 <a href="https://learn.microsoft.com/ja-jp/power-bi/connect-data/service-gateway-onprem">オンプレミス データ ゲートウェイとは</a></p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><br /><br /><hr><h2 id="構成時に発生するエラー"><a href="#構成時に発生するエラー" class="headerlink" title="構成時に発生するエラー"></a><font color="RoyalBlue">構成時に発生するエラー</font></h2><hr><p>ゲートウェイ アプリをインストールした後に、ゲートウェイの管理者となるユーザーアカウントにてサインインし、新しいゲートウェイの登録を行い構成を完了させます。<br>この構成作業中に、ゲートウェイ アプリ上に以下のようなエラーメッセージが表示され、後続の処理に進めないことがあります。  </p><br /> <p>「ゲートウェイの詳細を更新できませんでした。ゲートウェイを実行するアカウントの変更が必要な場合があります。」<br>「ゲートウェイ サービスの正常性チェックがタイムアウトになり失敗しました。」<br>「ゲートウェイを作成できませんでした、もう一度お試しください。」<br>「ネットワーク要求で予期しないエラーが返されました。」<br>「ネットワーク接続が制限されています。」<br>「ゲートウェイは正しく構成されているがローカルネットワーク接続の問題によりアクセスできません。」   </p><br /><hr><h2 id="トラブルシューティング"><a href="#トラブルシューティング" class="headerlink" title="トラブルシューティング"></a><font color="RoyalBlue">トラブルシューティング</font></h2><hr><p>上記いずれかのエラーが発生している場合は、ゲートウェイを構成するための前提条件を満たせていない可能性があります。<br>このため、まずは以下の点をご確認くださいますようお願いいたします。  </p><br /><h3 id="1-最新版のゲートウェイをインストールする"><a href="#1-最新版のゲートウェイをインストールする" class="headerlink" title="1. 最新版のゲートウェイをインストールする"></a><font color="LightCoral">1. 最新版のゲートウェイをインストールする</font></h3><p>ゲートウェイの更新プログラムは毎月リリースしており、古いバージョンで発生する問題が解消している可能性があります。<br>古いバージョンをインストールしている場合は、最新版で事象が解消するかご確認いただきますようお願いいたします。  </p><p>ご参考情報：<br><a href="https://learn.microsoft.com/ja-jp/data-integration/gateway/service-gateway-update?source=recommendations">オンプレミスのデータ ゲートウェイの更新</a>  </p><br />  <h3 id="2-ゲートウェイに必要な通信を許可する"><a href="#2-ゲートウェイに必要な通信を許可する" class="headerlink" title="2. ゲートウェイに必要な通信を許可する"></a><font color="LightCoral">2. ゲートウェイに必要な通信を許可する</font></h3><p>ゲートウェイは、以下公式ドキュメント “オンプレミス データ ゲートウェイの通信設定を調整する” でご案内しているFQDN、送信ポートの許可設定が必要となります。<br>ファイアウォールにて通信の接続を制限しているご環境の場合は、ドキュメントに記載されている通信許可の設定がお済みであるかご確認いただきますようお願いいたします。　  </p><p>ご参考情報：<br><a href="https://learn.microsoft.com/ja-jp/data-integration/gateway/service-gateway-communication">オンプレミス データ ゲートウェイの通信設定を調整する</a>  </p><br />  <h3 id="3-ゲートウェイ-構成ファイルの設定"><a href="#3-ゲートウェイ-構成ファイルの設定" class="headerlink" title="3. ゲートウェイ 構成ファイルの設定"></a><font color="LightCoral">3. ゲートウェイ 構成ファイルの設定</font></h3><p>対象のご環境にプロキシサーバーが存在している場合、以下公式ドキュメント “オンプレミス データ ゲートウェイのプロキシ設定を構成する” の通り、事前にゲートウェイの構成ファイルの設定が必要となります。</p><p>ご参考情報：<br><a href="https://learn.microsoft.com/ja-jp/data-integration/gateway/service-gateway-proxy">オンプレミス データ ゲートウェイのプロキシ設定を構成する</a> </p><h4 id="lt-詳細手順-gt"><a href="#lt-詳細手順-gt" class="headerlink" title="&lt;詳細手順&gt;"></a><strong>&lt;詳細手順&gt;</strong></h4><ol><li>次の２つのファイルを確認し、テキストエディタなどで開きます。  </li></ol><blockquote><p>C:\Program Files\On-premises data gateway\enterprisegatewayconfigurator.exe.config<br>C:\Program Files\On-premises data gateway\Microsoft.PowerBI.EnterpriseGateway.exe.config  </p></blockquote><ol start="2"><li>以下表記の部分を変更します。<br>※　“http://192.168.1.10:3128” の部分には、実際のプロキシサーバーのアドレスを入力いただきます。  </li></ol><p><strong>変更前 例</strong><br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;system.net&gt;  </span><br><span class="line">    &lt;defaultProxy useDefaultCredentials=&quot;true&quot; /&gt;  </span><br><span class="line">&lt;/system.net&gt;  </span><br></pre></td></tr></table></figure></p><p><strong>変更後 例</strong><br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;system.net&gt;</span><br><span class="line">    &lt;defaultProxy useDefaultCredentials=&quot;true&quot;&gt;</span><br><span class="line">        &lt;proxy </span><br><span class="line">            autoDetect=&quot;false&quot; </span><br><span class="line">            proxyaddress=&quot; http://192.168.1.10:3128&quot; </span><br><span class="line">            bypassonlocal=&quot;false&quot; </span><br><span class="line">            usesystemdefault=&quot;true&quot;</span><br><span class="line">        /&gt; </span><br><span class="line">    &lt;/defaultProxy&gt;</span><br><span class="line">&lt;/system.net&gt;  </span><br></pre></td></tr></table></figure></p><p>変更後、各ファイルを保存します。</p><p>※　ゲートウェイがプロキシを介してクラウド データ ソースに接続する場合や、対象のご環境によっては、以下構成ファイルを編集する必要があります。  </p><blockquote><p>C:\Program Files\On-premises data gateway\m\Microsoft.Mashup.Container.NetFX45.exe.config  </p></blockquote><p><strong>変更前 例</strong><br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;startup&gt;</span><br><span class="line">    &lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.5.2&quot;/&gt;</span><br><span class="line">  &lt;/startup&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p><p><strong>変更後 例</strong><br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;system.net&gt;</span><br><span class="line">        &lt;defaultProxy useDefaultCredentials=&quot;true&quot; enabled=&quot;true&quot;&gt;</span><br><span class="line">        &lt;proxy proxyaddress=&quot;http://192.168.1.10:3128&quot; bypassonlocal=&quot;true&quot; /&gt;</span><br><span class="line">        &lt;/defaultProxy&gt;</span><br><span class="line">    &lt;/system.net&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p><h4 id="lt-プロキシサーバー有無のご確認方法-gt"><a href="#lt-プロキシサーバー有無のご確認方法-gt" class="headerlink" title="&lt;プロキシサーバー有無のご確認方法&gt;"></a><strong>&lt;プロキシサーバー有無のご確認方法&gt;</strong></h4><p>コマンドプロンプトから、以下のコマンドを実行します。<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh winhttp show proxy</span><br></pre></td></tr></table></figure></p><p>実行結果が以下結果の場合は、プロキシ設定がされていませんが、以下結果 <font color="red"><strong>以外</strong></font>の場合、プロキシ設定がされております。</p><p>――――――――――――――――<br>現在の WinHTTP プロキシ設定:<br>直接アクセス (プロキシ サーバーなし)。<br>――――――――――――――――   </p><br />  <h3 id="4．サービスアカウントの変更"><a href="#4．サービスアカウントの変更" class="headerlink" title="4．サービスアカウントの変更"></a><font color="LightCoral">4．サービスアカウントの変更</font></h3><p>以下公式ドキュメント “オンプレミスのデータ ゲートウェイ サービス アカウントを変更する” に記載される通り、ゲートウェイのサービスは、ゲートウェイ専用のサービスアカウント “NT SERVICE\PBIEgwService” によって実行されますが、対象のご環境によっては、そのままだとエラーが発生する場合があります。<br>上記 １～3 の設定確認をクリアしている場合、サービス アカウントをドメインユーザーまたは PC にサインインしているローカルユーザーに変更することで事象に変化があるかご確認いただきますようお願いいたします。  </p><p>ご参考情報：<br><a href="https://learn.microsoft.com/ja-jp/data-integration/gateway/service-gateway-service-account">オンプレミスのデータ ゲートウェイ サービス アカウントを変更する</a></p><br /> <hr><h2 id="その他ご参考情報"><a href="#その他ご参考情報" class="headerlink" title="その他ご参考情報"></a><font color="RoyalBlue">その他ご参考情報</font></h2><hr><p>以下公式ドキュメントでもゲートウェイのトラブルシューティングに関する情報をご案内していますので、合わせてご参考にしていただきますようお願いいたします。　　</p><p>ご参考情報：<br><a href="https://learn.microsoft.com/ja-jp/data-integration/gateway/service-gateway-tshoot">オンプレミス データ ゲートウェイのトラブルシューティング</a></p><br /> <br /> 以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。<hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの山崎です。&lt;br&gt;オンプレミス上のデータを取得するなどの目的で、対象のサーバーと Power BI サービスをブリッジする機能としてオンプレミス データ ゲートウェイ (※1) がありますが、このゲートウェイの構成時にエラーが発生するというお問合せをいただくことがよくあります。&lt;br&gt;今回は、ゲートウェイ構成時にエラーが発生した際にまずお試しいただきたいトラブルシューティングをご案内いたします。  &lt;/p&gt;
&lt;p&gt;※1 &lt;a href=&quot;https://learn.microsoft.com/ja-jp/power-bi/connect-data/service-gateway-onprem&quot;&gt;オンプレミス データ ゲートウェイとは&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="PowerBI　　" scheme="https://jpbap-sqlbi.github.io/blog/tags/PowerBI/"/>
    
    <category term="Onpreisesdatagateway" scheme="https://jpbap-sqlbi.github.io/blog/tags/Onpreisesdatagateway/"/>
    
    <category term="gateway" scheme="https://jpbap-sqlbi.github.io/blog/tags/gateway/"/>
    
    <category term="troubleshooting" scheme="https://jpbap-sqlbi.github.io/blog/tags/troubleshooting/"/>
    
  </entry>
  
  <entry>
    <title>コンテンツの承認（昇格・認定）と検出について</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_endorsement/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_endorsement/</id>
    <published>2023-05-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.196Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チーム 丸山です。</p><p>組織で Power BI サービスの利用が進むと、画面上の一覧に表示されるコンテンツが膨大になってくることがあります。<br>その際、特定のコンテンツを「承認（昇格・認定）」することで、そのコンテンツにラベルが付いて他ユーザーに対して目立たせて表示をすることができます。また、データセットの場合は、その際「検出可能」とすれば、そもそもアクセス権がないユーザーに対してもデータハブに表示をさせることができます。</p><p>今回はそれらの機能をご紹介します。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><p> <a href="#%EF%BC%91%EF%BC%8E%E6%89%BF%E8%AA%8D%EF%BC%88%E6%98%87%E6%A0%BC%E3%83%BB%E8%AA%8D%E5%AE%9A%EF%BC%89">１．承認（昇格・認定）</a><br> <a href="#%EF%BC%92%EF%BC%8E%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%AE%E3%80%8C%E6%A4%9C%E5%87%BA%E5%8F%AF%E8%83%BD%E3%81%AB%E3%81%99%E3%82%8B%E3%80%8D">２．データセットの「検出可能にする」</a><br> <a href="#%EF%BC%93%EF%BC%8E%E3%81%A9%E3%82%93%E3%81%AA%E3%81%A8%E3%81%8D%E3%81%AB%E4%BD%BF%E3%81%86%EF%BC%9F">３．どんなときに使う？</a></p><hr><h2 id="１．承認（昇格・認定）"><a href="#１．承認（昇格・認定）" class="headerlink" title="１．承認（昇格・認定）"></a>１．承認（昇格・認定）</h2><hr><p>コンテンツの「承認」を行うと、Power BI サービスの一覧や検索でコンテンツが表示される際にラベルが付きます。これによって、質の高いと評価されたコンテンツを他コンテンツから差別化してユーザーに目立たせて表示することができます。一部の検索で優先されるほか、一部のリストを並べ替えるためにも使用できます。</p><p>「承認」には昇格と認定の2種類があります。</p><table><thead><tr><th>承認の種類</th><th>ラベル</th><th>用途</th><th>設定に必要な権限</th></tr></thead><tbody><tr><td>昇格</td><td>昇格しました</td><td>コンテンツが共有に十分適していると考えた場合、他のユーザーに対して有用で価値があるアピールをする。これにより、組織内で共同作業するためのコンテンツの拡散を促進する。</td><td>コンテンツの所有者、またはワークスペースの書き込みアクセスのあるユーザー（管理者・メンバー・共同作成者）</td></tr><tr><td>認定</td><td>認定</td><td>（昇格よりもさらに）コンテンツが組織の品質基準を満たしていて、有用で信頼できる優先コンテンツとして拡散を促進する。</td><td>テナント設定「認定資格」で指定されたセキュリティグループ</td></tr></tbody></table><p>承認ができるコンテンツは以下です。<br>　・データセット<br>　・データフロー<br>　・レポート<br>　・アプリ</p><p>表示イメージは以下のとおりで、「昇格しました」「認定済み」のラベルが付きます。</p><div align="center"><img src="1.png"></div></br><p>// 承認の手順（例：データセット）<br>Power BI サービス &gt; ワークスペース &gt; 該当のデータセットのメニュー「…」 &gt; 設定 &gt; 承認と検出 &gt; 昇格 or 認定 を選択する</p><div align="center"><img src="2.png"></div> </br><div class="alert is-info"><p class="alert-title">Note</p><p>// 公開情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/collaborate-share/service-endorsement-overview">承認 - Power BI コンテンツの昇格と認定 - Power BI | Microsoft Learn</a></p><p>// 公開情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/admin/service-admin-setup-certification">コンテンツの認定を有効にする - Power BI | Microsoft Learn</a></p></div></br><hr><h2 id="２．データセットの「検出可能にする」"><a href="#２．データセットの「検出可能にする」" class="headerlink" title="２．データセットの「検出可能にする」"></a>２．データセットの「検出可能にする」</h2><hr><p>データセットに関しては、「検出可能にする」ことができます。<br>「検出」とは「承認（昇格・認定）」がされているデータセットについて、そのデータセットへのアクセス権を持たないユーザーにもデータセットハブの一覧に表示をさせることを表します。</p><p>「承認（昇格・認定）」はラベル付けしてユーザーに目立たせて表示をする方法ですが、他のすべてのデータセットと同様、データセットに対するアクセス権を持つユーザーにのみ表示されて、アクセス権を持たないユーザーには表示されないため、アクセス権を要求することすら困難です。この問題を解決するため、「承認」されたデータセットは「検出可能」としてマークすることで、アクセス権を持たないユーザーにも表示され、その後は、提供されている任意のアクセス要求メカニズムを使用してデータセットに対するビルドアクセス許可を要求できます。</p><p>// データセットハブの表示</p><div align="center"><img src="3.png"></div></br><p>「検出可能にする」ための手順は以下です。<br>１の承認をする設定画面で下部「検出可能にする」にチェックを入れて適用します。</p><div align="center"><img src="4.png"></div></br><p>検出可能にするには以下のテナント設定が有効化されている必要があります。</p><p>　・昇格したコンテンツを検出可能にする<br>　・認定コンテンツを検出可能にする</p><div align="center"><img src="5.png"></div></br><p>これらのテナント設定を有効化すると、コンテンツの承認（昇格・認定）が可能な指定ユーザーは、そのコンテンツを検出可能としてマークすることができます。ユーザーやグループを指定して、許可される指定グループから除外することもできます。</p><p>検出可能の設定が可能なメンバーは、承認されたコンテンツが存在するワークスペースの管理者、またはメンバーロールを持つ承認されたユーザーです。つまり、これらのロールがあれば、承認「認定」の処理が不可のユーザーだとしても、すでに「認定済みのデータセット」に対して検出の設定が可能です。</p><p>また、検出可能として承認されたコンテンツについてアクセス権がないユーザーに対してもそれを検索や表示をさせるには、テナント設定「コンテンツの検出」を有効化しておく必要があります。</p><div align="center"><img src="6.png"></div></br><div class="alert is-info"><p class="alert-title">Note</p><p>// 公開情報：<a href="https://learn.microsoft.com/ja-JP/power-bi/connect-data/service-data-hub?tabs=datasets">データ ハブを使用したデータ検出 - Power BI | Microsoft Learn</a></p><p>// 公開情報：<a href="https://learn.microsoft.com/ja-JP/power-bi/collaborate-share/service-discovery">データセットの検出可能性 - Power BI | Microsoft Learn</a></p></div><hr><h2 id="３．どんなときに使う？"><a href="#３．どんなときに使う？" class="headerlink" title="３．どんなときに使う？"></a>３．どんなときに使う？</h2><hr><p>使い分けとしては以下のパターンが考えられます。</p><p>１．アクセス権のあるユーザー内の一覧表示で、特定のコンテンツ表示を目立たせる（差別化する）<br>　　⇒承認の昇格と認定の2段階でラベル付けをする</p><p>２．１で表示を差別化したいのはまとまったレポート群である<br>　　⇒レポート単体でも承認（昇格・認定）できるが、アプリごとで承認することもできる</p><p>３．アクセス権のないユーザーにも存在を知ってもらう（アクセス権の要求を出す機会をつくる）<br>　　⇒承認（昇格と認定）を設定する際に「検出可能」にする</p></br><hr><h3 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h3><hr><ul><li> 公開情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/collaborate-share/service-endorsement-overview">承認 - Power BI コンテンツの昇格と認定 - Power BI | Microsoft Learn</a></li><li> 公開情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/admin/service-admin-setup-certification">コンテンツの認定を有効にする - Power BI | Microsoft Learn</a></li><li> 公開情報：<a href="https://learn.microsoft.com/ja-JP/power-bi/connect-data/service-data-hub?tabs=datasets">データ ハブを使用したデータ検出 - Power BI | Microsoft Learn</a></li><li> 公開情報：<a href="https://learn.microsoft.com/ja-JP/power-bi/collaborate-share/service-discovery">データセットの検出可能性 - Power BI | Microsoft Learn</a></li></ul><hr></br><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p></br><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チーム 丸山です。&lt;/p&gt;
&lt;p&gt;組織で Power BI サービスの利用が進むと、画面上の一覧に表示されるコンテンツが膨大になってくることがあります。&lt;br&gt;その際、特定のコンテンツを「承認（昇格・認定）」することで、そのコンテンツにラベルが付いて他ユーザーに対して目立たせて表示をすることができます。また、データセットの場合は、その際「検出可能」とすれば、そもそもアクセス権がないユーザーに対してもデータハブに表示をさせることができます。&lt;/p&gt;
&lt;p&gt;今回はそれらの機能をご紹介します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="共有" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E5%85%B1%E6%9C%89/"/>
    
    <category term="Power BI サービス" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9/"/>
    
    <category term="Power BI アプリ" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-%E3%82%A2%E3%83%97%E3%83%AA/"/>
    
  </entry>
  
  <entry>
    <title>TLS1.0/1.1のサポート終了</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/tls/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/tls/</id>
    <published>2023-05-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.912Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの亀田です。<br>この度、Power BIにおいてTLS1.0/1.1を使用した通信のサポートが終了しますので、その詳細やユーザーさまにて必要な設定等についてご案内いたします。Power BIを管理されているユーザーさまは、いま一度ご確認いただきますようお願いいたします。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、　　</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><h2 id="TLSとは"><a href="#TLSとは" class="headerlink" title="TLSとは"></a>TLSとは</h2><p>TLSとは、正称をTransport Layer Security (トランスポート層セキュリティ プロトコル) といい、インターネットを介して行われる通信のプライバシーを保護するために設計された、業界標準のプロトコルです。TLSプロトコルを利用することで、メッセージの改ざんや傍受、偽造を検知することができます。1999年に初めてTLS1.0が定義され、現在はTLS1.3がリリースされています。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/windows/win32/secauthn/transport-layer-security-protocol">トランスポート層セキュリティ プロトコル - Win32 apps | Microsoft Learn</a></p></div><div align="center"><img src="TLS01.png"></div>  <p>TLS1.0/1.1は古いプロトコルのため、新たに脆弱性が発見され、悪意のある第三者からの攻撃を受ける可能性があります。そのため、Microsoftでは様々なアプリケーションでTLS1.0/1.1のサポートを終了し、TLS1.2を利用するように移行しています。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/lifecycle/announcements/transport-layer-security-1x-disablement">更新: トランスポート層セキュリティ 1.0 および 1.1 の無効化 - Microsoft Lifecycle | Microsoft Learn</a></p></div><div align="center"><img src="TLS02.png"></div>  <h2 id="TLS1-0-1-1のサポート終了"><a href="#TLS1-0-1-1のサポート終了" class="headerlink" title="TLS1.0/1.1のサポート終了"></a>TLS1.0/1.1のサポート終了</h2><p>2023年4月26日に、Microsoft365管理センターのメッセージ センターに、以下の案内が送付されています。</p><blockquote><p>件名: Power BI notification for discontinuation of support for TLS 1.0 and 1.1 (MC546936)</p><p>We will be retiring the support of TLS 1.0 and TLS 1.1 for outgoing requests from Power BI. Instead, we recommend the utilization of TLS 1.2 or above for outgoing requests, which is where we will continue to invest our development resources. TLS 1.0 and TLS 1.1 have already been disabled for incoming requests long ago. For security documentation, please refer: <a href="https://learn.microsoft.com/power-bi/enterprise/service-admin-power-bi-security">Power BI Security - Power BI</a>.</p><p>(自動翻訳)</p><p>Power BI からの送信リクエストにおける TLS 1.0 および TLS 1.1 のサポートは終了となります。その代わりに、発信リクエストにはTLS 1.2以上の利用を推奨しており、今後も開発リソースを投入していく予定です。TLS 1.0とTLS 1.1は、すでにかなり前に受信リクエストに対して無効化されています。セキュリティに関するドキュメントは、こちらをご参照ください： Power BI セキュリティ - Power BI.</p></blockquote><div align="center"><img src="TLS03.png"></div>  <p>こちらは、Power BIからクライアントへの通信について、TLS1.0/1.1のサポートが終了するために送られた案内でございます。すでに、クライアントからPower BIへの通信についてはサポートが終了しており、送信/受信ともにPower BIではTLS1.0/1.1のサポートが終了となります。<br>今回の発信リクエストのサポート終了にともない影響が考えられるシナリオとしましては、レガシーなデータソースを利用している場合がございます。データソースがTLS1.0/1.1へフォールバックされる場合には、Power BIではデータの取り込みに利用できなくなります。<br>今後は、TLS1.0/1.1を利用したPower BI Serviceとの通信は行うことができません。TLS1.0/1.1を利用したクライアントでの通信は失敗しますのでご注意ください。例えば、以下のクライアントではTLS1.2を利用することができません。以下のクライアントを利用している場合にはご注意ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://powerbi.microsoft.com/ja-jp/blog/deprecating-tls-1-0-and-1-1-support-in-power-bi/">Deprecating TLS 1.0 and 1.1 support in Power BI | Microsoft Power BI ブログ | Microsoft Power BI</a></p></div><ul><li>Android 4.3 以前のバージョン</li><li>Firefox バージョン 5.0 以前のバージョン</li><li>Windows 7 以前のバージョンの Internet Explorer 8-10</li><li>Windows Phone 8 の Internet Explorer 10</li><li>Safari 6.0.4/OS X10.8.4以前のバージョン</li></ul><div align="center"><img src="TLS04.png"></div>  <h2 id="ユーザーさまが実施する必要のある操作-Power-BI-Service"><a href="#ユーザーさまが実施する必要のある操作-Power-BI-Service" class="headerlink" title="ユーザーさまが実施する必要のある操作(Power BI Service)"></a>ユーザーさまが実施する必要のある操作(Power BI Service)</h2><p>TLS1.0/1.1のサポート終了によって、テナント設定の変更等、ユーザーさまがPower BI Service上で行う必要のある操作は<strong>ございません</strong>。</p><h2 id="ユーザーさまが実施する必要のある操作-クライアント"><a href="#ユーザーさまが実施する必要のある操作-クライアント" class="headerlink" title="ユーザーさまが実施する必要のある操作(クライアント)"></a>ユーザーさまが実施する必要のある操作(クライアント)</h2><p>TLS1.0/1.1を利用するクライアントを利用している場合には、TLS1.2を利用するように構成する必要があります。例えば、.NETアプリケーションを使用している場合には、.NET Framework4.6以上で実行されている場合には、規制の構成を変更していない限りTLS1.2を利用しますが、.NET Framework4.6より前で実行されている場合には、以下のコードを使用することで、アプリケーションの起動時にTLS1.2を有効にすることができます。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.Net.ServicePointManager .SecurityProtocol |= SecurityProtocolType.Tls11 | SecurityProtocolType.Tls12; </span><br></pre></td></tr></table></figure><p>また、PowerShellを使用している場合には、以下のコードでTLSのバージョンをアップグレードすることができます。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.SecurityProtocolType]::Tls12  </span><br></pre></td></tr></table></figure><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://azure.microsoft.com/ja-jp/updates/power-bi-support-for-transportlayer-security/">Power BI アプリケーションの TLS バージョンを TLS 1.2 にアップグレードする | Azure の更新情報 | Microsoft Azure</a></p></div><div align="center"><img src="TLS05.png"></div>  <h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>Power BIは、皆さまが安心してご利用いただけるように改善に取り組んでおり、今後も改善を続けていきます。セキュリティについては以下の公開情報に記載をしておりますのでよろしければご一読ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/guidance/whitepaper-powerbi-security">Power BI のセキュリティに関するホワイト ペーパー - Power BI | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-admin-power-bi-security">Power BI のセキュリティ - Power BI | Microsoft Learn</a></p></div><p>以上、本ブログが少しでも皆さまのお役に立てますと幸いでございます。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの亀田です。&lt;br&gt;この度、Power BIにおいてTLS1.0/1.1を使用した通信のサポートが終了しますので、その詳細やユーザーさまにて必要な設定等についてご案内いたします。Power BIを管理されているユーザーさまは、いま一度ご確認いただきますようお願いいたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
  </entry>
  
  <entry>
    <title>Power BI の開発支援・コンサルティングを含む内容に関するお問い合わせについて</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/support_boundary2/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/support_boundary2/</id>
    <published>2023-05-10T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.912Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの山崎です。  </p><p>日頃から、マイクロソフトのサポート サービスをご利用いただき誠にありがとうございます。<br>以前、<a href="https://jpbap-sqlbi.github.io/blog/powerbi/support_boundary/">Power BI のお問い合わせについて</a> の記事で、私たち Power BI サポート チームで提供しているサービスの詳細についてご紹介いたしました。<br>しかしながら、以下 “開発支援、コンサルティングを含む内容” については、問い合わせしようとしている内容が範囲外に該当するかどうかの判断が難しいとお声をいただくことがありました。<br>このため、今回の記事では、開発支援やコンサルティングに該当するお問合せはどういったものかを、より詳細にご紹介いたします。  </p><br /><blockquote><h3 id="4-開発支援、コンサルティングを含む内容"><a href="#4-開発支援、コンサルティングを含む内容" class="headerlink" title="4. 開発支援、コンサルティングを含む内容"></a><font color="LightCoral">4. 開発支援、コンサルティングを含む内容</font></h3><p>レポート開発、DAX 式や M クエリの作成、Embedded 環境の開発、REST API や PowerShell でのスクリプト作成等開発にかかわる内容やコンサルティングを含む内容は当リアクティブ サポート範囲外となります。<br>もちろん、お客様にて開発を進めていただく中で発生した問題のトラブルシューティングについては、問題箇所に限定して 1 問 1 答でのご支援は可能です。（原因追及の可否については、上記サポート プランに基づきます。）<br>開発支援が必要な場合は、別途営業担当などにご相談ください。  </p></blockquote><span id="more"></span><br /><br /><hr><h2 id="開発支援、コンサルティングを含む内容の詳細分類"><a href="#開発支援、コンサルティングを含む内容の詳細分類" class="headerlink" title="開発支援、コンサルティングを含む内容の詳細分類"></a><font color="RoyalBlue">開発支援、コンサルティングを含む内容の詳細分類</font></h2><hr><p>基本的には、サポート開始にあたりユーザー様固有の要件やデータソース・テーブル構成、環境全体の構成図等の把握が必要になる場合は、開発者サポート案件に該当し、Premier/ユニファイド といった有償のご契約の中で追加サービスをご購入いただき、当リアクティブ サポート チームとは別の部門にて対応している範囲となります。<br>以下では、Power BI サポート チームによくお寄せいただく　”開発支援やコンサルティングを含むお問合せ“ について例を挙げながら分類分けをし、サポート範囲外かどうかの判断基準をご説明いたします。  </p><br /><p> <font color="LightCoral"><strong>分類</strong></font><br> １．ゼロからのレポート開発<br> ２．開発中レポートにおける新規課題の解決<br> ３．レポート開発中に発生した問題の解決<br> ４．データモデル構成、ネットワークや環境の構成<br> ５．スクリプト作成依頼  </p><br /><h3 id="１．ゼロからのレポート開発"><a href="#１．ゼロからのレポート開発" class="headerlink" title="１．ゼロからのレポート開発"></a><font color="LightCoral">１．ゼロからのレポート開発</font></h3><p>ユーザー様にてレポート未作成の状態であり、 Excel や他社 BI ツール、イメージ図などを基にゼロからのレポート開発支援をご要望されるケースは、ご要件とデータソースの構成の把握が必須となり開発案件に該当しますので、サポート対象外となります。    </p><p><strong>サポート対象外となるお問合せの例：</strong><br>・添付画像通りの BI レポートを実現するための手順を教えてほしい。<br>・既存のデータを使用して、各地区で販売された品目の小売り売上データを分析するレポートを作りたいが、どうしたらよいかわからない。<br>・他社 BI ツールでは ○○ といった分析ができていた。同じデータを使用してPower BIで再現する方法を知りたい。　　  </p><br />  <h3 id="２．開発中レポートにおける新規課題の解決"><a href="#２．開発中レポートにおける新規課題の解決" class="headerlink" title="２．開発中レポートにおける新規課題の解決"></a><font color="LightCoral">２．開発中レポートにおける新規課題の解決</font></h3><p>ユーザー様にて開発中のレポートにおいて行いたい分析があり、それを実現する方法をご要望されるケースは、ご要件と既存レポートの構成を正しく把握し、そのレポートに沿った DAX 式の検証、テーブル構成の見直し等を行った上で実現可否を調査する必要があり、開発案件に該当しますのでサポート対象外になります。  </p><p><strong>サポート対象外となるお問合せの例：</strong><br>・添付の .pbix にて、営業日に限定し稼働時間の前年比を計算したいが、どのような式をたてればよいか教えてほしい。<br>・自社独自のカレンダーにあわせて分析を行いたいが、どのようにカレンダー テーブルを作成し紐づければよいか教えてほしい。  </p><br />  <h3 id="３．レポート開発中に発生した問題の解決"><a href="#３．レポート開発中に発生した問題の解決" class="headerlink" title="３．レポート開発中に発生した問題の解決"></a><font color="LightCoral">３．レポート開発中に発生した問題の解決</font></h3><p>レポート開発中に何かしらのエラーが発生しているケース、該当のエラーや行っていた操作の詳細情報をもとにしたトラブルシューティングはサポート範囲内となります。<br>しかしながら、トラブルシューティングの中でユーザー様のテーブル構成や DAX 式に問題があることがわかった場合、問題個所の特定まではご支援させていただきますが、テーブル構成や DAX 式の修正作業自体はユーザー様にて実施いただく必要があり、サポート対象外となります。<br>また、エラーは発生していないが、想定している値が表示されないので修正すべき点について指摘してほしいといったケースは、ご要件と既存レポートの構成を正しく把握し、そのレポートに沿った DAX 式の検証、テーブル構成の見直し等が必要となるため、開発案件に該当しますのでサポート対象外となります。  </p><p><strong>サポート対象となるお問合せの例：</strong><br>・DAX 式を作成したところ ○○ というエラーメッセージが表示されたため解消方法を教えてほしい。  </p><p><strong>サポート対象外となるお問合せの例：</strong><br>・作成中の式において ○○ という DAX 関数は使用できないことがわかった。使用する関数にこだわりはないので、代替となる関数と式をおしえてほしい。<br>・出勤と退勤時間を記録したデータを取り込んだレポートにおいて、平日勤務時間内とそれ以外の時間帯の稼働時間を計算したいが、うまく計算ができないため DAX 式作成について支援してほしい。  </p><br />  <h3 id="４-データモデル構成、ネットワークや環境の構成"><a href="#４-データモデル構成、ネットワークや環境の構成" class="headerlink" title="４. データモデル構成、ネットワークや環境の構成"></a><font color="LightCoral">４. データモデル構成、ネットワークや環境の構成</font></h3><p>Power BI 導入におけるシステム・ネットワーク環境の設計、提案や検討中のシステム運用に問題がないかといった確認依頼は、ユーザー様のご要件を正確に把握した上でのご案内が必要となり、コンサルティングに該当するためサポート対象外となります。  </p><p><strong>サポート対象外のお問合せ例：</strong><br>・セキュアな環境で Power BI を利用させたいと思っており、添付の構成図で実現が可能かレビューしてほしい。<br>・○○ 人規模で Power BI を安定して使用するために必要なネットワーク帯域の目安を教えてほしい。<br>・Power BI を運用するためのおすすめのテナント設定値やベストプラクティスを教えてほしい。  </p><br />  <h3 id="５．スクリプト作成依頼"><a href="#５．スクリプト作成依頼" class="headerlink" title="５．スクリプト作成依頼"></a><font color="LightCoral">５．スクリプト作成依頼</font></h3><p>Power BI の REST API や PowerShell を使用したスクリプト作成はサポート対象外となります。<br>ご支援範囲は、該当するコマンドのご紹介やコマンド単体で実行した際に発生しているエラーのトラブルシューティングまでとなります。  </p><p><strong>サポート対象外のお問合せ例：</strong><br>組織のワークスペースとそのワークスペース内に存在するレポートの一覧を取得するためのスクリプトがほしい。  </p><br /><br /><hr><h2 id="ベストエフォートでのご支援範囲"><a href="#ベストエフォートでのご支援範囲" class="headerlink" title="ベストエフォートでのご支援範囲"></a><font color="RoyalBlue">ベストエフォートでのご支援範囲</font></h2><hr><p>上述でご説明したサポート範囲外のお問合せをいただいた際には、恐れ入りますが、適切なご支援提供のために営業担当へのご相談等をご案内し、当リアクティブ サポート チームとしてのお問合せ対応は終了となります。<br>しかしながら、内容によっては詳細ヒアリングを実施させていただき、事前にご支援範囲やゴールの認識合わせを行いご了承いただいた上で、ベストエフォートでのご支援を提供させていただく場合があります。<br>ベストエフォートでのご支援範囲は以下となりますので、事前にご確認いただけますと幸いです。  </p><br />  <h3 id="ベストエフォートでのご支援範囲-1"><a href="#ベストエフォートでのご支援範囲-1" class="headerlink" title="ベストエフォートでのご支援範囲"></a><font color="DarkSalmon">ベストエフォートでのご支援範囲</font></h3><p><strong>1. 関連する公開情報と Power BI コミュニティー事例のご案内</strong><br>ご要望を実現するために参考になりそうな機能や関数、類似事例に関する情報をご紹介いたします。  </p><p><strong>2. Power BIの既存機能による実施可否の確認</strong><br>Power BI の既存機能によるご要望実現可否について確認し、関連する情報をご紹介いたします。  </p><p><strong>3. ご要望と事象をシンプル化したレポートをご提供いただき調査を行う</strong><br>対象のレポートやテーブル構成に特化した支援の必要がなく、課題をシンプル化したレポートをご用意いただいた場合は、他のベストエフォートでのご支援範囲に沿って、実現方法について検討した結果をご紹介いたします。  </p><p><strong>4. Power BI仕様の確認</strong><br>“3. レポート開発中に発生した問題の解決” 、 “4. データモデル構成、ネットワークや環境の構成” に該当するお問合せについては、 Power BI の仕様としてどのような動作となるかといった情報をご紹介いたします。  </p><h3 id="ご参考情報"><a href="#ご参考情報" class="headerlink" title="ご参考情報"></a><font color="DarkSalmon">ご参考情報</font></h3><p>なお、上記ベストエフォート調査については、主に以下サイトをもとに調査を行いますので、ご参考にしていただければと思います。 </p><p><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_useful_learning_link/">Power BI を学習するために役に立つコンテンツのご紹介</a><br>・Power BI を学習するための資料に関する情報をまとめております。  </p><p><a href="https://community.powerbi.com/">Forums - Microsoft Power BI Community</a><br>・世界中にいるさまざまな Power BI のエンジニアや有識者にて運営されており、お互いに Power BI の課題を解決し合う場となっております。  </p><p><a href="https://learn.microsoft.com/ja-jp/dax/">Data Analysis Expressions (DAX) リファレンス</a><br>・DAX 関数に関する情報をまとめた公開情報となります。</p><br /><br /><hr><h2 id="おわりに：Power-BI-サポート-チーム-からのご挨拶"><a href="#おわりに：Power-BI-サポート-チーム-からのご挨拶" class="headerlink" title="おわりに：Power BI サポート チーム からのご挨拶"></a><font color="RoyalBlue">おわりに：Power BI サポート チーム からのご挨拶</font></h2><hr><p>本記事を最後までお読みいただきありがとうございます。<br>Power BI ユーザー数は年々増加しており、それに比例して Power BI サポート チームには毎日たくさんのお問合せをいただき、大変ありがたく感じております。<br>しかしながら、中には上述でご紹介したような、サポート チームではご支援が難しい内容のお問合せも多く寄せられており、「せっかく問い合わせしたのに期待するサポートが得られなかった」といった残念なお声をいただいてしまうこともありました。<br>このため、すべてのユーザー様に、それぞれお持ちのライセンスやご契約に基づき適切なサポートを提供できるよう、あらためて Power BI サポート チームでご提供しておりますリアクティブ サポート範囲やベストエフォートでのご支援範囲を明確にする必要があると考え、今回の記事作成に至りました。<br>私たち Power BI サポート チームは、お問合せいただいたすべての方のお力になれるよう全力でサポートに取り組んでまいりますが、リアクティブ サポート範囲外の課題については適切なサポート サービス をご案内させていただきますことをご理解いただけると幸いです。<br>今後も、精一杯ご支援を提供していきますので、引き続き Power BI サポートをご利用くださいますようお願いいたします。  </p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの山崎です。  &lt;/p&gt;
&lt;p&gt;日頃から、マイクロソフトのサポート サービスをご利用いただき誠にありがとうございます。&lt;br&gt;以前、&lt;a href=&quot;https://jpbap-sqlbi.github.io/blog/powerbi/support_boundary/&quot;&gt;Power BI のお問い合わせについて&lt;/a&gt; の記事で、私たち Power BI サポート チームで提供しているサービスの詳細についてご紹介いたしました。&lt;br&gt;しかしながら、以下 “開発支援、コンサルティングを含む内容” については、問い合わせしようとしている内容が範囲外に該当するかどうかの判断が難しいとお声をいただくことがありました。&lt;br&gt;このため、今回の記事では、開発支援やコンサルティングに該当するお問合せはどういったものかを、より詳細にご紹介いたします。  &lt;/p&gt;
&lt;br /&gt;

&lt;blockquote&gt;
&lt;h3 id=&quot;4-開発支援、コンサルティングを含む内容&quot;&gt;&lt;a href=&quot;#4-開発支援、コンサルティングを含む内容&quot; class=&quot;headerlink&quot; title=&quot;4. 開発支援、コンサルティングを含む内容&quot;&gt;&lt;/a&gt;&lt;font color=&quot;LightCoral&quot;&gt;4. 開発支援、コンサルティングを含む内容&lt;/font&gt;&lt;/h3&gt;&lt;p&gt;レポート開発、DAX 式や M クエリの作成、Embedded 環境の開発、REST API や PowerShell でのスクリプト作成等開発にかかわる内容やコンサルティングを含む内容は当リアクティブ サポート範囲外となります。&lt;br&gt;もちろん、お客様にて開発を進めていただく中で発生した問題のトラブルシューティングについては、問題箇所に限定して 1 問 1 答でのご支援は可能です。（原因追及の可否については、上記サポート プランに基づきます。）&lt;br&gt;開発支援が必要な場合は、別途営業担当などにご相談ください。  &lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="PowerBI　　" scheme="https://jpbap-sqlbi.github.io/blog/tags/PowerBI/"/>
    
    <category term="お問い合わせ" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B/"/>
    
    <category term="サポート範囲" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E7%AF%84%E5%9B%B2/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD の外部コラボレーションの設定が与える影響について</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_guest_user_access_restrict/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_guest_user_access_restrict/</id>
    <published>2023-04-29T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.264Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの山本です。<br>ゲスト ユーザーに関する Power BI の動作については、以前私たちのブログ記事 <a href="https://jpbap-sqlbi.github.io/blog/powerbi/aad_guestuser/">組織外のユーザーに対する Power BI コンテンツの共有</a> でご紹介させていただきました。</p><p>ゲスト ユーザーを招待する側のテナントの管理者様によっては「Power BI のコンテンツはアクセスさせてもよいが、テナント内のユーザー情報が見えてしまうのは避けたい」というようなご意見をいただくことがあります。<br>上記動作は Azure Active Directory (以下 Azure AD) に存在する外部コラボレーションの設定 (ゲストユーザーのアクセス許可に関する設定) で変更することが可能です。<br>今回は、外部コラボレーションの設定とは何か、また設定がどのように影響するか、各設定値による動作を検証ベースで確認した内容をご紹介いたします。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に検証を踏まえた結果として構成しておりますが、　　</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#%E5%A4%96%E9%83%A8%E3%82%B3%E3%83%A9%E3%83%9C%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%A8%E3%81%AF">外部コラボレーションの設定とは</a></li><li><a href="#%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E5%BD%B1%E9%9F%BF%E3%81%99%E3%82%8B%E3%81%8B">どのように影響するか</a><ul><li><a href="#%E5%89%8D%E6%8F%90">前提</a></li><li><a href="#%E5%88%B6%E9%99%90%E3%81%8C%E6%9C%80%E3%82%82%E5%B0%91%E3%81%AA%E3%81%84">制限が最も少ない</a></li><li><a href="#%E5%88%B6%E9%99%90%E4%BB%98%E3%81%8D%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9-%E6%97%A2%E5%AE%9A--%E6%9C%80%E3%82%82%E5%88%B6%E9%99%90%E3%81%8C%E5%A4%9A%E3%81%84">制限付きアクセス (既定) / 最も制限が多い</a></li></ul></li><li><a href="#%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%8A%E3%81%8F%E3%81%B9%E3%81%8D%E3%81%8B">どのように設定しておくべきか</a></li></ul><hr><h2 id="外部コラボレーションの設定とは"><a href="#外部コラボレーションの設定とは" class="headerlink" title="外部コラボレーションの設定とは"></a>外部コラボレーションの設定とは</h2><hr><p>Azure AD には、テナントに招待したゲスト ユーザーに対して、組織内のユーザーとグループ メンバーシップの表示を制限する設定があります。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>遷移方法：</p><p>Azure Active Directory の管理メニュー [ユーザーのプロパティ] をクリックし、[外部コラボレーションの設定を管理します] の文字をクリックすると、設定画面が表示されます。</p></div><p>この設定には、以下３つのアクセス レベルがあります。</p><table><thead><tr><th>アクセス許可レベル</th><th>アクセス レベル</th></tr></thead><tbody><tr><td>制限が最も少ない</td><td>ゲスト ユーザーは、メンバーと同じアクセス権を持ちます</td></tr><tr><td>制限付きアクセス (既定)</td><td>ゲスト ユーザーは、ディレクトリ オブジェクトのプロパティとメンバーシップへのアクセスが制限されます</td></tr><tr><td>最も制限が多い</td><td>ゲスト ユーザーのアクセスは、各自のディレクトリ オブジェクトのプロパティとメンバーシップに制限されます</td></tr></tbody></table><div align="center"><img src="1.png"></div><p>既定値は「制限付きアクセス」レベルとなっており、特定のオブジェクト ID を元に照会することはできるものの、ユーザー一覧が確認できなかったり、グループが確認できない状態です。<br>さらに制限の強い「最も制限が多い」レベルでは、ゲスト ユーザー自身のプロパティ情報のみが確認できる状態となります。<br>一方「制限が最も少ない」レベルでは、管理者ではないメンバー ユーザーと同じアクセス権で組織内のユーザーとグループ メンバーシップの表示を行なうことができるようになります。</p><p>より詳細な動作については、弊社 Azure ID サポートチームのブログ記事「<a href="https://jpazureid.github.io/blog/azure-active-directory/external-collaboration-setting-b2b-access/">外部コラボレーションの設定 (ゲスト ユーザーのアクセス制限) について</a>」にて紹介されておりますので、こちらも合わせてご確認ください。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>ゲスト ユーザー アクセスを構成するには、全体管理者ロールである必要があります。</p><p>またゲスト アクセスを制限するための追加のライセンス要件はありません。</p><p><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/enterprise-users/users-restrict-guest-permissions#update-in-the-azure-portal">Azure Active Directory でゲストのアクセス許可を制限する</a></p></div></br><hr><h2 id="どのように影響するか"><a href="#どのように影響するか" class="headerlink" title="どのように影響するか"></a>どのように影響するか</h2><hr><p>各アクセス レベルは、Power BI サービスでテナント ディレクトリのユーザーやグループを参照する機能で影響を受けることになります。<br>ユーザーやグループを参照する具体的な機能は以下です。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-bi/consumer/end-user-comment">コメント機能</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-bi/collaborate-share/service-share-dashboards#share-a-report-via-link">共有リンク機能</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-bi/collaborate-share/service-share-dashboards#manage-permissions-to-a-report">直接アクセス許可の追加</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-bi/collaborate-share/service-give-access-new-workspaces">ワークスペース アクセスの追加</a></li></ul><p>上記機能においてアクセス レベルを変更した場合、結論として以下のような動作となります。</p><table><thead><tr><th>アクセス許可レベル</th><th>Power BI でのゲストユーザーの動作</th></tr></thead><tbody><tr><td>制限が最も少ない</td><td>ゲストユーザーはテナント内のユーザーやグループの候補検索やメールアドレスの指定が可能</td></tr><tr><td>制限付きアクセス (既定) ／ </br>最も制限が多い</td><td>ゲストユーザーはテナント内のユーザーやグループの候補検索やメールアドレスの指定が不可</td></tr></tbody></table><div class="alert is-success"><p class="alert-title">ヒント</p><p>ゲストユーザーに Power BI 管理者の役割が割り当てられている場合、全てのリソースの基本プロパティを読み取るアクセス許可が付与されるため、本機能の制限は受けません。</p><p>参考: <a href="https://learn.microsoft.com/ja-JP/azure/active-directory/roles/permissions-reference?WT.mc_id=365AdminCSH#power-bi-administrator">Azure AD の組み込みロール - Power BI 管理者</a></p></div></br><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>今回、テストシナリオとして、テナント B のユーザー「Adele」が、テナント A のゲスト ユーザーとして、Power BI ワークスペース「Guest Share」のビューアーロールとしてアクセス権を持っているものとします。</p><div align="center"><img src="6.png"></div><p>またワークスペース「Guest Share」には「Guest Share Report」があり、Adele には再共有のアクセスが付与されています。</p><div align="center"><img src="7.png"></div><p>さらにゲスト ユーザーに関するテナント設定「Azure Active Directory のゲスト ユーザーによる Power BI へのアクセスを許可する」「組織への外部ユーザーの招待」「Azure Active Directory のゲスト ユーザーによる組織内のコンテンツの編集および管理を許可する」は有効化されている状態とします。<br>候補リストにゲスト ユーザーが表示される「また候補者のリストに Azure Active Directory のゲストを表示する」も有効化されています。</p><div align="center"><img src="8.png"></div></br><h3 id="制限が最も少ない"><a href="#制限が最も少ない" class="headerlink" title="制限が最も少ない"></a>制限が最も少ない</h3><p>制限が最も少ないアクセス レベルでは、テナントのユーザーやグループの候補検索が制限なく可能になります。<br>またテナント設定「また候補者のリストに Azure Active Directory のゲストを表示する」が有効化されている場合、テナント A に属する自身以外のゲスト ユーザーも候補検索が可能です。<br>（レポートやダッシュボードのコメント機能についてはゲスト ユーザーへのメンション機能はありません）</p><p>//リンク共有</p><div align="center"><img src="9.png" width=40%></div></br><p>//コメント機能でのメンション</p><div align="center"><img src="11.png" width=40%></div></br><h3 id="制限付きアクセス-既定-最も制限が多い"><a href="#制限付きアクセス-既定-最も制限が多い" class="headerlink" title="制限付きアクセス (既定) / 最も制限が多い"></a>制限付きアクセス (既定) / 最も制限が多い</h3><p>制限付きアクセス (既定) や最も制限が多いアクセス レベルでは、候補検索もできず、メールアドレスでの一致指定もできません。<br>Power BI に影響する部分としては両設定に違いはありません。</p><p>//リンク共有</p><div align="center"><img src="10.png" width=40%></div></br><p>//コメント機能でのメンション</p><div align="center"><img src="2.png" width=40%></div></br><p>またテナント設定「組織への外部ユーザーの招待」を有効化している場合でも、ゲスト ユーザーからの <a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-admin-azure-ad-b2b#ad-hoc-invites">アドホック招待</a> はできなくなります。</p><div align="center"><img src="14.png"></div></br><hr><h2 id="どのように設定しておくべきか"><a href="#どのように設定しておくべきか" class="headerlink" title="どのように設定しておくべきか"></a>どのように設定しておくべきか</h2><hr><p>ゲスト ユーザーに対して Power BI の機能は使わせたいが、組織内のユーザー情報は検索候補に表示させたくない、という場合にはアクセス レベルを「制限付きアクセス (既定)」または「最も制限が多い」に変更しておくことをお勧めいたします。</p></br></br><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの山本です。&lt;br&gt;ゲスト ユーザーに関する Power BI の動作については、以前私たちのブログ記事 &lt;a href=&quot;https://jpbap-sqlbi.github.io/blog/powerbi/aad_guestuser/&quot;&gt;組織外のユーザーに対する Power BI コンテンツの共有&lt;/a&gt; でご紹介させていただきました。&lt;/p&gt;
&lt;p&gt;ゲスト ユーザーを招待する側のテナントの管理者様によっては「Power BI のコンテンツはアクセスさせてもよいが、テナント内のユーザー情報が見えてしまうのは避けたい」というようなご意見をいただくことがあります。&lt;br&gt;上記動作は Azure Active Directory (以下 Azure AD) に存在する外部コラボレーションの設定 (ゲストユーザーのアクセス許可に関する設定) で変更することが可能です。&lt;br&gt;今回は、外部コラボレーションの設定とは何か、また設定がどのように影響するか、各設定値による動作を検証ベースで確認した内容をご紹介いたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="ゲストユーザー" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%B2%E3%82%B9%E3%83%88%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC/"/>
    
    <category term="アクセス許可" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E8%A8%B1%E5%8F%AF/"/>
    
    <category term="管理者向け" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E7%AE%A1%E7%90%86%E8%80%85%E5%90%91%E3%81%91/"/>
    
  </entry>
  
  <entry>
    <title>Power BI の既知の問題や障害に関する公開情報について</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_knownissue/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_knownissue/</id>
    <published>2023-04-27T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.276Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの山崎です。<br>Power BI Desktop や Power BI サービスを使用していて、「この動作は不具合なのでは？」「もしかして障害が発生しているのかな？」と思ったことはありますか？<br>そのようなときは、まずは落ち着いて以下でご案内する公開情報をもとに既知の問題や障害に該当している可能性がないかご確認いただきますようお願いいたします。  </p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="公開情報のご案内"><a href="#公開情報のご案内" class="headerlink" title="公開情報のご案内 "></a><font color="DodgerBlue">公開情報のご案内 </font></h2><h3 id="Power-BI-の既知の問題"><a href="#Power-BI-の既知の問題" class="headerlink" title="Power BI の既知の問題"></a><font color="HotPink">Power BI の既知の問題</font></h3><p><font color="SlateGray">対象：ユーザー様、管理者様向け</font>  </p><p>影響度がおおきいものについては以下公開情報に既知の問題として一覧でまとめられています。<br>不具合が疑われる動作を確認した際は、まずは以下一覧にある問題に該当していないかご確認ください。  </p><p>参考情報：<br><a href="https://learn.microsoft.com/ja-jp/power-bi/troubleshoot/known-issues/power-bi-known-issues">Power BI の既知の問題</a> </p><h3 id="サービスレベルの停止"><a href="#サービスレベルの停止" class="headerlink" title="サービスレベルの停止"></a><font color="HotPink">サービスレベルの停止</font></h3><p><font color="SlateGray">対象：ユーザー様、管理者様向け</font>  </p><p>クラウドサービスである Power BI サービスにアクセスできない、レポートを表示できないなど、サービスの停止や低下が疑われる場合は、こちらサポートページの [ リージョンごとのサービス状態 ] [ サービスの停止/低下 ] をご確認ください。<br>また、こちらのページの [ 認識 ] には、修正が近い将来に行われるような緊急度の高い問題について、その問題の詳細や今後予定されている修正スケジュールが報告されることもあり、解決されるとお知らせから削除されます。  </p><div align="center"><img src="1.png"></div></p><p>参考情報：<br><a href="https://powerbi.microsoft.com/ja-jp/support/">Power BI のサポート</a> </p><h3 id="Microsoft-365-サービス-正常性"><a href="#Microsoft-365-サービス-正常性" class="headerlink" title="Microsoft 365 サービス 正常性"></a><font color="HotPink">Microsoft 365 サービス 正常性</font></h3><p><font color="SlateGray">対象：管理者様向け</font>  </p><p>クラウドサービスで問題が発生している場合に、対象テナントやリージョンの Microsoft 365 管理センターの “サービス正常性” ページで報告されることもあります。<br>“未解決の問題”の[影響を受けたサービス]や、”Microsoft サービスの正常性” の[サービス]の覧に Power BI に関する報告がないかご確認ください。</p><p>参考情報：<br><a href="https://learn.microsoft.com/ja-jp/microsoft-365/enterprise/view-service-health?view=o365-worldwide">How to check Microsoft 365 service health</a></p><div align="center"><img src="2.png"></div></p><h3 id="Azure-正常性（Embedded）"><a href="#Azure-正常性（Embedded）" class="headerlink" title="Azure 正常性（Embedded）"></a><font color="HotPink">Azure 正常性（Embedded）</font></h3><p><font color="SlateGray">対象：管理者様向け</font><br>Embedded をご運用されている場合は、Azure ポータルの Power BI Embedded リソースの “リソースの正常性” にてリソースの状況をご確認ください。</p><div align="center"><img src="3.png"></div></p><h3 id="サービス中断の通知"><a href="#サービス中断の通知" class="headerlink" title="サービス中断の通知"></a><font color="HotPink">サービス中断の通知</font></h3><p><font color="SlateGray">対象：管理者様向け</font><br>Premium 容量のみとなりますが、サービスの中断や停止がある場合に、Power BI からのインシデント通知をメールで受け取ることができます。<br>以下公開情報にて設定方法やメール送信されるシナリオ等をご案内しています。</p><p><a href="https://learn.microsoft.com/ja-jp/power-bi/support/service-interruption-notifications">サービス中断の通知</a></p><h2 id="サポートからのご案内"><a href="#サポートからのご案内" class="headerlink" title="サポートからのご案内"></a><font color="DodgerBlue">サポートからのご案内</font></h2><p>・公開情報で報告されている問題についてお問合せいただいても、基本的には公開情報以上の内部情報はご案内できませんので、定期的に公開情報の更新をご確認いただきますようお願いいたします。  </p></p><p>・公開情報で報告されているもの以外に、弊社サポートサービスへいただいたお問合せの調査の中で見つかる問題があります。<br>  影響範囲がおおきいものについては、公開情報にてお知らせされる場合がありますが、基本的にその他の問題については、セキュリティや機密情報保持等の関係上公開しておりません。<br>  なお、問題が確認されたあと、開発部門にて今後の修正スケジュールの調整・対応が行われますが、数か月以上かかるものがほとんどで、なかには半年以上かかるものや影響度や暫定対処策の有無によって今後のスケジュールが未定のままとなることもあります。<br>  このような公開されていない問題については、お問合せベースで進捗状況や今後のスケジュールをご案内することはできませんので、あらかじめご了承ください。<br>  Power BI Desktop および Power BI サービスは定期的に更新が行われていますので、ユーザー様・管理者様にて動作をご確認いただきますようお願いいたします。  </p></p></p>   以上、本ブログ が少しでも皆様のお役に立てますと幸いでございます。<p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの山崎です。&lt;br&gt;Power BI Desktop や Power BI サービスを使用していて、「この動作は不具合なのでは？」「もしかして障害が発生しているのかな？」と思ったことはありますか？&lt;br&gt;そのようなときは、まずは落ち着いて以下でご案内する公開情報をもとに既知の問題や障害に該当している可能性がないかご確認いただきますようお願いいたします。  &lt;/p&gt;</summary>
    
    
    
    
    <category term="PowerBI　　" scheme="https://jpbap-sqlbi.github.io/blog/tags/PowerBI/"/>
    
    <category term="knownissue" scheme="https://jpbap-sqlbi.github.io/blog/tags/knownissue/"/>
    
    <category term="既知の問題" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E6%97%A2%E7%9F%A5%E3%81%AE%E5%95%8F%E9%A1%8C/"/>
    
    <category term="不具合" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E4%B8%8D%E5%85%B7%E5%90%88/"/>
    
    <category term="bug" scheme="https://jpbap-sqlbi.github.io/blog/tags/bug/"/>
    
    <category term="障害" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E9%9A%9C%E5%AE%B3/"/>
    
    <category term="Outage" scheme="https://jpbap-sqlbi.github.io/blog/tags/Outage/"/>
    
    <category term="Degradation" scheme="https://jpbap-sqlbi.github.io/blog/tags/Degradation/"/>
    
  </entry>
  
  <entry>
    <title>Power BI で ExpressRoute の使用について</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_expressroute/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_expressroute/</id>
    <published>2023-03-31T07:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.228Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームのチャンです。<br>オンプレミス環境と Microsoft クラウドサービスの間に、プライベートな通信ルートで接続できる Microsoft Azure ExpressRoute という機能がございます。<br>Power BI の公式情報では詳細な記載がない場合が多いため、お客様よりよくご質問いただく内容につきまして、本ブログにてまとめてご紹介いたします。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、　　</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="Microsoft-Azure-ExpressRoute-とは"><a href="#Microsoft-Azure-ExpressRoute-とは" class="headerlink" title="Microsoft Azure ExpressRoute とは"></a>Microsoft Azure ExpressRoute とは</h2><hr><p>Microsoft Azure ExpressRoute では、専用のプライベート接続を使用してオンプレミスのネットワークを Microsoft Cloud Services に接続できます。<br>サービスの名前は Azure ExpressRoute ですが、Microsoft 365、Microsoft Power Platform、Dynamics 365 などの Azure 上に構築されたサービスへのプライベート接続もサポートしています。</p><div align="center"><img src="https://learn.microsoft.com/ja-jp/power-platform/guidance/expressroute/media/expressroute-overview.png"></div><hr><h2 id="Power-BI-で-ExpressRoute-を使用するには"><a href="#Power-BI-で-ExpressRoute-を使用するには" class="headerlink" title="Power BI で ExpressRoute を使用するには"></a>Power BI で ExpressRoute を使用するには</h2><hr><h4 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h4><p>お客様のオンプレミスのご環境から、 Power BI への接続において ExpressRoute をご利用いただくには、ExpressRoute のプロバイダーをご契約いただいた上で、お客様側の企業ネットワークにて ExpressRoute を経由するよう、ネットワークのルーティングを設定いただく必要がございます。</p><p>Power BI への接続においては、 Microsoft ピアリングを利用することとなりますが、ExpressRoute 回線が Azure Microsoft ピアリングに対して有効になっている場合は、Azure 内で使用されている <a href="https://learn.microsoft.com/ja-jp/azure/virtual-network/ip-services/public-ip-addresses#public-ip-addresses">パブリック IP アドレスの範囲</a> に回線経由でアクセスできます。</p><p>Power BI は Azure 上に構築されており、 Azure リージョン コミュニティを介して ExpressRoute を使用できます。Power BI テナントのリージョンを確認する方法については、<a href="https://learn.microsoft.com/ja-jp/power-bi/service-admin-where-is-my-tenant-located">こちら</a> をご確認ください。</p><blockquote><p><strong>参考情報</strong></p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/expressroute/expressroute-locations-providers">ExpressRoute のピアリングの場所と接続パートナー - Power BI | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/expressroute/expressroute-faqs#microsoft-peering">Microsoft ピアリング | ExpressRoute の FAQ - Power BI | Microsoft Learn</a></li></ul></blockquote></br><h4 id="設定方法"><a href="#設定方法" class="headerlink" title="設定方法"></a>設定方法</h4><p>ExpressRoute の利用において、Power BI 側にて管理者による特別の設定は必要ございません。</p><p>お客様のネットワークから、Power BI への接続に関して、ExpressRoute を経由するよう、「 <a href="https://learn.microsoft.com/ja-jp/power-bi/admin/power-bi-allow-list-urls">Power BI URL を許可リストに追加する</a>」という公開情報に記載されているエンドポイント に対してお客様の企業ネットワークのルーティング対象として設定いただくことが必要な作業として考えられます。</p><blockquote><p><strong>参考情報</strong> </p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-bi/admin/power-bi-allow-list-urls">Power BI URL を許可リストに追加する - Power BI | Microsoft Learn</a></br></li></ul></blockquote><p>しかしながら、上記の許可リストに記載されている一部の通信においては、ExpressRoute を経由することがサポートされていません。</p><p>一例としては、<a href="https://learn.microsoft.com/ja-jp/microsoft-365/enterprise/urls-and-ip-address-ranges?view=o365-worldwide#microsoft-365-common-and-office-online">Microsoft 365 Common と Office Online の URL</a> に記載されているエンドポイントで、「認証」セッションに含まれる Power BI サービスへサインイン時に使用される Azure AD 認証など、 ExpressRoute 非対応のものが一部含まれています。</p><p>そのため、Power BI へのアクセスにおいて、すべてのエンドポイントを ExpressRoute へ経由することができませんので、企業ネットワークにてインターネット接続をブロックしてしまうと、Power BI をご利用いただくのに支障が出る可能性があることをご理解ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>なお、ExpressRoute をお客様の企業内のネットワークにて、どのようにルーティングされるかは、各企業様によって実際の方法が異なりますので、弊サポートから詳細な手順をご案内することができません。予めご了承ください。</p><p></br></p></div><hr><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><hr><h4 id="Q1：ExpressRoute-を利用して-Power-BI-へ接続したいが、Power-BI-で何か設定する必要がありますか。"><a href="#Q1：ExpressRoute-を利用して-Power-BI-へ接続したいが、Power-BI-で何か設定する必要がありますか。" class="headerlink" title="Q1：ExpressRoute を利用して Power BI へ接続したいが、Power BI で何か設定する必要がありますか。"></a>Q1：ExpressRoute を利用して Power BI へ接続したいが、Power BI で何か設定する必要がありますか。</h4><p><strong>A1：</strong> Power BI 側にて管理者による特別の設定は必要ございません。お客様のネットワークで ExpressRoute を経由するよう設定いただく必要があります。</p></br><h4 id="Q2：ExpressRoute-を設定したらインターネット経由の接続ができなくなりますか。"><a href="#Q2：ExpressRoute-を設定したらインターネット経由の接続ができなくなりますか。" class="headerlink" title="Q2：ExpressRoute を設定したらインターネット経由の接続ができなくなりますか。"></a>Q2：ExpressRoute を設定したらインターネット経由の接続ができなくなりますか。</h4><p><strong>A2：</strong> Power BI サービス側では、インターネットから直接受信するトラフィックはブロックしません。また、ExpressRoute は、インターネットから直接受信したトラフィックからの応答をブロックしません。</p><p>ExpressRoute をご利用いただくにあたり、以下の2点を認識いただくことが重要です。</p><ul><li><p>お客様の企業ネットワーク内からのトラフィックが ExpressRoute を使用することを保証しないこと。 企業ネットワーク内のプロキシルールとルーティング ルールがこれを決定するため、企業ネットワーク内からの要求が ExpressRoute を使用するように設定する必要があること。</p></li><li><p>他の接続 (たとえば、インターネット上のユーザー) が Power BI へのダイレクト アクセスすることをブロックしないこと</p></li></ul><blockquote><p><strong>参考情報</strong> </p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/guidance/expressroute/setup#client-traffic">クライアント トラフィック | ExpressRoute を Microsoft Power Platform 用に設定する - Power BI | Microsoft Learn</a></li></ul></blockquote><p>もし Power BI サービス側で、インターネットからのアクセスを禁止したい場合は、代わりに、Azure Private Link のご利用をご検討ください。</p><p>詳細につきましては、以下のブログ記事と公開情報をご参照いただけますと幸いです。</p><blockquote><p><strong>参考情報</strong> </p><ul><li><a href="../pbi_privatelink">Power BI Service へのアクセス制御② Azure Private Link</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-security-private-links">Power BI へのセキュリティで保護されたアクセスのためのプライベート エンドポイント - Power BI | Microsoft Learn</a></li></ul></blockquote></br><h4 id="Q3：オンプレミスデータゲートウェイがインストールされている環境で、ExpressRoute-を利用できますか。"><a href="#Q3：オンプレミスデータゲートウェイがインストールされている環境で、ExpressRoute-を利用できますか。" class="headerlink" title="Q3：オンプレミスデータゲートウェイがインストールされている環境で、ExpressRoute を利用できますか。"></a>Q3：オンプレミスデータゲートウェイがインストールされている環境で、ExpressRoute を利用できますか。</h4><p><strong>A3：</strong> はい、ご利用いただけます。Power BI サービスと同様に、オンプレミスデータゲートウェイ側にて特別の設定は必要ございません。お客様の企業ネットワークにて対象の通信設定を実施する場合、以下の公開情報にて必要な通信エンドポイントをご確認ください。</p><blockquote><p><strong>参考情報</strong> </p><ul><li><a href="https://learn.microsoft.com/ja-jp/data-integration/gateway/service-gateway-communication">Port | オンプレミス データ ゲートウェイの通信設定を調整する - Power BI | Microsoft Learn</a></li></ul></blockquote><p>しかしながら、オンプレミスデータゲートウェイがインストールされている環境でインターネットアクセスを完全にブロックしてしまった場合、一部正しく通信できないエンドポイントがございますので、ご留意ください。</p><p>具体的には、Azure Active Directory (Azure AD) と OAuth2 認証部分において、ExpressRoute 非対応のエンドポイントが含まれています。</p></br><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><blockquote><p><strong>本ブログの関連記事</strong></p><ul><li><a href="../pbi_pbiservice_network/">Power BI の通信設定</a></li><li><a href="../pbi_privatelink">Power BI Service へのアクセス制御② Azure Private Link</a></li></ul></blockquote></br><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームのチャンです。&lt;br&gt;オンプレミス環境と Microsoft クラウドサービスの間に、プライベートな通信ルートで接続できる Microsoft Azure ExpressRoute という機能がございます。&lt;br&gt;Power BI の公式情報では詳細な記載がない場合が多いため、お客様よりよくご質問いただく内容につきまして、本ブログにてまとめてご紹介いたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI　　" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="Express Route" scheme="https://jpbap-sqlbi.github.io/blog/tags/Express-Route/"/>
    
    <category term="通信" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E9%80%9A%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>よくある「並べ替え」のお問い合わせ</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_sorting/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_sorting/</id>
    <published>2023-03-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.716Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チーム 丸山です。</p><p>Power BI でレポートを作成しているとき、ビジュアル内のデータの「並べ替え」を行いたいことがあると思います。<br>今回は「並べ替え」についてよくあるお問い合わせと、その代表的な解決策をご紹介します。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><p> <a href="#%E5%89%8D%E6%8F%90%EF%BC%9A%E3%83%93%E3%82%B8%E3%83%A5%E3%82%A2%E3%83%AB%E3%81%AE%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E3%80%8C%E8%BB%B8%E3%81%AE%E4%B8%A6%E3%81%B3%E6%9B%BF%E3%81%88%E3%80%8D">前提：ビジュアルのメニュー「軸の並び替え」</a><br> <a href="#%E3%82%B1%E3%83%BC%E3%82%B9%EF%BC%91%EF%BC%9A%E5%88%97%E3%81%8C%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E5%9E%8B%E3%81%A7%E3%81%82%E3%82%8B%E3%81%9F%E3%82%81%E6%84%8F%E5%9B%B3%E3%81%97%E3%81%9F%E9%A0%86%E3%81%AB%E3%81%AA%E3%82%89%E3%81%AA%E3%81%84%E5%A0%B4%E5%90%88">ケース１：列がテキスト型であるため意図した順にならない場合</a><br> <a href="#%E3%82%B1%E3%83%BC%E3%82%B9%EF%BC%92%EF%BC%9A%EF%BC%92%E3%81%A4%E3%81%AE%E5%88%97%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%80%8C%E4%B8%A6%E3%81%B3%E6%9B%BF%E3%81%88%E3%80%8D%E3%81%97%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88">ケース２：２つの列を使って「並び替え」したい場合</a></p><hr><h2 id="前提：ビジュアルのメニュー「軸の並び替え」"><a href="#前提：ビジュアルのメニュー「軸の並び替え」" class="headerlink" title="前提：ビジュアルのメニュー「軸の並び替え」"></a>前提：ビジュアルのメニュー「軸の並び替え」</h2><hr><p>ビジュアル内のフィールドで並べ替え（昇順/降順）をしたい場合は、以下図の手順で可能です。</p><p>ビジュアル右上 (…) &gt; 軸の並べ替え &gt; フィールド名と昇順/降順を選択</p><div align="center"><img src="1.png"></div></br><p>凡例についても、凡例に使用している列で「並べ替え」を行うことが可能です。</p></br><div class="alert is-info"><p class="alert-title">Note</p><p>// 参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/consumer/end-user-change-sort">レポート内のグラフの並べ替え方法を変更する - Power BI | Microsoft Learn</a></p></div></br><hr><h2 id="ケース１：列がテキスト型であるため意図した順にならない場合"><a href="#ケース１：列がテキスト型であるため意図した順にならない場合" class="headerlink" title="ケース１：列がテキスト型であるため意図した順にならない場合"></a>ケース１：列がテキスト型であるため意図した順にならない場合</h2><hr><p>特定の列で並べ替えをしようと思っても、列がテキスト型である場合は意図した順にならず、<br>テキストによる並び順になってしまいます（見た目が数値でも）</p><p>例） X軸の「月（テキスト型）」で昇順にした場合。1から始まる名称が先頭に並んでいる</p><div align="center"><img src="2.png"></div> </br><p>この問題を解決するには、根本的にはデータアーキテクトの観点でデータソース側のデータの持ち方を変更するということが<br>重要な場合もありますが、Power BI 上でどうにかしたいという場合は、別の列をもとに並べ替えるという解決策があります。<br>具体的な手順は以下です。</p></br><p>ステップ１：並べ替えのもととなる数値型の列を作成する（すでにある場合はステップ２へ）</p><p>① Power Query エディタを開く<br>Power BI Desktop &gt; ホーム &gt; データの変換</p><div align="center"><img src="3.png"></div></br><p>② 列を作成する（以下は一例です。シナリオによっては別の方法で列を作成します）<br>列の追加 &gt; 例からの列 &gt; 選択範囲から &gt; 例をいくつか入力すると法則から値が自動入力される</p><div align="center"><img src="4.png"></div></br><p>③ Power Query エディタを閉じて適用する</p><div align="center"><img src="5.png"></div></br><p>ステップ２ ： 「列で並べ替え」を設定する</p><p>テキスト型のフィールドを選択 &gt; 列で並べ替え &gt; 作成した数値型の列を選択する</p><div align="center"><img src="6.png"></div></br><p>ステップ３：[軸の並べ替え] をすると、裏側では数値型をもとにして並び替えが完了する</p><div align="center"><img src="7.png"></div></br><div class="alert is-info"><p class="alert-title">Note</p><p>// 参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/create-reports/desktop-sort-by-column?tabs=powerbi-desktop">Power BI で 1 つの列をほかの列で並べ替える - Power BI | Microsoft Learn</a></p></div></br><hr><h2 id="ケース２：２つの列を使って「並び替え」したい場合"><a href="#ケース２：２つの列を使って「並び替え」したい場合" class="headerlink" title="ケース２：２つの列を使って「並び替え」したい場合"></a>ケース２：２つの列を使って「並び替え」したい場合</h2><hr><p>列１の値の中で重複するものが存在していて、列２の値も含めて並べ替えをしたい場合、<br>列１の並べ替えを実施した後に、Shift キーを押しながら列２のヘッダーをクリックすると、<br>列１の並べ替えを保持したまま、列２の並べ替えを設定することが可能です。</p><p>以下テーブルビジュアルを例にご説明いたします。<br>「列１」をクリックして並べ替えをした後、Shift キーを押しながら「列2」をクリックします。すると、列１内で重複した値 “3” や “2” に対する列２の値が、それぞれ降順で並べ替えられているのがわかります。</p><p>※昇順と降順の切り替えは、Shift キーを押したままもう一度ヘッダーをクリックする</p><div align="center"><img src="8.png"></div></br><div class="alert is-info"><p class="alert-title">Note</p><p>// 参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/consumer/end-user-change-sort">レポート内のグラフの並べ替え方法を変更する - Power BI | Microsoft Learn</a></p></div></br><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チーム 丸山です。&lt;/p&gt;
&lt;p&gt;Power BI でレポートを作成しているとき、ビジュアル内のデータの「並べ替え」を行いたいことがあると思います。&lt;br&gt;今回は「並べ替え」についてよくあるお問い合わせと、その代表的な解決策をご紹介します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="Power BI Desktop" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-Desktop/"/>
    
  </entry>
  
  <entry>
    <title>XMLAエンドポイント</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_xmlaendpoint/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_xmlaendpoint/</id>
    <published>2023-03-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.764Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの亀田です。<br>Power BI Premium Per Capacity または Premium Per Userでは、XMLAエンドポイントを使用してデータセットに接続したり、更新したりすることができます。今回は  ｢XMLAエンドポイント｣ について説明します。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、　　</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88-%E3%81%A8%E3%81%AF">XMLAエンドポイント とは</a></li><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A">XMLAエンドポイントの設定</a><ul><li><a href="#%E3%83%86%E3%83%8A%E3%83%B3%E3%83%88%E8%A8%AD%E5%AE%9A%E3%81%8B%E3%82%89XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92%E6%9C%89%E5%8A%B9%E5%8C%96%E3%81%99%E3%82%8B">テナント設定からXMLAエンドポイントの設定を有効化する</a></li><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A-Power-BI-Premium-Per-Capacity">XMLAエンドポイントの設定 (Power BI Premium Per Capacity)</a></li><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A-Power-BI-Premium-Per-User">XMLAエンドポイントの設定 (Power BI Premium Per User)</a></li></ul></li><li><a href="#SQL-Server-Management-Studio-SSMS-%E3%81%8B%E3%82%89%E3%81%AE%E6%8E%A5%E7%B6%9A">SQL Server Management Studio (SSMS) からの接続</a></li><li><a href="#%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3">セキュリティ</a></li><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AE%E5%88%A9%E7%94%A8">XMLAエンドポイントの利用</a><ul><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88">XMLAエンドポイントを利用したエクスポート</a>    </li><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%AE%E6%9B%B4%E6%96%B0">XMLAエンドポイントを利用したデータセットの更新</a><ul><li><a href="#SSMS%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E6%9B%B4%E6%96%B0">SSMSを利用したデータセット更新</a></li><li><a href="#PowerShell%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E6%9B%B4%E6%96%B0">PowerShellを利用したデータセット更新</a></li></ul></li><li><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%AE%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97%EF%BD%A5%E5%BE%A9%E5%85%83">データセットのバックアップ･復元</a><ul><li><a href="#%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97">バックアップ</a></li><li><a href="#%E5%BE%A9%E5%85%83">復元</a></li></ul></li></ul></li></ul><h2 id="XMLAエンドポイント-とは"><a href="#XMLAエンドポイント-とは" class="headerlink" title="XMLAエンドポイント とは"></a>XMLAエンドポイント とは</h2><p>XMLAとは、 <strong>XML for Analysis</strong> の略称で、Microsoft Analysis Services エンジンによって使用される通信プロトコルを指します。Excel や SSMS といったクライアント アプリケーションとPower BI のワークスペース･データセットを管理するエンジンとの間の通信には、この XMLA プロトコルが使用されます。これらの接続は、一般的に XMLA エンドポイントと呼ばれるものを経由します。<br>Power BI の設定では、規定で設定されている “読み取り専用” の接続により、クエリを実行してデータを取得できるほか、”読み取り/書き込み” の接続によりデータセットを更新することも可能となります。また、XMLAエンドポイントでの更新は、Power BIの更新上限 (Premiumでは48回/日) にはカウントされないといったメリットがあります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考＃ <a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-premium-connect-tools">Power BI での XMLA エンドポイントを使用したデータセットの接続と管理 - Power BI | Microsoft Learn</a></p></div><h2 id="XMLAエンドポイントの設定"><a href="#XMLAエンドポイントの設定" class="headerlink" title="XMLAエンドポイントの設定"></a>XMLAエンドポイントの設定</h2><p>Power BI でXMLAエンドポイントを利用するためには、以下の設定を行います。それぞれの設定を変更するには、Power BI 管理者や、Premium容量の管理者である必要がありますのでご留意ください。</p><ul><li><a href="#%E3%83%86%E3%83%8A%E3%83%B3%E3%83%88%E8%A8%AD%E5%AE%9A%E3%81%8B%E3%82%89XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92%E6%9C%89%E5%8A%B9%E5%8C%96%E3%81%99%E3%82%8B">テナント設定からXMLAエンドポイントの設定を有効化する</a></li><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A-Power-BI-Premium-Per-Capacity">XMLAエンドポイントの設定 (Power BI Premium Per Capacity)</a></li><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A-Power-BI-Premium-Per-User">XMLAエンドポイントの設定 (Power BI Premium Per User)</a></li></ul><h3 id="テナント設定からXMLAエンドポイントの設定を有効化する"><a href="#テナント設定からXMLAエンドポイントの設定を有効化する" class="headerlink" title="テナント設定からXMLAエンドポイントの設定を有効化する"></a>テナント設定からXMLAエンドポイントの設定を有効化する</h3><p>テナントでXMLAエンドポイントを有効化するには、管理ポータルにアクセスし、 <strong>[テナント設定]</strong> &gt; <strong>[統合の設定]</strong> &gt; <strong>[XMLAエンドポイントとオンプレミスのデータセットによる “Excelで分析” の許可]</strong> を有効化します。</p><div align="center"><img src="xmla01.png"></div>  <h3 id="XMLAエンドポイントの設定-Power-BI-Premium-Per-Capacity"><a href="#XMLAエンドポイントの設定-Power-BI-Premium-Per-Capacity" class="headerlink" title="XMLAエンドポイントの設定 (Power BI Premium Per Capacity)"></a>XMLAエンドポイントの設定 (Power BI Premium Per Capacity)</h3><p>XMLAエンドポイントは規定では “読み取り専用” に設定されていますが、無効化したい場合や、”読み取り/書き込み” に設定を変更したい場合は、以下の手順で設定を変更します。</p><p>管理ポータルを開き、 <strong>[容量の設定]</strong>  から容量を選択します。</p><div align="center"><img src="xmla02.png"></div>  <p><strong>[ワークロード]</strong> &gt; <strong>[XMLA エンドポイント]</strong> の設定を変更します。</p><div align="center"><img src="xmla03.png"></div>  <h3 id="XMLAエンドポイントの設定-Power-BI-Premium-Per-User"><a href="#XMLAエンドポイントの設定-Power-BI-Premium-Per-User" class="headerlink" title="XMLAエンドポイントの設定 (Power BI Premium Per User)"></a>XMLAエンドポイントの設定 (Power BI Premium Per User)</h3><p>Power BI Premium Per UserでXMLAエンドポイントの設定を変更したい場合は、以下の手順になります。</p><p>管理ポータルを開き、 <strong>[Premium Per User]</strong> &gt; <strong>[データセットのワークロード設定]</strong> &gt; <strong>[XMLA エンドポイント]</strong> の設定を変更します。</p><div align="center"><img src="xmla04.png"></div>  <h2 id="SQL-Server-Management-Studio-SSMS-からの接続"><a href="#SQL-Server-Management-Studio-SSMS-からの接続" class="headerlink" title="SQL Server Management Studio (SSMS) からの接続"></a>SQL Server Management Studio (SSMS) からの接続</h2><p>以下の手順により、SQL Server Management Studio (SSMS) からワークスペースへ接続します。SSMSは、以下のリンクより無償でダウンロードいただくことが可能です。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver16">SQL Server Management Studio (SSMS) のダウンロード - SQL Server Management Studio (SSMS) | Microsoft Learn</a></p></div><h3 id="1-ワークスペースの接続-URL-の取得"><a href="#1-ワークスペースの接続-URL-の取得" class="headerlink" title="1.ワークスペースの接続 URL の取得"></a>1.ワークスペースの接続 URL の取得</h3><p>ワークスペースの <strong>[設定]</strong> &gt; <strong>[プレミアム]</strong> &gt; <strong>[ワークスペース接続]</strong> で <strong>[コピー]</strong> を選択します。</p><div align="center"><img src="xmla05.png"></div>  <h3 id="2-SSMSからの接続"><a href="#2-SSMSからの接続" class="headerlink" title="2.SSMSからの接続"></a>2.SSMSからの接続</h3><p>SQL Server Management Studio を開き、 <strong>[接続]</strong> &gt; <strong>[サーバーに接続]</strong> を選択します。</p><p>以下のように設定したら、 <strong>[接続]</strong> を選択します。</p><table><thead><tr><th>項目</th><th>設定</th></tr></thead><tbody><tr><td>サーバーの種類</td><td>Analysis Services</td></tr><tr><td>サーバー名</td><td>手順1で取得したワークスペースの URL</td></tr><tr><td>認証</td><td>Active Directory - MFA で汎用</td></tr><tr><td>ユーザー名</td><td>Power BI にサインインするユーザー ID</td></tr></tbody></table><div align="center"><img src="xmla06.png"></div>  <p>必要な権限のあるユーザーが接続に成功すると、ワークスペースに存在するデータセットが表示されます。</p><div align="center"><img src="xmla07.png"></div>  <h2 id="セキュリティ"><a href="#セキュリティ" class="headerlink" title="セキュリティ"></a>セキュリティ</h2><p>サインインするユーザーに割り当てられているロールが Analysis Services の権限と対応しており、それによってXMLAエンドポイントを使用して行える操作が異なります。以下がそれを整理した表になります。</p><table><thead><tr><th><strong>Power BI アクセス許可</strong></th><th><strong>Analysis Services権限</strong></th><th><strong>実際の動作</strong></th></tr></thead><tbody><tr><td>Power  BIビューアー</td><td>Analysis  Services権限ないユーザー</td><td>データベース（データセット）を参照できない</td></tr><tr><td>Power  BI共同作成者・メンバー・管理者</td><td>Analysis  Servicesデータベース管理者</td><td>新しいデータセットを配置し、SSMS で TMSL スクリプトを実行することができます。</td></tr><tr><td>データセットのビルドアクセス</td><td>Analysis  Services データベース閲覧者</td><td>データの使用と視覚化のためにデータセットに接続し、データセットを参照できます。  行レベル セキュリティ (RLS) 規則が適用され、内部データセットのメタデータを参照することはできません。</td></tr></tbody></table><p>実際の動作は以下のようになります。</p><p><strong>＜XMLAエンドポイントに接続できるが、データセットに接続できない＞</strong></p><p>（ビューアー権限）エンドポイントまたは接続できていますが、データベースの配下に何も表示されません。</p><div align="center"><img src="xmla08.png"></div>  <p><strong>＜XMLAエンドポイントに接続できて、データセットに接続できている状態（ReadまたはRead/Write）＞</strong></p><p>（共同作成者・メンバー・管理者の権限）エンドポイントまたは接続できていて、データベース配下にテーブル（データセット）が表示されています。</p><div align="center"><img src="xmla09.png"></div>  <h2 id="XMLAエンドポイントの利用"><a href="#XMLAエンドポイントの利用" class="headerlink" title="XMLAエンドポイントの利用"></a>XMLAエンドポイントの利用</h2><p>これまでXMLAエンドポイントの設定について説明してきましたが、実際の活用方法についていくつかご紹介します。</p><ul><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88">XMLAエンドポイントを利用したエクスポート</a>    </li><li><a href="#XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%AE%E6%9B%B4%E6%96%B0">XMLAエンドポイントを利用したデータセットの更新</a><ul><li><a href="#SSMS%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E6%9B%B4%E6%96%B0">SSMSを利用したデータセット更新</a></li><li><a href="#PowerShell%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E6%9B%B4%E6%96%B0">PowerShellを利用したデータセット更新</a></li></ul></li><li><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%AE%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97%EF%BD%A5%E5%BE%A9%E5%85%83">データセットのバックアップ･復元</a><ul><li><a href="#%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97">バックアップ</a></li><li><a href="#%E5%BE%A9%E5%85%83">復元</a></li></ul></li></ul><h3 id="XMLAエンドポイントを利用したエクスポート"><a href="#XMLAエンドポイントを利用したエクスポート" class="headerlink" title="XMLAエンドポイントを利用したエクスポート"></a>XMLAエンドポイントを利用したエクスポート</h3><p>XMLAエンドポイントへ接続し、PowerShellのコマンドを利用してデータをエクスポートすることが可能です。<br>Power BI内部で利用しているクエリを実行して取得することができますので、データセットに存在する列のみでなく、メジャーを利用した計算結果を取得することも可能です。</p><p>以下に取得方法を説明します。</p><h4 id="クエリの取得"><a href="#クエリの取得" class="headerlink" title="クエリの取得"></a>クエリの取得</h4><p>Power BI Desktopのパフォーマンス アナライザーを利用して、利用しているクエリを取得します。</p><ol><li>Power BI Desktopを開き、 <strong>[パフォーマンス アナライザー]</strong> を実行し、**[記録の開始]** を選択します。</li></ol>  <div align="center">  <img src="xmla10.png">  </div>  <ol start="2"><li><p><strong>[ビジュアルを更新します]</strong> を選択します。レポート内のビジュアルが更新されます。</p><div align="center"><img src="xmla11.png"></div>  </li><li><p>各ビジュアルの更新時間が表示されます。 <strong>[クエリのコピー]</strong> を選択します。</p><div align="center"><img src="xmla12.png"></div>  </li><li><p>メモ帳などに <strong>[貼り付け]</strong> して保存しておきます。</p><div align="center"><img src="xmla13.png"></div>  </li></ol><h4 id="コマンドの作成"><a href="#コマンドの作成" class="headerlink" title="コマンドの作成"></a>コマンドの作成</h4><p>PowerShellで実行するコマンドを作成します。動作確認のために使用しているPowerShellの環境は以下になります。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Windows\System32&gt; <span class="variable">$PSVersionTable</span></span><br><span class="line"></span><br><span class="line">Name                           Value</span><br><span class="line">----                           -----</span><br><span class="line">PSVersion                      <span class="number">7.3</span>.<span class="number">3</span></span><br><span class="line">PSEdition                      Core</span><br><span class="line">GitCommitId                    <span class="number">7.3</span>.<span class="number">3</span></span><br><span class="line">OS                             Microsoft Windows <span class="number">10.0</span>.<span class="number">22621</span></span><br><span class="line">Platform                       Win32NT</span><br><span class="line">PSCompatibleVersions           &#123;<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>…&#125;</span><br><span class="line">PSRemotingProtocolVersion      <span class="number">2.3</span></span><br><span class="line">SerializationVersion           <span class="number">1.1</span>.<span class="number">0.1</span></span><br><span class="line">WSManStackVersion              <span class="number">3.0</span></span><br></pre></td></tr></table></figure><p>Visual Studio Codeやメモ帳などお好みのエディタから以下のコードを入力し、.ps1ファイルとして保存します。検証のためユーザー名とパスワードを平文で含めていますが、セキュリティの観点からこのまま利用することは避け、実運用時には別ファイルから取得するなどの構成としてください。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">System.Reflection.Assembly</span>]::LoadWithPartialName(<span class="string">&quot;Microsoft.AnalysisServices.AdomdClient&quot;</span>) </span><br><span class="line"><span class="variable">$PowerBIEndpoint</span> = <span class="string">&quot;powerbi://api.powerbi.com/v1.0/myorg/&lt;ワークスペース名&gt;;initial catalog=&lt;データセット名&gt;&quot;</span></span><br><span class="line"><span class="variable">$PowerBILogin</span> = <span class="string">&quot;&lt;アカウント名&gt;&quot;</span></span><br><span class="line"><span class="variable">$PowerBIPassword</span> = <span class="string">&quot;&lt;パスワード&gt;&quot;</span> </span><br><span class="line"><span class="variable">$Query</span> = <span class="string">&quot;&lt;取得したクエリ&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$ExportPath</span> = <span class="string">&quot;&lt;保存したいパス&gt;&quot;</span></span><br><span class="line">  </span><br><span class="line"><span class="variable">$Connection</span> = <span class="built_in">New-Object</span> <span class="literal">-TypeName</span> System.Data.OleDb.OleDbConnection</span><br><span class="line"><span class="variable">$Results</span> = <span class="built_in">New-Object</span> System.Data.DataTable</span><br><span class="line"><span class="variable">$Connection</span>.ConnectionString = <span class="string">&quot;Provider=MSOLAP.8;Data Source=&quot;</span>+ <span class="variable">$PowerBIEndpoint</span> +<span class="string">&quot;;UID=&quot;</span>+ <span class="variable">$PowerBILogin</span> +<span class="string">&quot;;PWD=&quot;</span>+ <span class="variable">$PowerBIPassword</span>  </span><br><span class="line"><span class="variable">$Connection</span>.Open() </span><br><span class="line"><span class="variable">$Adapter</span> = <span class="built_in">New-Object</span> <span class="literal">-TypeName</span> System.Data.OleDb.OleDbDataAdapter <span class="variable">$Query</span> ,<span class="variable">$Connection</span></span><br><span class="line"><span class="variable">$Adapter</span>.Fill(<span class="variable">$Results</span>) </span><br><span class="line"><span class="variable">$Results</span> | <span class="built_in">export-csv</span> <span class="literal">-Path</span> <span class="variable">$ExportPath</span>  <span class="literal">-NoTypeInformation</span></span><br><span class="line"><span class="variable">$Connection</span>.Dispose()</span><br><span class="line"><span class="variable">$Connection</span>.Close()</span><br></pre></td></tr></table></figure><p>注意するべき点として、取得したクエリ内に “” (ダブルクオーテーション) が含まれる場合には ` (バックスラッシュ) でエスケープする必要があります。例えば取得したクエリが以下の場合、</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">DEFINE</span><br><span class="line">VAR __DS0Core = </span><br><span class="line">SUMMARIZECOLUMNS(</span><br><span class="line">ROLLUPADDISSUBTOTAL(</span><br><span class="line">ROLLUPGROUP(</span><br><span class="line"><span class="string">&#x27;SalesLT Product&#x27;</span>[<span class="type">Name</span>],</span><br><span class="line"><span class="string">&#x27;SalesLT ProductCategory&#x27;</span>[<span class="type">Name</span>],</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">OrderQty</span>],</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">UnitPrice</span>],</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">UnitPriceDiscount</span>]</span><br><span class="line">), <span class="string">&quot;IsGrandTotalRowTotal&quot;</span></span><br><span class="line">),</span><br><span class="line"><span class="string">&quot;MTotal&quot;</span>, <span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">MTotal</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">VAR __DS0PrimaryWindowed = </span><br><span class="line">TOPN(</span><br><span class="line"><span class="number">502</span>,</span><br><span class="line">__DS0Core,</span><br><span class="line">[<span class="type">IsGrandTotalRowTotal</span>],</span><br><span class="line"><span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;SalesLT Product&#x27;</span>[<span class="type">Name</span>],</span><br><span class="line"><span class="number">1</span>,</span><br><span class="line"><span class="string">&#x27;SalesLT ProductCategory&#x27;</span>[<span class="type">Name</span>],</span><br><span class="line"><span class="number">1</span>,</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">OrderQty</span>],</span><br><span class="line"><span class="number">1</span>,</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">UnitPrice</span>],</span><br><span class="line"><span class="number">1</span>,</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">UnitPriceDiscount</span>],</span><br><span class="line"><span class="number">1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">EVALUATE</span><br><span class="line">__DS0PrimaryWindowed</span><br><span class="line"></span><br><span class="line">ORDER BY</span><br><span class="line">[<span class="type">IsGrandTotalRowTotal</span>] DESC,</span><br><span class="line"><span class="string">&#x27;SalesLT Product&#x27;</span>[<span class="type">Name</span>],</span><br><span class="line"><span class="string">&#x27;SalesLT ProductCategory&#x27;</span>[<span class="type">Name</span>],</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">OrderQty</span>],</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">UnitPrice</span>],</span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;</span>[<span class="type">UnitPriceDiscount</span>]</span><br></pre></td></tr></table></figure><p>このように記載する必要があります。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$Query</span> = </span><br><span class="line"><span class="string">&quot;DEFINE</span></span><br><span class="line"><span class="string">VAR __DS0Core = </span></span><br><span class="line"><span class="string">SUMMARIZECOLUMNS(</span></span><br><span class="line"><span class="string">ROLLUPADDISSUBTOTAL(</span></span><br><span class="line"><span class="string">ROLLUPGROUP(</span></span><br><span class="line"><span class="string">&#x27;SalesLT Product&#x27;[Name],</span></span><br><span class="line"><span class="string">&#x27;SalesLT ProductCategory&#x27;[Name],</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[OrderQty],</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[UnitPrice],</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[UnitPriceDiscount]</span></span><br><span class="line"><span class="string"># &quot;</span>IsGrandTotalRowTotal<span class="string">&quot;をバックスラッシュでエスケープ</span></span><br><span class="line"><span class="string">), `&quot;IsGrandTotalRowTotal`&quot;</span></span><br><span class="line"><span class="string">),</span></span><br><span class="line"><span class="string"># &quot;</span>MTotal<span class="string">&quot;をバックスラッシュでエスケープ</span></span><br><span class="line"><span class="string">`&quot;MTotal`&quot;, &#x27;SalesLT SalesOrderDetail&#x27;[MTotal]</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">VAR __DS0PrimaryWindowed = </span></span><br><span class="line"><span class="string">TOPN(</span></span><br><span class="line"><span class="string">502,</span></span><br><span class="line"><span class="string">__DS0Core,</span></span><br><span class="line"><span class="string">[IsGrandTotalRowTotal],</span></span><br><span class="line"><span class="string">0,</span></span><br><span class="line"><span class="string">&#x27;SalesLT Product&#x27;[Name],</span></span><br><span class="line"><span class="string">1,</span></span><br><span class="line"><span class="string">&#x27;SalesLT ProductCategory&#x27;[Name],</span></span><br><span class="line"><span class="string">1,</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[OrderQty],</span></span><br><span class="line"><span class="string">1,</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[UnitPrice],</span></span><br><span class="line"><span class="string">1,</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[UnitPriceDiscount],</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EVALUATE</span></span><br><span class="line"><span class="string">__DS0PrimaryWindowed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ORDER BY</span></span><br><span class="line"><span class="string">[IsGrandTotalRowTotal] DESC,</span></span><br><span class="line"><span class="string">&#x27;SalesLT Product&#x27;[Name],</span></span><br><span class="line"><span class="string">&#x27;SalesLT ProductCategory&#x27;[Name],</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[OrderQty],</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[UnitPrice],</span></span><br><span class="line"><span class="string">&#x27;SalesLT SalesOrderDetail&#x27;[UnitPriceDiscount]&quot;</span></span><br></pre></td></tr></table></figure><p>作成したコマンドを実行することで、指定したパスに.csvファイルが出力されます。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Windows\System32&gt; C:\PBISAMPLE\xmla<span class="literal">-export</span><span class="literal">-sample</span>.ps1</span><br></pre></td></tr></table></figure><p>生成された.CSVファイル</p><div align="center"><img src="xmla14.png"></div>  <h3 id="XMLAエンドポイントを利用したデータセットの更新"><a href="#XMLAエンドポイントを利用したデータセットの更新" class="headerlink" title="XMLAエンドポイントを利用したデータセットの更新"></a>XMLAエンドポイントを利用したデータセットの更新</h3><p>XMLAエンドポイントを利用することで、データセットの更新が行うことができます。XMLAエンドポイントでの更新は、Power BIの更新上限 (Premiumでは48回/日) にはカウントされないため、頻繁にデータセットを更新する必要がある場合にご利用いただけます。</p><h4 id="SSMSを利用したデータセット更新"><a href="#SSMSを利用したデータセット更新" class="headerlink" title="SSMSを利用したデータセット更新"></a>SSMSを利用したデータセット更新</h4><p>SSMSを利用してデータセット更新について説明します。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/analysis-services/tabular-models/process-database-table-or-partition-analysis-services?view=power-bi-premium-current&preserve-view=true">データベース、テーブル、またはパーティションの処理 (Analysis Services) | Microsoft Learn</a></p></div><ol><li><p>更新したいデータセットを右クリックし、 <strong>[データベースの処理]</strong> を選択します。</p><div align="center"><img src="xmla15.png"></div>  </li><li><p>モードを選択します。今回は例として”完全更新”を選択します。 <strong>[OK]</strong> をクリックし、更新を実行します。</p><p>それぞれのモードは以下の処理を表します。</p><table><thead><tr><th>モード</th><th>説明</th></tr></thead><tbody><tr><td><strong>既定の処理</strong></td><td>データベース オブジェクトの処理状態を検出し、処理されていないオブジェクトや部分的に処理されたオブジェクトを完全処理状態にするために必要な処理を行います。 空のテーブルとパーティションのデータが読み込まれ、階層、計算列、およびリレーションシップが構築または再構築 (再計算) されます。</td></tr><tr><td><strong>完全処理</strong></td><td>データベースとそのデータベースに含まれるすべてのオブジェクトを処理します。 既に処理されているオブジェクトに対して完全処理を実行すると、SQL Server Analysis Servicesオブジェクト内のすべてのデータが削除され、そのオブジェクトが処理されます。 この種の処理は、構造上の変更をオブジェクトに加えた場合に必要となります。 このオプションは最も多くのリソースを必要とします。</td></tr><tr><td><strong>消去の処理</strong></td><td>データベース オブジェクトからすべてのデータを削除します。</td></tr><tr><td><strong>再計算の処理</strong></td><td>階層、リレーションシップ、および計算列を更新して再計算します。</td></tr></tbody></table><div align="center"><img src="xmla16.png"></div>  </li><li><p>更新が成功したことを確認します。</p><div align="center"><img src="xmla17.png"></div>  </li></ol><p>手順2で <strong>[スクリプト]</strong> を選択すると、更新のためのTMSLスクリプトが表示されます。</p><div align="center"><img src="xmla30.png"></div>  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;refresh&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;full&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;objects&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;database&quot;</span>: <span class="string">&quot;rp-xmla-test-01&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>生成されたTMSLスクリプトは、SQL Server Agent ジョブや、SQL Server Integration Services(SSIS)、PowerShellのInvoke-ASCmdコマンドからの実行が可能です。例えば、SQL Server Agent ジョブを設定することで、スケジュール更新を行うことや、SSISでのETL処理後にデータセットを更新するといったことが可能となります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/analysis-services/tmsl/refresh-command-tmsl?view=asallproducts-allversions">Refresh コマンド (TMSL) | Microsoft Learn</a></p></div><p>また、データセットをすべて更新する以外にも、テーブルを更新することや、パーティションを更新することが可能です。データセットに増分更新を設定している場合は、パーティション単位での更新を行うことで、更新範囲を限定することができ、更新のパフォーマンスを向上させることができます。</p><p>テーブルを更新したい場合には、更新したいテーブルを右クリックし、 <strong>[テーブルの処理]</strong> を選択します。</p><div align="center"><img src="xmla18.png"></div>  <p>処理モードと処理するオブジェクトを選択し、更新を行います。</p><div align="center"><img src="xmla19.png"></div>  <p>また、パーティションを更新したい場合には、更新したいパーティションを右クリックし、 <strong>[パーティション]</strong> を選択します。</p><div align="center"><img src="xmla20.png"></div>  <p><strong>[処理]</strong> を選択します。</p><div align="center"><img src="xmla21.png"></div>  <p>処理モードと処理するオブジェクトを選択し、更新を行います。</p><div align="center"><img src="xmla22.png"></div>  <p>テーブルやパーティションの更新についても、同様にTMSLスクリプトでの更新が可能です。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// テーブルの更新</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;refresh&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;full&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;objects&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;database&quot;</span>: <span class="string">&quot;rp-xmla-test-01&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;table&quot;</span>: <span class="string">&quot;SalesLT ProductCategory&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// パーティションの更新</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;refresh&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;full&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;objects&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;database&quot;</span>: <span class="string">&quot;rp-xmla-test-01&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;table&quot;</span>: <span class="string">&quot;SalesLT SalesOrderDetail&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;partition&quot;</span>: <span class="string">&quot;SalesLT SalesOrderDetail-a283583f-1fe4-4dc5-bd55-46106f953eea&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>増分更新やパーティションについて、以下の公開情報やブログをご確認ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/connect-data/incremental-refresh-overview">Power BI でのデータセットの増分更新とリアルタイム データ - Power BI | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/connect-data/incremental-refresh-xmla">Power BI での XMLA エンドポイントを使用した高度な増分更新およびリアルタイム データ - Power BI | Microsoft Learn</a></p><p>参考# <a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_incremental_refresh/">増分更新の概要と設定方法 | Japan CSS Support Power BI Blog (jpbap-sqlbi.github.io)</a></p></div><h4 id="PowerShellを利用したデータセット更新"><a href="#PowerShellを利用したデータセット更新" class="headerlink" title="PowerShellを利用したデータセット更新"></a>PowerShellを利用したデータセット更新</h4><p>PowerShellからの更新の例として、Invoke-ProcessASDatabaseを利用したデータセット更新について説明します。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/powershell/module/sqlserver/invoke-processasdatabase?view=sqlserver-ps">Invoke-ProcessASDatabase (SqlServer) | Microsoft Learn</a></p></div><p>SQL Server PowerShell モジュールのインストールがされていない場合には、以下のコマンドでインストールを行います。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Windows\System32&gt; <span class="built_in">Install-Module</span> <span class="literal">-Name</span> SqlServer</span><br></pre></td></tr></table></figure><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/sql/powershell/download-sql-server-ps-module?view=sql-server-ver16">SQL Server PowerShell モジュールのダウンロード - SQL Server | Microsoft Learn</a></p></div><p>インストール後、以下のコマンドを実行し、Invoke-ProcessASDatabase が含まれていることを確認します。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Windows\System32&gt; <span class="built_in">Get-Command</span> <span class="literal">-Module</span> sqlserver</span><br></pre></td></tr></table></figure><p>含まれていない場合には、以下のコマンドを実行し、プレビュー版のインストールを行います。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Windows\System32&gt; <span class="built_in">Install-Module</span> <span class="literal">-Name</span> SqlServer <span class="literal">-AllowPrerelease</span> <span class="literal">-Force</span></span><br></pre></td></tr></table></figure><p>再度以下のコマンドを実行し、Invoke-ProcessASDatabase が含まれていることを確認します。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Windows\System32&gt; <span class="built_in">Get-Command</span> <span class="literal">-Module</span> sqlserver</span><br></pre></td></tr></table></figure><p>インストールが完了したら、Visual Studio Codeやメモ帳などお好みのエディタから以下のコードを入力し、.ps1ファイルとして保存します。こちらも、検証のためユーザー名とパスワードを平文で含めていますが、セキュリティの観点からこのまま利用することは避け、実運用時には別ファイルから取得するなどの構成としてください。以下の例では、データセットの完全更新を行います。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Import-Module</span> SqlServer <span class="literal">-Version</span> <span class="number">22.0</span>.<span class="number">49</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$Workspace</span> = <span class="string">&quot;powerbi://api.powerbi.com/v1.0/myorg/&lt;ワークスペース名&gt;&quot;</span></span><br><span class="line"><span class="variable">$Database</span> = <span class="string">&quot;&lt;データセット名&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$PowerBILogin</span> = <span class="string">&quot;&lt;アカウント名&gt;&quot;</span></span><br><span class="line"><span class="variable">$PowerBIPassword</span> = <span class="built_in">ConvertTo-SecureString</span> <span class="string">&quot;&lt;パスワード&gt;&quot;</span> <span class="literal">-AsPlainText</span> <span class="literal">-Force</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$Credential</span> = <span class="built_in">New-Object</span> System.Management.Automation.PSCredential (<span class="variable">$PowerBILogin</span>, <span class="variable">$PowerBIPassword</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Invoke-ProcessASDatabase</span> <span class="literal">-Server</span> <span class="variable">$Workspace</span> <span class="literal">-DatabaseName</span> <span class="variable">$Database</span> <span class="literal">-Credential</span> <span class="variable">$Credential</span> <span class="literal">-RefreshType</span> Full </span><br></pre></td></tr></table></figure><p>作成したコマンドを実行することで、データセットの更新が行われます。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Windows\System32&gt; C:\PBISAMPLE\xmla<span class="literal">-refresh</span><span class="literal">-sample</span>.ps1</span><br><span class="line">Impact                                          XmlaResults</span><br><span class="line">------                                          -----------</span><br><span class="line">Microsoft.AnalysisServices.Tabular.ObjectImpact &#123;Microsoft.AnalysisServices.XmlaResult&#125;</span><br></pre></td></tr></table></figure><p>テーブルを更新する場合やパーティションを更新する場合には以下のコードとなります。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">Invoke-ProcessTable</span> <span class="literal">-TableName</span> <span class="string">&quot;&lt;テーブル名&gt;&quot;</span> <span class="literal">-RefreshType</span> Full <span class="literal">-Server</span> <span class="variable">$Workspace</span> <span class="literal">-DatabaseName</span> <span class="variable">$Database</span> <span class="literal">-Credential</span> <span class="variable">$Credential</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># パーティションの更新</span></span><br><span class="line"><span class="built_in">Invoke-ProcessPartition</span> <span class="literal">-TableName</span> <span class="string">&quot;&lt;テーブル名&gt;&quot;</span> <span class="literal">-PartitionName</span> <span class="string">&quot;&lt;パーティション名&gt;&quot;</span> <span class="literal">-RefreshType</span> Full <span class="literal">-Server</span> <span class="variable">$Workspace</span> <span class="literal">-Database</span> <span class="variable">$Database</span> <span class="literal">-Credential</span> <span class="variable">$Credential</span></span><br></pre></td></tr></table></figure><h3 id="データセットのバックアップ･復元"><a href="#データセットのバックアップ･復元" class="headerlink" title="データセットのバックアップ･復元"></a>データセットのバックアップ･復元</h3><p>大きいデータセットのストレージ形式や増分更新を設定したデータセット、XMLAエンドポイントを利用して変更されたデータセットはダウンロードすることができませんが、SSMSからXMLAエンドポイントを利用することでバックアップや復元が可能となります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-premium-backup-restore-dataset">Power BI Premium データセットのバックアップと復元 - Power BI | Microsoft Learn</a></p></div><h3 id="バックアップ"><a href="#バックアップ" class="headerlink" title="バックアップ"></a>バックアップ</h3><p>バックアップを行う前に、ワークスペースにAzure Data Lake Storage Gen2を接続しておく必要があります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/transform-model/dataflows/dataflows-azure-data-lake-storage-integration">Azure Data Lake Gen 2 を使用するようにデータフロー ストレージを構成する - Power BI | Microsoft Learn</a></p></div><div align="center"><img src="xmla23.png"></div>  <div align="center"><img src="xmla24.png"></div>  <p>設定が完了したら、SSMSでデータベースを右クリックし、 <strong>[バックアップ]</strong> を選択します。</p><div align="center"><img src="xmla25.png"></div>  <div align="center"><img src="xmla26.png"></div>  <p>バックアップが完了すると、接続されたAzure Data Lake Storage Gen2に.adfファイルが保存されます。</p><div align="center"><img src="xmla27.png"></div>  <h4 id="復元"><a href="#復元" class="headerlink" title="復元"></a>復元</h4><p>データセットを復元するには、SSMSでデータベースを右クリックし、 <strong>[復元]</strong> を選択します。</p><div align="center"><img src="xmla28.png"></div>  <p>復元するファイルを選択します。</p><div align="center"><img src="xmla29.png"></div>  <p>XMLAエンドポイントによって、よりPower BIの利用の幅が広がります。Power BI Premiumをご契約いただいていないユーザー様でも、試用版Power BI Premium Userのライセンスのご利用で本機能をお試しいただけます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_disable_trial_version/#Power-BI-%E8%A9%A6%E7%94%A8%E7%89%88%EF%BC%88%E7%84%A1%E6%96%99%E4%BD%93%E9%A8%93%EF%BC%89%E3%81%A8%E3%81%AF">Power BI 試用版（無料体験）を無効化する方法 | Japan CSS Support Power BI Blog (jpbap-sqlbi.github.io)</a></p></div><p>以上、本ブログが少しでも皆さまのお役に立てますと幸いでございます。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの亀田です。&lt;br&gt;Power BI Premium Per Capacity または Premium Per Userでは、XMLAエンドポイントを使用してデータセットに接続したり、更新したりすることができます。今回は  ｢XMLAエンドポイント｣ について説明します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="更新" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E6%9B%B4%E6%96%B0/"/>
    
    <category term="Power BI Premium" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-Premium/"/>
    
    <category term="XMLAエンドポイント" scheme="https://jpbap-sqlbi.github.io/blog/tags/XMLA%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88/"/>
    
  </entry>
  
  <entry>
    <title>組織内のユーザーのマイ ワークスペースへアクセスする方法</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_control_access_myworkspace/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_control_access_myworkspace/</id>
    <published>2023-02-27T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.164Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームのファムです。</p><p>組織内のユーザーが退職やプロジェクト離任時に、そのユーザーのマイ ワークスペースで作成されたレポートやデータセットにアクセスしたい場面がございませんでしょうか。実は、Power BI管理者権限のユーザーなら、組織内のユーザーのマイ ワークスペースへ適用するごとに24時間限定でアクセスできる機能がございます。</p><p>本ブログでは、Power BI 管理者権限で組織内のユーザーのマイ ワークスペースへアクセスする方法の手順をご紹介します。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>ご紹介する機能は、現時点ではプレビュー機能で開発段階のため、今後予告なしに機能が削除されたり、または動作変更が発生する可能性があったりしますので、あらかじめご了承ください。</p><p>本記事編集時点と実際の機能に相違がある場合がございます。予めご了承ください。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p><p></br></p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><ol><li><a href="#%E3%83%9E%E3%82%A4-%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AF">マイ ワークスペースとは</a></li><li><a href="#%E7%B5%84%E7%B9%94%E5%86%85%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E3%83%9E%E3%82%A4-%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%81%B8%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%99%E3%82%8B%E6%89%8B%E9%A0%86">組織内のユーザーのマイ ワークスペースへアクセスする手順</a></br></li></ol><hr><h2 id="マイ-ワークスペースとは"><a href="#マイ-ワークスペースとは" class="headerlink" title="マイ ワークスペースとは"></a>マイ ワークスペースとは</h2><hr><p>すべての Power BI ユーザーには、マイ ワークスペースと呼ばれる個人用ワークスペースがあり、ユーザーはそこで自分のコンテンツを操作できます。 通常、マイ ワークスペースにアクセスできるのはそのマイ ワークスペースの所有者のみですが、Power BI 管理者は一連の機能を使用して、それらのワークスペースを管理できます。</p><blockquote><p><strong>参考情報</strong><br> <a href="https://learn.microsoft.com/ja-jp/power-bi/admin/service-admin-portal-workspaces#gain-access-to-any-users-my-workspace">マイ ワークスペースを管理する</a><br>※本情報の内容（添付文書、リンク先などを含む）は作成日時点でのものであり、予告なく変更される場合があります。</p></blockquote><hr><h2 id="組織内のユーザーのマイ-ワークスペースへアクセスする手順"><a href="#組織内のユーザーのマイ-ワークスペースへアクセスする手順" class="headerlink" title="組織内のユーザーのマイ ワークスペースへアクセスする手順"></a>組織内のユーザーのマイ ワークスペースへアクセスする手順</h2><hr><p>Power BI管理者権限のユーザーで、Power BIサービスにサインイン後、「<strong>…</strong>」＞ 「<strong>設定</strong>」＞ 「<strong>管理ポータル</strong>」＞ 「<strong>ワークスペース</strong>」へ移動します。</p><p>ユーザーのマイ ワークスペースの確認方法は、ワークスペースの名前が「<strong>PersonalWorkspace ＋ ユーザー名</strong>」となっているか、またはワークスペースの型が「<strong>個人用グループアクティブ</strong>」となっていることを確認します。</p><div align="center"><img src="image1.png"></div><p>アクセスしたいユーザーのマイ ワークスペースを選択し、「<strong>アクセスの取得</strong>」を押下します。その時点で、該当のユーザーのマイ ワークスペースにアクセスできます。<br>※「アクセスの取得」ボタンを押下した時点から24時間後に、アクセス権限が自動的に解除されます。</p><div align="center"><img src="image2.png"></div><p>管理者の「<strong>ワークスペース</strong>」から、該当のユーザーのマイ ワークスペースを確認できます。</p><div align="center"><img src="image3.png"></div><p>該当ユーザーの「<strong>マイ ワークスペース</strong>」にアクセスし、ワークスペース内のコンテンツを確認できます。</p><div align="center"><img src="image4.png"></div><p>マイ ワークスペースのレポートやデータセットの閲覧、.pbixファイルのダウンロードなどを行うことも可能です。</p><div align="center"><img src="image5.png"></div><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームのファムです。&lt;/p&gt;
&lt;p&gt;組織内のユーザーが退職やプロジェクト離任時に、そのユーザーのマイ ワークスペースで作成されたレポートやデータセットにアクセスしたい場面がございませんでしょうか。実は、Power BI管理者権限のユーザーなら、組織内のユーザーのマイ ワークスペースへ適用するごとに24時間限定でアクセスできる機能がございます。&lt;/p&gt;
&lt;p&gt;本ブログでは、Power BI 管理者権限で組織内のユーザーのマイ ワークスペースへアクセスする方法の手順をご紹介します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="users in your organization" scheme="https://jpbap-sqlbi.github.io/blog/tags/users-in-your-organization/"/>
    
    <category term="myworkspace" scheme="https://jpbap-sqlbi.github.io/blog/tags/myworkspace/"/>
    
    <category term="control" scheme="https://jpbap-sqlbi.github.io/blog/tags/control/"/>
    
  </entry>
  
  <entry>
    <title>Power BI サービスに発行したレポートの時刻のずれについて</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_service_timezone/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_service_timezone/</id>
    <published>2023-02-27T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.712Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの山崎です。<br>Power BI Desktopで作成したレポートを Power BI サービスに発行した後、相対時間のスライサー、フィルターの結果、Now 関数や DateTimeZone 関数などで取得した日付と時刻のデータにずれが生じて困ったことはありませんか。<br>今回は、この日付と時刻のデータにずれが生じる理由と対処策をご案内いたします。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div></br><hr><h2 id="Power-BI-サービスの協定世界時-UTC-の時刻に基づいている"><a href="#Power-BI-サービスの協定世界時-UTC-の時刻に基づいている" class="headerlink" title="Power BI サービスの協定世界時 (UTC) の時刻に基づいている"></a>Power BI サービスの協定世界時 (UTC) の時刻に基づいている</h2><p>Power BI のデータ モデルには、タイムゾーン情報が含まれていません。<br>Power BI Desktop は、アプリをインストールした PC のシステム時間に基づき動作します。<br>このため、日本の時間に合わせた PC 上で、例えば DAX の Now 関数や Power Query の <code>DateTimeZone.LocalNow</code> 関数を使用した場合は、日本時間に合わせて日付と時刻の情報を取得します。<br>一方で Power BI サービスは、グローバルでのコンテンツ共有を想定しており、統一したタイムゾーンベースでの可視化をベースとすることを理由に、テナントのリージョンや言語設定、ユーザーが使用する PC のシステム時間やブラウザ言語にかかわらず、 協定世界時 (UTC) の時刻に基づき動作します。<br>この違いにより、Power BI サービスに発行したレポート上の日付と時刻の情報にずれが生じる場合があります。</p><p>参考情報：<br><a href="https://learn.microsoft.com/ja-jp/dax/date-and-time-functions-dax">日付と時刻関数</a><br><a href="https://learn.microsoft.com/ja-jp/powerquery-m/datetimezone-functions">DateTimeZone 関数</a> </p></br><h2 id="日本のユーザーは-9-時間のずれを考慮する必要がある"><a href="#日本のユーザーは-9-時間のずれを考慮する必要がある" class="headerlink" title="日本のユーザーは 9 時間のずれを考慮する必要がある"></a>日本のユーザーは 9 時間のずれを考慮する必要がある</h2><p>協定世界時 (UTC) と日本標準時 (JST) の時差は 9 時間です。<br>このため、Power BI サービス上でレポートを使用する場合は、 9 時間の差を考慮する必要があります。<br>具体的には、取得した時間に +9 時間する計算をしたり、タイムゾーン情報を変更する関数を使用するなどして工夫することで対処します。<br>次の項では、2つの例をご案内いたします。 </p><p>参考情報：<br><a href="https://learn.microsoft.com/ja-jp/power-bi/create-reports/slicer-filter-relative-time#considerations-and-limitations">Power BI で相対時間のスライサーおよびフィルターを作成する- 考慮事項と制限事項</a> </p></br> <h2 id="対処策の例"><a href="#対処策の例" class="headerlink" title="対処策の例"></a>対処策の例</h2><p><strong>例１：Now 関数で現在の日付と時刻の情報を取得している場合</strong><br>以下のように、<a href="https://learn.microsoft.com/ja-jp/dax/utcnow-function-dax">UTCNow</a> 関数で UTC の現在の日付と時刻を取得し +9 時間する列を作成します。</p><blockquote><p>UTCNow+9 = <font color="DodgerBlue">UTCNOW</font>() + <font color="DodgerBlue">TIME</font>(<font color="DarkTurquoise">9</font>,<font color="DarkTurquoise">0</font>,<font color="DarkTurquoise">0</font>)</p></blockquote><p>Power BI Desktop 上では、どちらも日本時間で表示されます。</p><div align="center"><img src="1.png"></div></p><p>Power BI サービスに発行すると、<code>Now</code> 関数で取得した [Now] 列のデータは UTC の時間ですが、 <code>UTCNow</code> 関数で UTC の現在の日付と時刻を取得し +9 時間した [UTCNow＋9] 列は、日本時間で表示することができます。</p><div align="center"><img src="2.png"></div></p></br><p><strong>例２：Power Query で現在の日付と時刻情報を取得する場合</strong><br>Power Query で <code>DateTime.LocalNow</code> などの関数を使用すると、現在の日付と時刻の情報を取得できます。<br>しかしながら、上述の通りこのまま Power BI サービスに発行すると 9 時間のずれが発生するため、タイムゾーン情報を変更する関数 <a href="https://learn.microsoft.com/ja-jp/powerquery-m/datetimezone-switchzone">DateTimeZone.SwitchZone</a> を使用することで時間のずれを回避し、Power BI サービス上でも日本時間にて日付と時刻の情報を取得することができます。</p><p>Power Query で <code>DateTime.LocalNow</code> 関数を用いて現在の日付と時刻の情報を取得した場合：<br>PCのシステム時間に基づきます。</p><blockquote><p>＝ DateTime.LocalNow()</p></blockquote><div align="center"><img src="3.png"></div></p><p><code>DateTimeZone.SwitchZone</code> 関数を用いて、タイムゾーン情報を +9 時間に変更した場合：<br>UTC に +9 時間するので、結果として日本の時間になります。</p><blockquote><p>= DateTimeZone.SwitchZone(DateTimeZone.UtcNow(),<font color="DarkTurquoise">09</font>)</p></blockquote><div align="center"><img src="4.png"></div></p><p>Power BI Desktop 上では、どちらも日本時間で表示されます。</p><div align="center"><img src="5.png"></div></p><p>Power BI サービス に発行すると、<code>DateTime.LocalNow</code> 関数を用いたほうは UTC の時間で表示されますが、<code>DateTimeZone.SwitchZone</code> 関数を用いたほうは UTC に+9 時間しているため、日本の時間になります。</p><div align="center"><img src="6.png"></div></p></br><p>このように、時刻のずれが生じた場合は、UTC とのずれを考慮したレポート作成を実施していただきますようお願いいたします。</p><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの山崎です。&lt;br&gt;Power BI Desktopで作成したレポートを Power BI サービスに発行した後、相対時間のスライサー、フィルターの結果、Now 関数や DateTimeZone 関数などで取得した日付と時刻のデータにずれが生じて困ったことはありませんか。&lt;br&gt;今回は、この日付と時刻のデータにずれが生じる理由と対処策をご案内いたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="PowerBI" scheme="https://jpbap-sqlbi.github.io/blog/tags/PowerBI/"/>
    
    <category term="UTC" scheme="https://jpbap-sqlbi.github.io/blog/tags/UTC/"/>
    
    <category term="相対時間" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E7%9B%B8%E5%AF%BE%E6%99%82%E9%96%93/"/>
    
    <category term="タイムゾーン" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3/"/>
    
    <category term="9時間" scheme="https://jpbap-sqlbi.github.io/blog/tags/9%E6%99%82%E9%96%93/"/>
    
    <category term="JST" scheme="https://jpbap-sqlbi.github.io/blog/tags/JST/"/>
    
    <category term="DateTimeZone" scheme="https://jpbap-sqlbi.github.io/blog/tags/DateTimeZone/"/>
    
    <category term="Now" scheme="https://jpbap-sqlbi.github.io/blog/tags/Now/"/>
    
  </entry>
  
  <entry>
    <title>Power BI テーマについて</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_theme_introduction/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_theme_introduction/</id>
    <published>2023-02-27T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.728Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの呂です。<br>レポートやダッシュボードのデザインを一括で設定する方法として、Power BI テーマという便利な機能があることをみなさんご存知でしょうか？<br>今回は、Power BI テーマの機能や利用方法について紹介します。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事編集時点と実際の機能に相違がある場合がございます。予めご了承ください。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><ol><li><a href="#Power-BI-%E3%81%AE%E3%83%86%E3%83%BC%E3%83%9E%E3%81%A8%E3%81%AF">Power BIのテーマとは</a></li><li><a href="#%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95">レポートテーマの設定方法</a></li><li><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%80%E3%83%83%E3%82%B7%E3%83%A5%E3%83%9C%E3%83%BC%E3%83%89%E3%83%86%E3%83%BC%E3%83%9E">カスタムダッシュボードテーマ</a></li><li><a href="#Power-BI%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E9%81%8B%E7%94%A8%E6%96%B9%E6%B3%95">Power BIテーマの運用方法</a></li><li><a href="#%E3%83%86%E3%83%BC%E3%83%9E%E3%82%AE%E3%83%A3%E3%83%A9%E3%83%AA%E3%83%BC">テーマギャラリー</a></br></li></ol><hr><h2 id="Power-BI-のテーマとは"><a href="#Power-BI-のテーマとは" class="headerlink" title="Power BI のテーマとは"></a>Power BI のテーマとは</h2><hr><p>Power BIのテーマ機能を使用すると、コンテンツの全体にデザインが適用され、すべてのビジュアルで設定されたテーマの色や文字の書式が既定値として使用されます。<br>テーマ機能は現在、レポートとダッシュボードに設定できますが、本ブログは主にレポートでのテーマ設定を中心に紹介していきます。</p><h3 id="テーマ設定のメリット"><a href="#テーマ設定のメリット" class="headerlink" title="テーマ設定のメリット"></a>テーマ設定のメリット</h3><p>・既定で選択できないフォントを使用可能になります</p><div align="left"><img src="1.png"></div><p>・既定で選択できる[テーマの色]を変更できます</p><div align="left"><img src="2.png"></div><p>・組織内で使用されるレポートのデザインを統一できます</p><p>・レポートやビジュアルのデザインを一括設定することで工数が減ります　など<br><br></p><hr><h2 id="レポートテーマの設定方法"><a href="#レポートテーマの設定方法" class="headerlink" title="レポートテーマの設定方法"></a>レポートテーマの設定方法</h2><hr><p>Power BI Desktop の レポートテーマは、[表示]リボンのテーマセクションから、以下3つの方法で設定することが可能です。<br>①    組み込み：既定のテーマがございますのでそのまま使用可能<br>②    カスタム：一般的なレポートテーマのオプションをカスタマイズ可能<br>③    JSON：カスタム設定よりさらに細かな制御が可能</p><div align="left"><img src="3.png"></div><h3 id="カスタム設定で指定可能な内容"><a href="#カスタム設定で指定可能な内容" class="headerlink" title="カスタム設定で指定可能な内容"></a>カスタム設定で指定可能な内容</h3><p>■名前と色<br>テーマの色：レポートで主に使用される色<br>センチメントの色：正、負、または中立の結果を示すために、主要業績評価指標 (KPI) のビジュアルとウォーターフォール図で使用される色<br>分岐の色：データポイントが範囲内かどうかを示すために条件付き書式設定で使用される色<br>構造色 ：ビジュアル要素の軸グリッド線、強調表示色、背景色など</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/create-reports/desktop-report-themes#set-structural-colors">Power BI Desktop でレポート テーマを使用する - Power BI | Microsoft Learn―構造色を設定する</a></p></div><p>■テキスト<br>全般（データと軸ラベルを含む各視覚エフェクト）、タイトル（各ビジュアルの主要なタイトルと軸のタイトル）、カードとKPIのコールアウト値、主要なインフルエンサービジュアルのタブヘッダーのテキストフォント、サイズ及び色を設定できます。</p><p>■ビジュアル<br>背景：背景色や透明度を設定できます。<br>罫線：色や半径を設定できます。<br>ヘッダー：各ビジュアルの上部領域の背景色、枠線やアイコンの色、透明度を設定できます。<br>ツールヒント：背景色、ラベルや値のテキストの色を設定できます。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/create-reports/desktop-custom-tooltips">Power BI Desktop でのヒントのカスタマイズ - Power BI | Microsoft Learn</a></p></div><p>■ページ<br>[壁紙]及び[ページの背景]の背景色や透明度を設定できます。</p><p>■フィルター<br>[フィルターウィンドウ]、[使用可能なフィルターカード]及び[適用されたフィルターカード]の背景色、透明度、フォントとアイコンの色やサイズを設定できます。</p><h3 id="JSONでレポートテーマを細かく制御する"><a href="#JSONでレポートテーマを細かく制御する" class="headerlink" title="JSONでレポートテーマを細かく制御する"></a>JSONでレポートテーマを細かく制御する</h3><p>カスタム設定で指定できない内容については、JSONで設定行うことで、より細かな制御を実現できます。例えば既定では選択可能なフォントが限られた数や種類しかありませんので、レポートで日本語を使用する際にフォントにこまることはありませんか。Power BIテーマを設定することで、既定のリストに存在しない日本語のフォントに簡単に変えることができます。</p><p>例えば、以下のJSONを使用することで、レポートのすべての文字フォントを”Meiryo”に指定することができます。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;CustomTheme&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;textClasses&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;callout&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;header&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;largeTitle&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;label&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;semiboldLabel&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;largeLabel&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;smallLabel&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;lightLabel&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;boldLabel&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;largeLightLabel&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;smallLightLabel&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Meiryo&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JSONの作成方法ですが、Power BI では”JSON スキーマ” に基づいてカスタムテーマが検証されます。そのため、設定可能な項目などを確認するには、テーマの設定に使用できるプロパティを”JSON スキーマ”をGitHubから取得して、ご確認いただく必要がございます。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>参考情報：<a href="https://github.com/microsoft/powerbi-desktop-samples/tree/main/Report%20Theme%20JSON%20Schema">Report Theme JSON Schema at main · microsoft/powerbi-desktop-samples · GitHub</a></p></div><p>また、”JSON スキーマ”を確認しても、実際な設定につまずくこともあるかもしれません。以下のGitHubページでは、ビジュアルごとにテーマを設定したサンプルコードを用意しておりますため、ご参照いただけますと幸いです。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>参考情報：<a href="/blog/master/README/">PowerBI-ThemeTemplates/README.md at master · MattRudy/PowerBI-ThemeTemplates · GitHub</a></p></div><p>なお、以下の公開情報に、基本なJSON構文やすぐご利用可能な例文が紹介されておりますで、必要に応じてご活用ください。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/create-reports/desktop-report-themes">Power BI Desktop でレポート テーマを使用する - Power BI | Microsoft Learn</a></p></div><hr><h2 id="カスタムダッシュボードテーマ"><a href="#カスタムダッシュボードテーマ" class="headerlink" title="カスタムダッシュボードテーマ"></a>カスタムダッシュボードテーマ</h2><hr><p>Power BIレポートに適用するテーマは、ダッシュボードにも適用することができます。 既にレポート テーマが適用されているレポートからのタイルをピン留めする場合は、現在のテーマを保持するか、ダッシュボード テーマを使用するかを選択できます。<br>以下画面ショットの通り、ダッシュボード画面から[編集]＞[ダッシュボード テーマ]から、JSONのアップロードや、カスタムテーマの設定が可能です。<br>※ダッシュボードのカスタムテーマは、レポートからピン留めされたタイルでのみ機能します。</p><div align="left"><img src="4.png"></div><div class="alert is-success"><p class="alert-title">ヒント</p><p>参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/create-reports/service-dashboard-themes">Power BI サービスのダッシュボード テーマを使用する - Power BI | Microsoft Learn</a></p></div><hr><h2 id="Power-BIテーマの運用方法"><a href="#Power-BIテーマの運用方法" class="headerlink" title="Power BIテーマの運用方法"></a>Power BIテーマの運用方法</h2><hr><p>レポートテーマを作成したあとの運用方法は、JSONファイルや、テンプレートレポートで運用する方法をご紹介します。</p><h3 id="JSONでの運用"><a href="#JSONでの運用" class="headerlink" title="JSONでの運用"></a>JSONでの運用</h3><p>JSON スキーマをもとに作成したJSONファイル、もしくはテーマのカスタマイズを行い適用したあとに、[現在のテーマを保存]を選択することで、JSONファイルとしてエクスポートして運用できます。JSONで運用する場合、すでに作成済のレポートや、ダッシュボードにも適用することも可能で、様々な場面に対応できる運用方法となっております。</p><div align="left"><img src="5.png"></div><h3 id="テンプレートレポートでの運用"><a href="#テンプレートレポートでの運用" class="headerlink" title="テンプレートレポートでの運用"></a>テンプレートレポートでの運用</h3><p>一方、JSON運用を行う場合は、ユーザーに参照する手順の説明が必要など、運用が難しい場合は、Power BIのテンプレートレポートでの運用もございます。<br>以下画面ショットのとおり、レポートをテンプレートレポート(.pbitファイル)としてエクスポートすることが可能です。エクスポートされた.pbitファイルは、データやクエリの定義や、ビジュアルやテーマの定義が含まれますが、データは含まれず、手軽に共有できるサイズになります。.pbitファイルをユーザーに共有して運用をすることで、ユーザーは、設定されているテーマをベースにレポートを作成できますので、レポートにJSONを適用する手間はありません。</p><div align="left"><img src="6.png"></div><div class="alert is-success"><p class="alert-title">ヒント</p><p>参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/create-reports/desktop-report-themes#setting-structural-colors">Power BI Desktop でレポート テーマを使用する - Power BI | Microsoft Learn</a></p></div><hr><h2 id="テーマギャラリー"><a href="#テーマギャラリー" class="headerlink" title="テーマギャラリー"></a>テーマギャラリー</h2><hr><p>Power BI コミュニティサイトは、世界中にいるさまざまなPower BIのエンジニアや有識者にて運営されており、お互いにPower BIの課題を解決し合う場となっております。<br>そのコミュニティサイトに、ユーザーの皆様がご作成、ご共有いただきましたPower BIが、テーマギャラリーでシェアされています、レポートのデザインを行う際にご参照いただけますと幸いでございます。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>参考情報：<a href="https://community.powerbi.com/t5/Themes-Gallery/bd-p/ThemesGallery">Themes Gallery - Microsoft Power BI Community</a></p></div><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの呂です。&lt;br&gt;レポートやダッシュボードのデザインを一括で設定する方法として、Power BI テーマという便利な機能があることをみなさんご存知でしょうか？&lt;br&gt;今回は、Power BI テーマの機能や利用方法について紹介します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="Power BI テーマ" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-%E3%83%86%E3%83%BC%E3%83%9E/"/>
    
    <category term="Power BI デザイン" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>Power BI のアップデート情報について</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_feature_roadmap/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_feature_roadmap/</id>
    <published>2023-01-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.228Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの山崎です。<br>Power BI では、Power BI Desktop、Power BI サービス、Power BI 用モバイル アプリ、オンプレミス データ ゲートウェイを定期的に更新しており、基本的には毎月 1 回メジャー アップデートが行われ、月によってはその後マイナー アップデートがリリースされることがあります。 </p><p>アップデートでは、既知の問題の修正や機能追加が行われますが、公開ドキュメントではどのような情報が開示されているのか、また、それらの情報をどこから確認できるか気になったことはありませんか？</p><p>本ブログでは、Power BI のアップデート履歴やプレビュー機能のロードマップなど、レポート開発ご担当者様から組織の IT 管理者様まで、すべての Power BI ユーザー様にとって役に立つ情報を網羅してご案内いたします。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="メジャー-アップデートについて"><a href="#メジャー-アップデートについて" class="headerlink" title="メジャー アップデートについて"></a>メジャー アップデートについて</h2><p>冒頭でもご案内した通り、Power BI Desktop 、Power BI サービス、Power BI 用モバイル アプリ、オンプレミス データ ゲートウェイは月 1 回程度の頻度でメジャーなアップデートが行われ、それぞれ以下サイトよりアップデート情報をご確認いただけます。<br>なお、各公開情報において共通の<font color="DeepPink">ご注意事項</font>がありますので、以下をご理解いただいた上で読み進めていただきますようお願いいたします。</p><p><font color="DeepPink">＝ ご注意事項 ＝</font></p><p>・既知の問題の修正履歴やセキュリティ更新に関する情報は公開しておりません。<br>・弊社では最新版のアプリの使用を推奨していることからも、過去バージョンで発生していた問題については、最新バージョンにアップデートすることで事象が解消するかお試しいただきますようお願いいたします。<br>・Microsoft の Power BI に関する公式ドキュメントは、はじめに英語版のドキュメントが作成され、そのドキュメントを翻訳し、日本語等各言語の公開情報が作成される流れとなっております。このため、タイミングによっては日本語ドキュメントの更新が遅れる場合やドキュメント内のリンクが正しくない場合がございます。<br> ※ 英語版ドキュメントは、URLの”ja-jp”の箇所を”en-us”に変更することでアクセスいただけます。<br>・プレビュー機能は、今後予告なしに機能が削除される、または動作変更が発生する可能性のある機能となりますことをあらかじめご了承くださいますようお願いいたします。</p><p><font color="DeepPink">＝＝＝＝＝＝＝＝</font></p><h3 id="Power-BI-Desktop-・-Power-BI-サービス"><a href="#Power-BI-Desktop-・-Power-BI-サービス" class="headerlink" title="Power BI Desktop ・ Power BI サービス"></a><strong>Power BI Desktop ・ Power BI サービス</strong></h3><p><a href="https://learn.microsoft.com/ja-jp/power-bi/fundamentals/desktop-latest-update?tabs=powerbi-service">Power BI の新機能</a><br>Power BI Desktop と Power BI サービスに対する最新の更新情報について説明しています。<br>新しい機能や大きな変更点について、一部の機能についてはブログ、ビデオ (公式 Youtube)、記事 (公式ドキュメント) が用意されており、各リンクも案内しています。</p><p><a href="https://learn.microsoft.com/ja-jp/power-bi/fundamentals/desktop-latest-update-archive?tabs=powerbi-service">Power BI Desktop と Power BI サービスに対する過去の月次更新</a><br>Power BI Desktop と Power BI サービスに対する前月以前の更新情報についてのアーカイブとなります。<br>なお、過去数か月前までの Power BI Desktop のダウンロードが可能ですが、リンクがないものについてはすでに提供が終了されており、サポート対象外となります。　</p><p><a href="https://powerbi.microsoft.com/ja-jp/blog/power-bi-december-2022-feature-summary/">Power BI Month yyyy Feature Summary</a><br>Power BI チームの公式ブログです。<br>[Power BI Month yyyy Feature Summary] という命名規則のタイトルにて、その月の更新について機能ごとに詳細を案内しています。<br>※上記リンクは本ブログが公開された 2023 年 1 月時点での最新情報のリンク (Power BI December 2022 Feature Summary) となります。</p><p><a href="https://www.youtube.com/@MicrosoftPowerBI">Power BI Update - Month yyyy</a><br>Power B Iの公式 Youtube チャンネルです。<br>[Power BI Month yyyy] という命名規則のタイトルにて、その月の更新について機能ごとに詳細を案内しています。 </p><br><h3 id="Power-BI-用モバイル-アプリ"><a href="#Power-BI-用モバイル-アプリ" class="headerlink" title="Power BI 用モバイル アプリ"></a><strong>Power BI 用モバイル アプリ</strong></h3><p><a href="https://learn.microsoft.com/ja-jp/power-bi/consumer/mobile/mobile-whats-new-in-the-mobile-apps">Power BI 用モバイル アプリの新機能</a><br>過去バージョン～最新バージョンでリリースされた新機能について説明しています。</p><p><a href="https://powerbi.microsoft.com/ja-jp/blog/tag/mobile/">モバイル アプリ向けの Power BI チームのブログ</a><br>Mobile というタグがつけられたPower BI 用モバイル アプリに関する投稿がまとめられています。</p><br><h3 id="オンプレミス-データ-ゲートウェイ"><a href="#オンプレミス-データ-ゲートウェイ" class="headerlink" title="オンプレミス データ ゲートウェイ"></a><strong>オンプレミス データ ゲートウェイ</strong></h3><p><a href="https://learn.microsoft.com/ja-jp/data-integration/gateway/service-gateway-monthly-updates">これまでのオンプレミス データ ゲートウェイの月次更新</a><br>オンプレミス データ ゲートウェイの最新の 6 つの更新について説明しています。<br>アプリのダウンロードもこちらのサイトから可能です。</p><p><a href="https://powerbi.microsoft.com/ja-jp/blog/on-premises-data-gateway-december-release/">On-premises data gateway Month release</a><br>Power BI チームの公式ブログです。<br>[On-premises data gateway Month release] という命名規則のタイトルにて、その月の更新について機能ごとに詳細を案内しています。</p><p>※上記リンクは本ブログが公開された 2023 年 1 月時点での最新情報のリンク (On-premises data gateway December release) となります。</p><br><h2 id="新機能と予定されている機能について"><a href="#新機能と予定されている機能について" class="headerlink" title="新機能と予定されている機能について"></a>新機能と予定されている機能について</h2><p>Power BI では、プレビュー機能としてリリースされ、のちにGA （一般提供） に切り替わる機能があります。<br>現時点でプレビュー機能としてリリースされている機能やすでにGAされた機能については、以下サイトからご確認いただけます。</p><p><a href="https://community.powerbi.com/t5/Data-Stories-Gallery/Power-BI-Release-Plan/m-p/930557">Power BI Release Plan</a><br>コミュニティで公開されているレポートとなります。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform-release-plan/2022wave2/power-bi/planned-features">Power BI の新機能と予定されている機能</a><br>2022 年 10 月から 2023 年 3 月まで(2022　Wave2と呼ばれます。) のリリースで予定されている機能の一覧を示します。</p><p><a href="https://learn.microsoft.com/ja-jp/power-bi/connect-data/service-connect-to-power-bi-release-plan">Power BI リリース計画レポートに接続する</a><br>上記のPower BI リリース計画の情報については、Power BI サービス上でテンプレート アプリから確認することも可能です。<br>詳細な手順をこちらで案内しています。</p><div align="left"><img src="1.png"></div></p><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの山崎です。&lt;br&gt;Power BI では、Power BI Desktop、Power BI サービス、Power BI 用モバイル アプリ、オンプレミス データ ゲートウェイを定期的に更新しており、基本的には毎月 1 回メジャー アップデートが行われ、月によってはその後マイナー アップデートがリリースされることがあります。 &lt;/p&gt;
&lt;p&gt;アップデートでは、既知の問題の修正や機能追加が行われますが、公開ドキュメントではどのような情報が開示されているのか、また、それらの情報をどこから確認できるか気になったことはありませんか？&lt;/p&gt;
&lt;p&gt;本ブログでは、Power BI のアップデート履歴やプレビュー機能のロードマップなど、レポート開発ご担当者様から組織の IT 管理者様まで、すべての Power BI ユーザー様にとって役に立つ情報を網羅してご案内いたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI　　" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="Power BI サービス" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9/"/>
    
    <category term="Power BI Desktop" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-Desktop/"/>
    
    <category term="Power BI モバイル" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-%E3%83%A2%E3%83%90%E3%82%A4%E3%83%AB/"/>
    
    <category term="オンプレミス データ ゲートウェイ" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%AA%E3%83%B3%E3%83%97%E3%83%AC%E3%83%9F%E3%82%B9-%E3%83%87%E3%83%BC%E3%82%BF-%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4/"/>
    
    <category term="リリースプラン" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%97%E3%83%A9%E3%83%B3/"/>
    
    <category term="更新情報" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E6%9B%B4%E6%96%B0%E6%83%85%E5%A0%B1/"/>
    
    <category term="アップデート" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88/"/>
    
    <category term="新機能" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E6%96%B0%E6%A9%9F%E8%83%BD/"/>
    
    <category term="Feature" scheme="https://jpbap-sqlbi.github.io/blog/tags/Feature/"/>
    
    <category term="ロードマップ" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%AD%E3%83%BC%E3%83%89%E3%83%9E%E3%83%83%E3%83%97/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform管理センターからオンプレミス データ ゲートウェイのインストールの制御方法</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_gateway_Installation_control/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_gateway_Installation_control/</id>
    <published>2023-01-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.244Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームのファムです。</p><p>本ブログでは、Power Platform管理センターから組織内のユーザーに対してオンプレミス データ ゲートウェイのインストールを制御する手順をご紹介します。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事編集時点と実際の機能に相違がある場合がございます。予めご了承ください。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p><p></br></p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><ol><li><a href="#%E3%82%AA%E3%83%B3%E3%83%97%E3%83%AC%E3%83%9F%E3%82%B9-%E3%83%87%E3%83%BC%E3%82%BF-%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4%E3%81%A8%E3%81%AF">オンプレミス データ ゲートウェイとは</a></li><li><a href="#Power-Platform-%E7%AE%A1%E7%90%86%E3%82%BB%E3%83%B3%E3%82%BF%E3%83%BC%E3%81%8B%E3%82%89%E3%82%AA%E3%83%B3%E3%83%97%E3%83%AC%E3%83%9F%E3%82%B9-%E3%83%87%E3%83%BC%E3%82%BF-%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%AE%E5%88%B6%E5%BE%A1%E6%89%8B%E9%A0%86">Power Platform 管理センターからオンプレミス データ ゲートウェイのインストールの制御手順</a></li><li><a href="#%E3%82%AA%E3%83%B3%E3%83%97%E3%83%AC%E3%83%9F%E3%82%B9-%E3%83%87%E3%83%BC%E3%82%BF-%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%A7%E3%81%8D%E3%82%8B%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%8C%99%E5%8B%95">オンプレミス データ ゲートウェイをインストールできるユーザーの場合の挙動</a></li><li><a href="#%E3%82%AA%E3%83%B3%E3%83%97%E3%83%AC%E3%83%9F%E3%82%B9-%E3%83%87%E3%83%BC%E3%82%BF-%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%8C%99%E5%8B%95">オンプレミス データ ゲートウェイをインストールできないユーザーの場合の挙動</a></li><li><a href="#%E3%82%AA%E3%83%B3%E3%83%97%E3%83%AC%E3%83%9F%E3%82%B9-%E3%83%87%E3%83%BC%E3%82%BF-%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4-%E5%80%8B%E4%BA%BA%E7%94%A8%E3%83%A2%E3%83%BC%E3%83%89-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E5%88%B6%E5%BE%A1%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">オンプレミス データ ゲートウェイ (個人用モード)のインストール制御について</a></br></li></ol><hr><h2 id="オンプレミス-データ-ゲートウェイとは"><a href="#オンプレミス-データ-ゲートウェイとは" class="headerlink" title="オンプレミス データ ゲートウェイとは"></a>オンプレミス データ ゲートウェイとは</h2><hr><p>Power BI サービス上のレポートを最新データに更新するためには、データセットとデータソースを接続する必要がありますが、データソースがオンプレミス環境にある場合は、オンプレミス データゲートウェイが必要です。</p><p>オンプレミス データ ゲートウェイとは、オンプレミス環境のデータとPower BIサービス間においてセキュリティで保護されたデータ転送を行うための「ブリッジ」です。オンプレミス データ ゲートウェイのイメージは、以下のPower BI構成の概要図をご参考ください。</p><div align="center"><img src="image1.png"></div><p> <strong>参考情報：</strong><br> <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/wp-onpremises-gateway">オンプレミス ゲートウェイについて</a></p><hr><h2 id="Power-Platform-管理センターからオンプレミス-データ-ゲートウェイのインストールの制御手順"><a href="#Power-Platform-管理センターからオンプレミス-データ-ゲートウェイのインストールの制御手順" class="headerlink" title="Power Platform 管理センターからオンプレミス データ ゲートウェイのインストールの制御手順"></a>Power Platform 管理センターからオンプレミス データ ゲートウェイのインストールの制御手順</h2><hr><p><a href="https://admin.powerplatform.microsoft.com/">Microsoft Power Platform 管理センター</a>にサインインします。「<strong>データ（プレビュー）</strong>」  ＞ 「<strong>オンプレミス データ ゲートウェイ</strong>」　＞　「<strong>ゲートウェイのテナント管理</strong>」にオンを設定し、　「<strong>ゲートウェイのインストール担当者の管理</strong>」をクリックします。</p><div align="center"><img src="image2.png"></div><p><strong>・ユーザーを追加する場合</strong><br>「<strong>ゲートウェイのインストール担当者の管理</strong>」画面から、ゲートウェイをインストールさせたいユーザーを追加します。追加されているユーザーは、「<strong>現在のゲートウェイ インストーラー</strong>」の一覧から確認できます。こちらの一覧に表示されているユーザーは、ゲートウェイをインストール可能であり、この一覧に表示されていないユーザーはゲートウェイをインストールできないようになります。<br></br></p><div align="center"><img src="image3.png"></div><p><strong>・ユーザーを削除する場合</strong><br>追加したユーザーに対して、オンプレミス データ ゲートウェイをインストールさせたくない場合は、「<strong>現在のゲートウェイ インストーラー</strong>」の一覧から「<strong>×</strong>」をクリックし、削除します。</p><div align="center"><img src="image4.png"></div><hr><h2 id="オンプレミス-データ-ゲートウェイをインストールできるユーザーの場合の挙動"><a href="#オンプレミス-データ-ゲートウェイをインストールできるユーザーの場合の挙動" class="headerlink" title="オンプレミス データ ゲートウェイをインストールできるユーザーの場合の挙動"></a>オンプレミス データ ゲートウェイをインストールできるユーザーの場合の挙動</h2><hr><p>オンプレミス データ ゲートウェイをインストールできるユーザーは、オンプレミス データ ゲートウェイからサインインを試みると、以下のように正常にサインインできます。また、構成しているゲートウェイをご確認できます。</p><div align="center"><img src="image5.png"></div><hr><h2 id="オンプレミス-データ-ゲートウェイをインストールできないユーザーの場合の挙動"><a href="#オンプレミス-データ-ゲートウェイをインストールできないユーザーの場合の挙動" class="headerlink" title="オンプレミス データ ゲートウェイをインストールできないユーザーの場合の挙動"></a>オンプレミス データ ゲートウェイをインストールできないユーザーの場合の挙動</h2><hr><p>オンプレミス データ ゲートウェイをインストールできないユーザーは、オンプレミス データ ゲートウェイからサインインを試みると、エラーメッセージ「<strong>インストールに失敗しました。オンプレミス データ ゲートウェイをインストールできるユーザーが組織により制限されています。サービス管理者またはテナント管理者にお問い合わせください。</strong>」が表示されます。<br>こちらのエラーメッセージが表示されるユーザーが、オンプレミス データ ゲートウェイをインストールできるようにしたい場合は、管理者ロールのユーザーからPower Platform管理センターでゲートウェイのインストール担当者として追加してもらう必要があります。</p><div align="center"><img src="image6.png"></div><div align="center"><img src="image7.png"></div></br><hr><h2 id="オンプレミス-データ-ゲートウェイ-個人用モード-のインストール制御について"><a href="#オンプレミス-データ-ゲートウェイ-個人用モード-のインストール制御について" class="headerlink" title="オンプレミス データ ゲートウェイ (個人用モード) のインストール制御について"></a>オンプレミス データ ゲートウェイ (個人用モード) のインストール制御について</h2><hr><p>オンプレミス データ ゲートウェイには、Power BI でのみ機能するオンプレミス データ ゲートウェイ (個人用モード) (以下、個人用ゲートウェイと表記します) という異なる種類のゲートウェイがあります。<br>名前の通り自分専用のゲートウェイとして、ローカルコンピューターに配置し、ローカルのデータソースとの接続・データセットの更新に使用されるゲートウェイです。</p><blockquote><p>[参考情報]<br><a href="https://learn.microsoft.com/ja-jp/power-bi/connect-data/service-gateway-personal-mode">Power BI で個人用ゲートウェイを使用する</a></p></blockquote></br><p>Power Platform 管理センターや Power BI サービスの [接続とゲートウェイの管理] 画面からは、個人用ゲートウェイのインストール制御は行なえません。<br>しかし、テナント内すべてのゲートウェイに対して管理コマンドの実行が可能な<strong>オンプレミス データ ゲートウェイ管理用の PowerShell コマンドレット</strong>を使用することで、個人用ゲートウェイに対してもインストールの制御・ユーザーの追加などが可能になります。</p><p>このセクションでは、個人用ゲートウェイのインストールを制御し、特定のユーザーのみにインストール権限を付与する手順について説明いたします。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>・ オンプレミス データ ゲートウェイ管理用の PowerShell コマンドレットは、パブリックプレビューの機能となります。</p><p>・ また、オンプレミス データ ゲートウェイ管理用の PowerShell コマンドレットでインストール制御を行なうためには、テナント管理者 (Power BI 管理者またはPower Platform 管理者、グローバル管理者) 権限を持っている必要があります。</p></div></br><h3 id="個人用ゲートウェイの制御手順"><a href="#個人用ゲートウェイの制御手順" class="headerlink" title="個人用ゲートウェイの制御手順"></a>個人用ゲートウェイの制御手順</h3><h4 id="1-オンプレミス-データ-ゲートウェイ管理用の-PowerShell-コマンドレットをインストール"><a href="#1-オンプレミス-データ-ゲートウェイ管理用の-PowerShell-コマンドレットをインストール" class="headerlink" title="1. オンプレミス データ ゲートウェイ管理用の PowerShell コマンドレットをインストール"></a>1. オンプレミス データ ゲートウェイ管理用の PowerShell コマンドレットをインストール</h4><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> DataGateway</span><br></pre></td></tr></table></figure><div class="alert is-success"><p class="alert-title">ヒント</p><p><code>DataGateway</code> コマンドレットを使用するためには、Windows OS 標準の Windows PowerShell とは別に Powershell 6.2.2 以降のバージョンが必要です。</p><p>PowerShell は以下 Github からダウンロード可能です。</p><p><a href="https://github.com/PowerShell/PowerShell">Github - PowerShell</a></p></div></br><h4 id="2-テナント管理者のアカウントでデータ-ゲートウェイ-サービスに接続"><a href="#2-テナント管理者のアカウントでデータ-ゲートウェイ-サービスに接続" class="headerlink" title="2. テナント管理者のアカウントでデータ ゲートウェイ サービスに接続"></a>2. テナント管理者のアカウントでデータ ゲートウェイ サービスに接続</h4><p>ブラウザで認証画面が表示されますので、テナント管理者のアカウントで接続をお試しください。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Connect-DataGatewayServiceAccount</span></span><br></pre></td></tr></table></figure></br><h4 id="3-テナントのゲートウェイインストールの制御状態を確認"><a href="#3-テナントのゲートウェイインストールの制御状態を確認" class="headerlink" title="3. テナントのゲートウェイインストールの制御状態を確認"></a>3. テナントのゲートウェイインストールの制御状態を確認</h4><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-DataGatewayTenantPolicy</span></span><br></pre></td></tr></table></figure><p>通常のオンプレミス データ ゲートウェイのみがインストール制御されている場合、<code>Policy</code> が <code>EnterpriseInstallRestricted</code> という状態である結果が得られます。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#実行結果</span></span><br><span class="line">TenantObjectId                                            Policy</span><br><span class="line">--------------                                            ------</span><br><span class="line"><span class="number">12345678</span><span class="literal">-xxxx</span><span class="literal">-xxxx</span><span class="literal">-xxxx</span><span class="literal">-8ce9ff2d5099</span> EnterpriseInstallRestricted</span><br></pre></td></tr></table></figure></br><h4 id="4-個人用ゲートウェイのインストール制御を追加"><a href="#4-個人用ゲートウェイのインストール制御を追加" class="headerlink" title="4. 個人用ゲートウェイのインストール制御を追加"></a>4. 個人用ゲートウェイのインストール制御を追加</h4><p>ゲートウェイのインストールポリシーを設定する <code>Set-DataGatewayTenantPolicy</code> コマンドを実行します。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-DataGatewayTenantPolicy</span> <span class="literal">-PersonalGatewayInstallPolicy</span> Restricted</span><br><span class="line"><span class="built_in">Get-DataGatewayTenantPolicy</span></span><br></pre></td></tr></table></figure><p><code>Policy</code> に <code>PersonalInstallRestricted</code> が追加され、個人用ゲートウェイのインストールも制御された状態となりました。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#実行結果</span></span><br><span class="line">TenantObjectId                                                                       Policy</span><br><span class="line">--------------                                                                       ------</span><br><span class="line"><span class="number">12345678</span><span class="literal">-xxxx</span><span class="literal">-xxxx</span><span class="literal">-xxxx</span><span class="literal">-8ce9ff2d5099</span> PersonalInstallRestricted, EnterpriseInstallRestricted</span><br></pre></td></tr></table></figure></br><p>実際に、個人用ゲートウェイをインストールしようとすると以下の画面のように、インストールが制限されている旨が表示されます。</p><div align="center"><img src="image8.png"></div></br><h4 id="5-ユーザーごとに制御"><a href="#5-ユーザーごとに制御" class="headerlink" title="5. ユーザーごとに制御"></a>5. ユーザーごとに制御</h4><p>一部のユーザーにのみインストールを許可させたい場合、続けて本手順も実施します。<br>まずは許可させたいユーザーの <code>ObjectId</code> を取得します。<br><code>ObjectId</code> は Azure Active Directry のユーザー情報から確認できる他、Az PowerShell モジュールの <code>Get-AzADUser</code> コマンドで取得することも可能です。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>Az PowerShell モジュールの詳細については以下公開情報をご覧ください。</p><p><a href="https://learn.microsoft.com/ja-jp/powershell/azure/install-az-ps">Azure Az PowerShell モジュールをインストールする</a></p></div></br><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Connect-AzAccount</span></span><br><span class="line"><span class="variable">$user1</span> = <span class="variable">$</span>(<span class="built_in">Get-AzADUser</span> <span class="literal">-ObjectId</span> <span class="string">&quot;user1@contoso.onmicrosoft.com&quot;</span>).Id</span><br></pre></td></tr></table></figure></br><div align="center"><img src="image9.png"></div></br><p>取得した <code>ObjectId</code> を <code>Set-DataGatewayInstaller</code> コマンドでインストールを許可するユーザーとして追加します。<br>このとき <code>GatewayType</code> パラメーターを <code>Personal</code> とすることで、個人用ゲートウェイを対象にすることができます。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-DataGatewayInstaller</span> <span class="literal">-PrincipalObjectIds</span> <span class="variable">$user1</span> <span class="literal">-Operation</span> Add <span class="literal">-GatewayType</span> Personal</span><br><span class="line"><span class="built_in">Get-DatagatewayInstaller</span></span><br></pre></td></tr></table></figure><p>以下のように、<code>ObjectId</code> に対して <code>Personal</code> の <code>GatewayType</code> が付与されていれば、許可された状態となります。</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#実行結果</span></span><br><span class="line">PrincipalObjectId                    GatewayType</span><br><span class="line">-----------------                    -----------</span><br><span class="line"><span class="number">12345678</span><span class="literal">-xxxx</span><span class="literal">-xxxx</span><span class="literal">-xxxx</span><span class="literal">-571d358d8e63</span> Personal</span><br></pre></td></tr></table></figure></br><blockquote><p>[参考情報]<br><a href="https://learn.microsoft.com/ja-jp/powershell/gateway/overview?view=datagateway-ps">オンプレミス データ ゲートウェイ管理用の PowerShell コマンドレット (パブリック プレビュー)</a></p></blockquote></br><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームのファムです。&lt;/p&gt;
&lt;p&gt;本ブログでは、Power Platform管理センターから組織内のユーザーに対してオンプレミス データ ゲートウェイのインストールを制御する手順をご紹介します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="Admin" scheme="https://jpbap-sqlbi.github.io/blog/tags/Admin/"/>
    
    <category term="オンプレミスデータゲートウェイ" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%AA%E3%83%B3%E3%83%97%E3%83%AC%E3%83%9F%E3%82%B9%E3%83%87%E3%83%BC%E3%82%BF%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4/"/>
    
  </entry>
  
  <entry>
    <title>Power BI のマップビジュアルで地名が正常に認識されない場合</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_map_areaname/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_map_areaname/</id>
    <published>2023-01-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.280Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チーム 丸山です。</p><p>Power BI のマップビジュアルは、地名ごとに集計された数値をマップ上に自動でバブル表示できるとても便利なビジュアルですが、データソースの地名の持ち方によっては地名が正常に認識されず、マップ上に結果が表示されないことがあります。<br>今回はこの問題が起きたときの原因と対応策についてご紹介します。</p><span id="more"></span><div align="center"><img src="image1.png"></div><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><ol><li><a href="#%E3%83%9E%E3%83%83%E3%83%97%E3%83%93%E3%82%B8%E3%83%A5%E3%82%A2%E3%83%AB%E3%81%A7%E5%9C%B0%E5%90%8D%E3%81%8C%E6%AD%A3%E5%B8%B8%E3%81%AB%E8%AA%8D%E8%AD%98%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84%E5%8E%9F%E5%9B%A0">マップビジュアルで地名が正常に認識されない原因</a></li><li><a href="#%E5%AF%BE%E5%BF%9C%E7%AD%96">対応策</a></li></ol><hr><h2 id="マップビジュアルで地名が正常に認識されない原因"><a href="#マップビジュアルで地名が正常に認識されない原因" class="headerlink" title="マップビジュアルで地名が正常に認識されない原因"></a>マップビジュアルで地名が正常に認識されない原因</h2><hr><p>Power BI のマップビジュアルは Bing Maps（ <a href="https://www.bing.com/maps/">https://www.bing.com/maps/</a> ）を使用しているため、Bing Maps上の地名に基づいてビジュアルが表示されます。このため、データソースの地名が Bing Maps 上の地名と相違する文字列である場合、マップビジュアルで認識することができず該当地域に集計結果が表示されません。</p><p>例えばアメリカは、Bing Maps 上では「アメリカ合衆国」ですが、データソース側で「アメリカ」という文字列でデータを持っている場合は、マップビジュアルのアメリカの欄に集計結果が表示されないという問題が起きます。つまり、Bing Maps 上の表記とデータソースの国名データ表記が一致していないことが原因となります。</p><div align="center"><img src="image1.png"></div><hr><h2 id="対応策"><a href="#対応策" class="headerlink" title="対応策"></a>対応策</h2><hr><p>対応策としては、データ側の地名を Bing Maps の表記に合わせるということになります。<br>上述 ”アメリカ” の例では、Bing Maps の表記 ”アメリカ合衆国” に合わせることで正常に地図に表示されます。</p><p>なお、地名の正式名称や定義などは時勢に応じて都度変わることから、一覧情報としてのご提供はご用意がないため、もしマップビジュアルで正しく認識されていない地名がある場合、Bing Maps（ <a href="https://www.bing.com/maps/">https://www.bing.com/maps/</a> ）で表記をチェックしてください。</p><div align="center"><img src="image2.png"></div> データ側の地名を変更する方法については、データソース自体で地名を変更する他に、データ取得の際に Power Query でデータ変換をすることも可能です。この方法であれば、データソースのデータはそのままであるため、業務影響や対応負荷は最小限にできる可能性があります。以下に具体的な手順をご案内いたします。<p>１．Power BI Desktop から Power Query エディターを開く</p><p>ホーム &gt; データの変換</p><div align="center"><img src="image3.png"></div><p>２．該当の列で右クリック &gt; 値の置換 &gt; 任意の地名を入力 &gt; OK</p><div align="center"><img src="image4.png"></div><p>３．データが置換されたことを確認</p><div align="center"><img src="image5.png"></div><p>４．Power Query エディターを閉じて適用する</p><div align="center"><img src="image6.png"></div><p>下記図のように、無事にマップビジュアルに「「アメリカ合衆国」でバブルの表示がされるようになりました。</p><div align="center"><img src="image7.png"></div><div class="alert is-info"><p class="alert-title">Note</p><p>// 参考情報：<a href="https://support.microsoft.com/ja-jp/office/%E5%80%A4%E3%81%AE%E7%BD%AE%E6%8F%9B-power-query-28256517-f1e9-4dc3-832f-45786e9cf721">値の置換 (Power Query) - Microsoft サポート</a></p></div><p>また補足ではございますが、よりマップビジュアルの精度を上げたいという場合は、<br>地名ではなく緯度経度の情報もご利用をご検討いただけますと幸いでございます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>// 参考情報：<a href="https://learn.microsoft.com/ja-jp/power-bi/visuals/power-bi-map-tips-and-tricks#in-power-bi-tips-to-get-better-results-when-using-map-visualizations">Power BI マップの視覚エフェクトに関するヒントとテクニック</a></p><p> <div align="center"></p><p> <img src="image8.png"></p><p> </div></p></div></br><blockquote><p><strong>本ブログの関連記事</strong></p><ul><li><a href="../pbi_map_visual/">Power BIのマップビジュアル</a></li></ul></blockquote></br><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チーム 丸山です。&lt;/p&gt;
&lt;p&gt;Power BI のマップビジュアルは、地名ごとに集計された数値をマップ上に自動でバブル表示できるとても便利なビジュアルですが、データソースの地名の持ち方によっては地名が正常に認識されず、マップ上に結果が表示されないことがあります。&lt;br&gt;今回はこの問題が起きたときの原因と対応策についてご紹介します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="Power BI Desktop" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI-Desktop/"/>
    
    <category term="マップビジュアル" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%9E%E3%83%83%E3%83%97%E3%83%93%E3%82%B8%E3%83%A5%E3%82%A2%E3%83%AB/"/>
    
    <category term="地図" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E5%9C%B0%E5%9B%B3/"/>
    
    <category term="地理データ" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E5%9C%B0%E7%90%86%E3%83%87%E3%83%BC%E3%82%BF/"/>
    
    <category term="Azure Map" scheme="https://jpbap-sqlbi.github.io/blog/tags/Azure-Map/"/>
    
    <category term="Bing Map" scheme="https://jpbap-sqlbi.github.io/blog/tags/Bing-Map/"/>
    
    <category term="ArcGIS Map" scheme="https://jpbap-sqlbi.github.io/blog/tags/ArcGIS-Map/"/>
    
  </entry>
  
  <entry>
    <title>Power BI のリアルタイム分析</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_realtime_analytics/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_realtime_analytics/</id>
    <published>2023-01-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.588Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの山本です。<br>Power BI では、様々なタイプのデータセットを作成することができますが、その中でもデータを即時に集約・可視化することに特化したリアルタイム データセットという種類があります。</p><p>今回はリアルタイム データセットとはどのようなもので、どのように扱うことができるか、紹介していきます。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、　　</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><hr><ol><li><a href="#%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%A8%E3%81%AF">リアルタイム データセットとは</a></li><li><a href="#%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86">リアルタイム データセットを作ってみよう</a></li></ol><hr><h2 id="リアルタイム-データセットとは"><a href="#リアルタイム-データセットとは" class="headerlink" title="リアルタイム データセットとは"></a>リアルタイム データセットとは</h2><hr><p>リアルタイム データセットとは、Power BI サービスで作成できるデータセットの種類であり、データソースからプッシュされたデータを、ダッシュボードを通じてリアルタイムに表示することができるデータセットです。</p><div class="alert is-success"><p class="alert-title">ヒント</p><p>リアルタイム データセットは Power BI サービスでのみ作成でき、Power BI Desktop では作成できません。</p><p>またリアルタイム データセットは、マイワークスペースや共有ワークスペースどちらでも作成することができ、通常のデータセットと同じライセンスモデルでご利用いただけます。</p></div></br><p>リアルタイム データセットには「プッシュ データセット」、「ストリーミング データセット」、「PubNub ストリーミング データセット」の３つの種類区分があります。</p><ul><li>プッシュ データセット<br>リアルタイム データセットにおいて、データを保管するデータベースを保持するデータセットであり、過去のデータを履歴として蓄積することが可能です。</li><li>ストリーミング データセット<br>入力されたデータを保存できるデータベースが存在しませんが、データをデータベースに入力したりデータベースから読み取ったりする必要がないため、リアルタイムデータを素早く表示することに特化しています。</li><li>PubNub ストリーミング データセット<br>PubNub SDK を使用して、既存の PubNub データ ストリームからデータを読み込むことができるストリーミング データセットです。<br>PubNub データストリームに直接接続し、データを可視化するため、Power BI にデータは保存されません。</li></ul><p>さらにデータセットを作成する際に [履歴データの解析] を有効にすることで、プッシュ データセットとストリーミング データセット両方の機能を持つ プッシュ ストリーミング データセットを作成することが可能です。</p><div align="center"><img src="0.png"></div></br><ul><li>プッシュ ストリーミング データセット<br>これは、プッシュデータセットとしての履歴保持のメリットを持ちつつ、送信されるデータサイズが 15KB 以内の場合、ストリーミング データセットと同様にダッシュボードでのリアルタイム表示が可能という特徴があります。</li></ul><p>以下にそれぞれのデータセットの特徴をまとめました。</p></br><table><thead><tr><th></th><th>プッシュ データセット</th><th>ストリーミング データセット</th><th>プッシュ ストリーミング データセット</th><th>PubNub ストリーミング データセット</th></tr></thead><tbody><tr><td>データの保存性</td><td>保持</td><td>1時間の一時キャッシュ</td><td>保持</td><td>非保持 (PubNub から読み込み)</td></tr><tr><td>表示方法</td><td>レポート (ダッシュボードにピン止めも可)</td><td>ダッシュボードタイル (カスタム ストリーミング データとして接続)</td><td>レポート・ダッシュボードタイル (カスタム ストリーミング データとして接続)</td><td>ダッシュボードタイル (カスタム ストリーミング データとして接続)</td></tr><tr><td>表示速度</td><td>〇</td><td>◎</td><td>◎</td><td>◎</td></tr><tr><td>ダッシュボード タイルの更新</td><td>通常更新</td><td>リアルタイム更新</td><td>送信データサイズが 15KB 以内の場合、ダッシュボードのカスタム ストリーミング データとしてリアルタイム更新</td><td>リアルタイム更新</td></tr><tr><td>送信データサイズの上限</td><td>16MB/送信</td><td>15KB/送信</td><td>16MB/送信</td><td>PubNub 側に依存</td></tr><tr><td>スループットの上限</td><td>100万行/時間当たり</td><td>なし</td><td>なし(送信データサイズが 15KB を超過する場合、100万行/時間当たり)</td><td>PubNub 側に依存</td></tr></tbody></table><div class="alert is-success"><p class="alert-title">ヒント</p><p>プッシュ データセットやプッシュ ストリーミング データセットで、レポートのライブページをダッシュボードにピン止めする場合、リアルタイムにデータは反映されず、一定秒数待つかレポート側での更新を確認する必要があります。</p><p>リアルタイム表示が必要な場合、ビジュアル自体のピン止めをご検討ください。</p></div></br><hr><h2 id="リアルタイム-データセットを作ってみよう"><a href="#リアルタイム-データセットを作ってみよう" class="headerlink" title="リアルタイム データセットを作ってみよう"></a>リアルタイム データセットを作ってみよう</h2><hr><p>リアルタイム データセットは、その特性上、温度や湿度などの環境データや工場のセンサーデータなど、常に測定できるデータを収集し、可視化することに向いていますが、手動でのデータ追加や Power Automate を使用してデータを送信したりすることも可能です。</p><p>今回はストリーミング データセットを使用して、PowerShell から REST API を実行する形でデータ送信を検証してみます。</p><h3 id="PowerShell-を使用したデータ送信の検証"><a href="#PowerShell-を使用したデータ送信の検証" class="headerlink" title="PowerShell を使用したデータ送信の検証"></a>PowerShell を使用したデータ送信の検証</h3><ol><li>Power BI サービスのワークスペースにアクセスし、[+ 新規 &gt; ストリーミング データセット] をクリックします。</li></ol><div align="center"><img src="1.png"></div></br><div class="alert is-success"><p class="alert-title">ヒント</p><p>リアルタイム データセットの作成は、Power BI サービス (GUI) のほか、REST API を使用して CLI でも作成することが可能です。</p><p><a href="https://learn.microsoft.com/ja-jp/rest/api/power-bi/push-datasets/datasets-post-dataset-in-group">(参考) POST Push Datasets</a></p></div></br><ol start="2"><li>データのソースとして [API] をクリックし、[次へ] をクリックします。</li></ol><div align="center"><img src="2.png"></div></br><ol start="3"><li>データセット名を入力し、データを格納するカラム名・データ型を決めます。<br>データ型は「テキスト」型、「数値」型、「日時」型から選択できます。<br>またストリーミング データセットとして作成するため [履歴データの解析] は<code>オフ</code>のままにします。<br>最後に [作成] ボタンをクリックします。</li></ol><div align="center"><img src="3.png"></div></br><ol start="4"><li>ストリーミング データセットが作成されました。<br>続けて、実際にデータを格納してみます。<br>[PowerShell] タブをクリックし、表示されているスクリプトをコピーしておきます。</li></ol><div align="center"><img src="4.png"></div></br><div class="alert is-warning"><p class="alert-title">警告</p><p>この方法で取得した URL または endpoint には、データセットの送信要求が自動的に承認される rowkey が付与されており、Azure AD 認証なしでデータの送信が可能となります。運用データをご利用いただく場合、URL や rowkey の取り扱いにはご注意ください。</p></div></br><ol start="5"><li>データを表示するためのダッシュボードを作成します。<br>ワークスペースの [+新規 &gt; ダッシュボード] をクリックし、ダッシュボード名を入力します。</li></ol><div align="center"><img src="5.png"></div></br><ol start="6"><li>[編集 &gt; タイルの追加] をクリックし、リアルタイムデータの [カスタム ストリーミング データ] をクリックし、[次へ] をクリックします。</li></ol><div align="center"><img src="6.png"></div></br><ol start="7"><li>先ほど作成したデータセットを選択し、[次へ] をクリックします。</li></ol><div align="center"><img src="7.png"></div></br><ol start="8"><li>視覚化デザインでは、表示するビジュアルの種類を選ぶことができ、また表示する列や値を選ぶことが可能です。<br>ここでは、視覚化タイプは [カード] のまま、フィールドの [+ 値の追加] をクリックし、[Score] を選択します。</li></ol><div align="center"><img src="8.png"></div></br><ol start="9"><li>タイルの詳細では、タイトルやサブタイトルなどの設定が可能です。<br>ここでは特に変更せず [適用] をクリックします。</li></ol><div align="center"><img src="9.png"></div></br><ol start="10"><li>ダッシュボード上に score のカードビジュアル タイルが表示されました。</li></ol><div align="center"><img src="10.png"></div></br><ol start="11"><li>実際にストリーミング データセットにデータを追加します。<br>コピーしたスクリプトを PowerShell で実行します。<br>ダッシュボードを開いた画面と比べてみると、実行されたデータがすぐ反映されることが確認できます。<br>(ストリーミング データを表すカスタム ストリーミング データによるタイルの場合、稲妻マークがタイトルの横に表示されます。)</li></ol><div align="center"><img src="11.png"></div></br><div class="alert is-success"><p class="alert-title">ヒント</p><p>PowerShell や API の実行が 401 (Unauthorized) エラーとなる場合、テナントでリソース キー認証がブロックされている可能性があります。</p><p>Power BI 管理者から <code>テナント設定</code> にアクセスし、<code>リソース キー認証のブロック</code> が有効化されていないかご確認ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-bi/admin/service-admin-portal-developer#block-resourcekey-authentication">リソース キー認証のブロックについて</a></p></div></br><blockquote><p>[参考情報]<br><a href="https://learn.microsoft.com/ja-jp/power-bi/connect-data/service-real-time-streaming">Power BI のリアルタイム ストリーミング</a></p></blockquote><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの山本です。&lt;br&gt;Power BI では、様々なタイプのデータセットを作成することができますが、その中でもデータを即時に集約・可視化することに特化したリアルタイム データセットという種類があります。&lt;/p&gt;
&lt;p&gt;今回はリアルタイム データセットとはどのようなもので、どのように扱うことができるか、紹介していきます。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI　　" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="リアルタイム" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0/"/>
    
    <category term="ストリーミング" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%9F%E3%83%B3%E3%82%B0/"/>
    
  </entry>
  
  <entry>
    <title>Power BI Service へのアクセス制御③ 秘密度ラベル</title>
    <link href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_sensitivity-label/"/>
    <id>https://jpbap-sqlbi.github.io/blog/powerbi/pbi_sensitivity-label/</id>
    <published>2023-01-30T15:00:00.000Z</published>
    <updated>2023-07-11T01:52:54.600Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power BI サポート チームの亀田です。<br>セキュリティの観点から、Power BI Service へのアクセスを制限したいというお問い合わせをいただくことがあります。「<a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_conditional-access/">条件付きアクセス</a>」、｢<a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_privatelink/">Azure Private Link</a>｣と説明してきましたが、今回は  ｢秘密度ラベル｣ について説明します。</p><span id="more"></span><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、　　</p><p>本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。</p></div><hr><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB-%E3%81%A8%E3%81%AF">秘密度ラベル とは</a></li><li><a href="#%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%81%AE%E8%A8%AD%E5%AE%9A%E6%89%8B%E9%A0%86">秘密度ラベル の設定手順</a><ul><li><a href="#1-%E3%83%86%E3%83%8A%E3%83%B3%E3%83%88%E8%A8%AD%E5%AE%9A%E3%81%8B%E3%82%89%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E6%9C%89%E5%8A%B9%E5%8C%96%E3%81%99%E3%82%8B">1.テナント設定から秘密度ラベルを有効化する</a></li><li><a href="#2-%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E9%81%A9%E7%94%A8%E3%81%99%E3%82%8B">2.秘密度ラベルを適用する</a></li><li><a href="#3-%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B">3.秘密度ラベルを追加する</a></li><li><a href="#4-%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A">4.秘密度ラベルに関する設定</a></li></ul></li><li><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E4%BF%9D%E8%AD%B7%E3%83%A1%E3%83%88%E3%83%AA%E3%83%83%E3%82%AF-%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88">データ保護メトリック レポート</a></li></ul><h2 id="秘密度ラベル-とは"><a href="#秘密度ラベル-とは" class="headerlink" title="秘密度ラベル とは"></a>秘密度ラベル とは</h2><p>Power BI の秘密度ラベルは、データのセキュリティとアクセス制御を管理するための機能です。これにより、特定のデータセットやレポートにアクセスできるユーザーを制限することができます。例えば、特定のレポートファイル (.pbixファイル) に「機密」というラベルを設定し、それに対してアクセス権を持つのは特定のグループのみに限定することができます。秘密度ラベルはPower BI Desktopでご利用いただける機能です。Power BI Serviceでは秘密度ラベルを設定している場合であってもコンテンツへのアクセスには影響しません。Power BI Serviceでのアクセス制御にはワークスペースやレポート単位のアクセス許可を設定する必要があります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考＃<a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-security-sensitivity-label-overview">Power BI での Microsoft Purview Information Protection の秘密度ラベル - Power BI | Microsoft Learn</a>  </p></div><div align="center"><img src="sensitivity12.png"></div>  <p>秘密度ラベルはPower BIのコンテンツのみではなく、Power BIからエクスポートしたExcel、Power Point、PDFファイルでも適用されるため、機密データはどこであっても保護することができます。</p><div class="alert is-warning"><p class="alert-title">警告</p><p>画像ファイルやcsvには秘密度ラベルを適用することができませんのでご注意ください。  </p></div><div align="center"><img src="sensitivity13.png"></div>  <h2 id="秘密度ラベルの設定手順"><a href="#秘密度ラベルの設定手順" class="headerlink" title="秘密度ラベルの設定手順"></a>秘密度ラベルの設定手順</h2><p>Power BI で秘密度ラベルを利用するためには、以下の設定を行います。</p><p><a href="#1-%E3%83%86%E3%83%8A%E3%83%B3%E3%83%88%E8%A8%AD%E5%AE%9A%E3%81%8B%E3%82%89%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E6%9C%89%E5%8A%B9%E5%8C%96%E3%81%99%E3%82%8B">1.テナント設定から秘密度ラベルを有効化する</a><br><a href="#2-%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E9%81%A9%E7%94%A8%E3%81%99%E3%82%8B">2.秘密度ラベルを適用する</a><br><a href="#3-%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B">3.秘密度ラベルを追加する</a><br><a href="#4-%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A">4.秘密度ラベルに関する設定</a></p><p>それぞれの詳細な手順について、以下に説明します。なお、秘密度ラベルの適用には以下のライセンスが必要となります。</p><ul><li>Azure Information Protection Premium P1 または Premium P2 ライセンス</li><li>Power BI Pro または Premium Per Userライセンス<div class="alert is-info"><p class="alert-title">Note</p><p>参考＃<a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-security-enable-data-sensitivity-labels">Power BI で秘密度ラベルを有効にする - Power BI | Microsoft Learn</a></p></div></li></ul><h3 id="1-テナント設定から秘密度ラベルを有効化する"><a href="#1-テナント設定から秘密度ラベルを有効化する" class="headerlink" title="1.テナント設定から秘密度ラベルを有効化する"></a>1.テナント設定から秘密度ラベルを有効化する</h3><p>テナントで秘密度ラベルを有効化するには、管理ポータルにアクセスし、 <strong>[テナント設定]</strong> &gt; <strong>[情報の保護]</strong> &gt; <strong>[ユーザーによるコンテンツへの秘密度ラベルの適用を許可]</strong> を有効化します。  </p><div align="center"><img src="sensitivity01.png"></div>  <h3 id="2-秘密度ラベルを適用する"><a href="#2-秘密度ラベルを適用する" class="headerlink" title="2.秘密度ラベルを適用する"></a>2.秘密度ラベルを適用する</h3><p> <strong>[ユーザーによるコンテンツへの秘密度ラベルの適用を許可]</strong> が有効化されている場合、Power BI Desktop/Service で秘密度ラベルの設定が可能となります。それぞれの設定手順について説明します。</p><h4 id="Power-BI-Desktopで秘密度ラベルを適用する"><a href="#Power-BI-Desktopで秘密度ラベルを適用する" class="headerlink" title="Power BI Desktopで秘密度ラベルを適用する"></a>Power BI Desktopで秘密度ラベルを適用する</h4><p>Power BI Desktopを開き、 <strong>[ホーム]</strong> &gt; <strong>[秘密度]</strong> を選択します。  </p><div align="center"><img src="sensitivity02.png"></div>  <p>設定可能な秘密度ラベルの一覧が表示されるので、設定したい秘密度ラベルを選択します。  </p><div align="center"><img src="sensitivity03.png"></div>  <p>秘密度ラベルが設定されている場合、左下に表示されます。以下の例では、”Highly Confidential\All Employees”が設定されています。  </p><div align="center"><img src="sensitivity04.png"></div>  <h4 id="Power-BI-Serviceで秘密度ラベルを適用する"><a href="#Power-BI-Serviceで秘密度ラベルを適用する" class="headerlink" title="Power BI Serviceで秘密度ラベルを適用する"></a>Power BI Serviceで秘密度ラベルを適用する</h4><p>レポート、ダッシュボードに秘密度ラベルを適用する場合、 <strong>[その他のオプション]</strong> `&gt; <strong>[設定]</strong> を選択します。  </p><div align="center"><img src="sensitivity05.png"></div>  <p><strong>[秘密度ラベル]</strong> を選択し、保存します。  </p><div align="center"><img src="sensitivity06.png"></div>  <p>データセット、データフローに秘密度ラベルを適用する場合、 <strong>[その他のオプション]</strong> `&gt; <strong>[設定]</strong> を選択します。  </p><div align="center"><img src="sensitivity07.png"></div>  <p><strong>[秘密度ラベル]</strong> を選択し、保存します。  </p><div align="center"><img src="sensitivity08.png"></div>  <p>設定されている秘密度ラベルはワークスペースから確認できるほか、  </p><div align="center"><img src="sensitivity09.png"></div>  <p>レポートやダッシュボードの上部でも確認することができます。  </p><div align="center"><img src="sensitivity10.png"></div>  <h3 id="3-秘密度ラベルを追加する"><a href="#3-秘密度ラベルを追加する" class="headerlink" title="3.秘密度ラベルを追加する"></a>3.秘密度ラベルを追加する</h3><p>秘密度ラベルは標準で用意されているものもありますが、管理者が設定することも可能です。手順について説明します。なお、設定にはPower BIとは異なるライセンスが必要となりますのでご注意ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/microsoft-365/compliance/get-started-with-sensitivity-labels?view=o365-worldwide">秘密度ラベルの概要 - Microsoft Purview (compliance) | Microsoft Learn</a></p><p>参考# <a href="https://learn.microsoft.com/ja-jp/microsoft-365/compliance/encryption-sensitivity-labels?view=o365-worldwide">秘密度ラベルを使用して暗号化を適用する - Microsoft Purview (compliance) | Microsoft Learn</a></p></div><p><a href="https://aka.ms/dpfwl15">Microsoft Purview コンプライアンス ポータル</a>にアクセスし、 <strong>[+ ラベルの作成]</strong> を選択します。  </p><div align="center"><img src="sensitivity11.png"></div>  <p>名前、表示名、説明を入力し、 <strong>[次へ]</strong> を選択します。  </p><div align="center"><img src="sensitivity14.png"></div>  <p><strong>[アイテム]</strong> にチェックし、 <strong>[次へ]</strong> を選択します。  </p><div align="center"><img src="sensitivity15.png"></div>  <p><strong>[項目の暗号化]</strong> にチェックし、 <strong>[次へ]</strong> を選択します。  </p><div align="center"><img src="sensitivity16.png"></div>  <p>暗号化の設定をします。 <strong>[特定のユーザーとグループにアクセス許可を付与する]</strong> により設定したユーザーまたはグループが、このラベルの設定されたコンテンツを操作することができます。一般的にはユーザーではなくグループを利用をすることで構成が簡単になるため推奨されます。</p><p>この際に設定する <strong>[アクセス許可の選択]</strong> は、<a href="https://learn.microsoft.com/ja-jp/azure/information-protection/configure-usage-rights#usage-rights-and-descriptions">使用権限と説明</a>をご確認ください。</p><p>テナント設定と秘密度ラベルでは、制限の厳しいものが適用されます。例えば、テナント設定でデータのエクスポートを有効にしている場合でも、秘密度ラベルでエクスポートが無効になっている場合、ユーザーはエクスポートをすることができません。  </p><div align="center"><img src="sensitivity17.png"></div>  <p><strong>[ファイルとメールの自動ラベル付け]</strong> の設定をしたら、 <strong>[次へ]</strong> を選択します。  </p><div align="center"><img src="sensitivity18.png"></div>  <p><strong>[グループとサイトの保護設定を定義]</strong> の設定をしたら、 <strong>[次へ]</strong> を選択します。  </p><div align="center"><img src="sensitivity19.png"></div>  <p><strong>[スキーマ化されたデータ アセットの自動ラベル付け]</strong> の設定をしたら、 <strong>[次へ]</strong> を選択します。  </p><div align="center"><img src="sensitivity20.png"></div>  <p>設定を確認したら、 <strong>[ラベルを作成]</strong> を選択します。  </p><div align="center"><img src="sensitivity21.png"></div>  <p>秘密度ラベルが作成されたことを確認し、 <strong>[完了]</strong> を選択します。秘密度ラベルの反映は、すぐに行われず10分~最大24時間ほどかかる場合があります。  </p><div align="center"><img src="sensitivity22.png"></div>  <h3 id="4-秘密度ラベルに関する設定"><a href="#4-秘密度ラベルに関する設定" class="headerlink" title="4.秘密度ラベルに関する設定"></a>4.秘密度ラベルに関する設定</h3><p>管理ポータルから設定できる、秘密度ラベルに関する設定について説明します。</p><ul><li><p>データ ソースから秘密度ラベルを Power BI のそのデータに適用する(プレビュー)<br>データ ソースで秘密度ラベルが設定されている場合、その秘密度ラベルを継承してPower BI データセットに設定することができる機能です。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-security-sensitivity-label-inheritance-from-data-sources">Power BI でのデータ ソースからの秘密度ラベルの継承 - Power BI | Microsoft Learn</a>  </p></div><div align="center"><img src="sensitivity23.png"></div>  </li><li><p>ダウンストリーム コンテンツに秘密度ラベルを自動的に適用する<br>秘密度ラベルが適用されたデータセットから作成される他のデータセット、レポート、ダッシュボードや、秘密度ラベルが適用されたレポートから作成されたダッシュボードに、作成元の秘密度ラベルを適用することができる機能です。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-security-sensitivity-label-downstream-inheritance">Power BI での秘密度ラベルの下流への継承 - Power BI | Microsoft Learn</a>  </p></div><div align="center"><img src="sensitivity24.png"></div>  </li><li><p>ワークスペース管理者が自動的に適用された秘密度ラベルをオーバーライドすることを許可する(プレビュー)<br>自動的に秘密度ラベルが適用された場合、コンテンツに対する秘密度ラベル発行者のユーザーがいなくなる場合があり、その場合ラベルの変更や削除ができるユーザーがいなくなることがあります。この設定はそのような状況を回避するための機能であり、ワークスペース管理者が秘密度ラベルをオーバーライドできるようになります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/enterprise/service-security-sensitivity-label-change-enforcement#relaxations-to-accommodate-automatic-labeling-scenarios">自動ラベル付けのシナリオに対応するための緩和策</a>  </p></div><div align="center"><img src="sensitivity25.png"></div>  </li><li><p>保護されたラベルを持つコンテンツが、組織内の全ユーザーとリンクを介して共有されないように制御する<br>この設定が有効な場合、秘密度ラベルに”保護”が設定されているコンテンツに対して組織内のユーザーとの共有リンクが生成できなくなります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>参考# <a href="https://learn.microsoft.com/ja-jp/power-bi/admin/service-admin-portal-information-protection#restrict-content-with-protected-labels-from-being-shared-via-link-with-everyone-in-your-organization">保護されたラベルが付けられたコンテンツがリンクを介して組織内のすべてのユーザーと共有されないように制限する</a>  </p></div><div align="center"><img src="sensitivity26.png"></div>  </li></ul><h2 id="データ保護メトリック-レポート"><a href="#データ保護メトリック-レポート" class="headerlink" title="データ保護メトリック レポート"></a>データ保護メトリック レポート</h2><p>Power BI管理者は、テナント内で利用されている秘密度ラベルを監視したり追跡することができます。このデータ保護メトリック レポートは、管理ポータル内の <strong>[保護メトリック]</strong> から確認することができます。  </p><div align="center"><img src="sensitivity27.png"></div>  <p>秘密度ラベルを設定いただくことで、よりセキュアにPower BIをご利用いただけます。</p><p>以上、本ブログが少しでも皆様のお役に立てますと幸いでございます。</p><hr><p><strong>アンケートご協力のお願い</strong><br>Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。<br>ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 </p><p>※　所要時間は1分程度となります。<br><a href="https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/">【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power BI サポート チームの亀田です。&lt;br&gt;セキュリティの観点から、Power BI Service へのアクセスを制限したいというお問い合わせをいただくことがあります。「&lt;a href=&quot;https://jpbap-sqlbi.github.io/blog/powerbi/pbi_conditional-access/&quot;&gt;条件付きアクセス&lt;/a&gt;」、｢&lt;a href=&quot;https://jpbap-sqlbi.github.io/blog/powerbi/pbi_privatelink/&quot;&gt;Azure Private Link&lt;/a&gt;｣と説明してきましたが、今回は  ｢秘密度ラベル｣ について説明します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Power BI" scheme="https://jpbap-sqlbi.github.io/blog/tags/Power-BI/"/>
    
    <category term="アクセス制御" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%88%B6%E5%BE%A1/"/>
    
    <category term="秘密度ラベル" scheme="https://jpbap-sqlbi.github.io/blog/tags/%E7%A7%98%E5%AF%86%E5%BA%A6%E3%83%A9%E3%83%99%E3%83%AB/"/>
    
  </entry>
  
</feed>
