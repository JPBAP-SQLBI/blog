---
title: セマンティック モデル更新遅延のトラブル シューティング
date: 2024-05-31 00:00:00 
tags:
  - Power BI
  - Power BI サービス
  - Power BI Service
  - 更新
  - Refresh
  - エラー
  - error
  - スケジュール更新
  - データセット
  - タイムアウトエラー
  - Power BI Premium
  - Microsoft Fabric
  - セマンティックモデル
---

こんにちは、 Power BI サポート チームの山崎です。  
Power BI サービスでは、データソースに接続されたセマンティック モデルを定期的に更新 (※1) することができます。  
しかし、時には更新が遅延したり、時間がかかりすぎて最終的に更新に失敗したりすることがあります。  
本記事では、更新遅延の主な要因や、サポートへお問合せいただく前に実施いただきたいこと・お問合せの際に添えていただきたい確認事項をご案内いたします。  

※1　ご参考情報：  
セマンティック モデル（データセット）の更新手順については、以下サポート チームのブログにてご案内しています。  
[Power BI サービスのデータセット更新手順について](https://jpbap-sqlbi.github.io/blog/powerbi/pbi_refresh_settings/)　  

 </br>

<!-- more -->

> [!IMPORTANT]  
> 本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、本記事編集時点と実際の機能に相違がある場合がございます。  
> 最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。


 </br>

##  <font color="DodgerBlue">更新遅延の原因と対処法</font>    

セマンティック モデルの更新履歴は、セマンティック モデル設定画面の “更新履歴” より、更新の状況や所要時間の情報とともに過去の履歴を確認できますが、更新開始から更新完了までの時間が、通常の何倍もかかったり、最大更新期間（※2）に達しタイムアウトエラーとなることがあります。  

<div align="left">
<img src="1.png">
</div>
</p> 

 </br>

※2　共有容量のワークスペースは 2 時間、Premium / Fabric 容量のワークスペースは 5 時間のタイムアウト値があり、これをユーザーにて変更することはできません。  

ご参考情報：  
[Power BIでのデータ更新](https://learn.microsoft.com/ja-jp/power-bi/connect-data/refresh-data#data-refresh)  

 </br>
 
更新遅延が発生する要因は様々ですが、よくある例としては下記のようなものが挙げられます。  
事象が発生した場合、エラー情報や更新履歴、キャパシティの使用状況などをできるだけ早く収集することが重要です。  
また、事象の再現性や発生頻度、影響範囲などを把握することで、調査の優先度や方向性を決めることができます。  
セマンティック モデルの更新遅延の調査は、多くの要因を考慮する必要があり、エラーメッセージだけでは、事象の原因や解決が難しいことがあります。  
そのため、まずは対象の環境にてそれぞれ該当することがありそうか確認し、調査箇所の絞り込みを行った上で調査することが望ましいです。  

### <font color="HotPink">（１）	データソース側のパフォーマンスの問題</font> 
確認ポイント：  
データソース側のパフォーマンスが高負荷となっていることで Power BI サービスから発行されたクエリ処理に時間を要している可能性が考えられます。  
更新が遅延する時間帯に、既に他のプロセス処理等によってパフォーマンス高負荷の状態が発生していないか確認します。また、直近で何かしらシステム設定や運用方法に変更がなかったかも確認しましょう。  

対処策：  
データソースの管理者に連絡して、パフォーマンスの改善を依頼するか、セマンティック モデルの更新スケジュールを変更して、負荷の低い時間帯に実行することで更新遅延が回避できるかお試しください。  

### <font color="HotPink">（２）	セマンティック モデルのサイズの問題</font>   
確認ポイント：  
セマンティック モデルに含まれるデータの量が多すぎると、更新に時間がかかることがあります。  
更新で取得するデータ量が大幅に増えたり、レポートおよびセマンティック モデルが変更され、以前より多くのデータを取り込もうとしていないか確認します。  

対処策：  
セマンティック モデルの設計を見直して、必要なデータだけを取り込むようにするか、データの分割などの最適化を行うことを検討してください。  
また、ご使用中の容量 SKU で処理できる範囲を超えている可能性もあるので、後述の “Power BI サービスのキャパシティが不足している場合” の対処策もあわせてご確認ください。  

### <font color="HotPink">（３）	Premium / Fabric容量のリソースが不足している場合</font>   
確認ポイント：  
Premium / Fabric容量のリソースはセマンティック モデルの更新に影響します。  
リソースが不足していると、更新が遅延したり失敗したりすることがあります。  

対処策：  
事象が発生しているワークスペースに割り当てられている容量の使用状況を確認して、必要に応じて SKU のアップグレードや別の余裕がある容量を割り当てることを検討してください。  
使用状況の確認には、[Microsoft Fabric Capacity Metrics アプリ]( https://learn.microsoft.com/ja-jp/fabric/enterprise/metrics-app)をご利用ください。  

ご参考情報：   
[BI 利用時のパフォーマンス測定や最適化について](https://jpbap-sqlbi.github.io/blog/powerbi/performance/#Power-BI-Premium-Per-Capacity-Premium-%E5%AE%B9%E9%87%8F)    
[Premium / Fabric 容量のスロットリングについて]( https://jpbap-sqlbi.github.io/blog/powerbi/pbi_throttling/)  

### <font color="HotPink">（４）	オンプレミス データ ゲートウェイ側の問題（オンプレミス データ ゲートウェイを使用している場合）</font>   
確認ポイント：  
オンプレミス データ ゲートウェイが動いているサーバーが高負荷な状況やネットワークが不安定な状況となっているために、更新遅延が発生している可能性があります。  
事象に再現性がある場合は、事象発生時のオンプレミス データ ゲートウェイサーバーのパフォーマンスを監視することや、オンプレミス データ ゲートウェイサーバー上に Power BI Desktop をインストールし、Power BI Desktop での .pbix ファイルの更新も同じように遅延するか確認することが有効です。  

対処策：  
オンプレミス データ ゲートウェイのサーバーが高負荷な場合は、管理者に連絡して、パフォーマンスの改善を依頼するか、セマンティック モデルの更新スケジュールを変更して、負荷の低い時間帯に実行することで更新遅延が回避できるかお試しください。  
また、オンプレミス データ ゲートウェイが古い場合は最新化をご検討ください。  

 </br>

##  <font color="DodgerBlue">サポートへのお問い合わせ</font>    

上記内容の確認で要因が特定できず解決しない場合や、Power BI サービス 内部の問題が疑われる場合は、以下内容を添えて弊社サポートまでお問い合わせください。  
（調査可能な範囲についてはご契約によって異なりますので、事前にサポートブログ [Power BI のお問合せについて]( https://jpbap-sqlbi.github.io/blog/powerbi/support_boundary/) をご確認ください。）  


### <font color="HotPink"> ＜基本情報＞  </font>   
・対象のセマンティック モデルの更新履歴の、正常系と異常系（更新遅延）の両履歴が確認できる画面ショット  
・更新履歴の "表示" をクリックした際に表示される詳細情報のテキストコピーすべて  
（データソースエラー、クラスター URI 、アクティビティ ID 、要求 ID 、時刻）  
・テナント URL とデータ保存先  
　　　ヘルプ> [Power BI について] から確認できます。URL は最後までコピーするようにお気をつけください。  


<div align="left">
<img src="2.png">
</div>
</p> 

 </br>

・データセット ID  
     対象のデータセットを開いた状態で、ブラウザの URL をテキストコピーします。  
     
<div align="left">
<img src="3.png">
</div>
</p> 
 </br>

・容量の SKU 、地域、ID 情報（ワークスペースが Premium または Fabric 容量に割り当てられている場合）  
Power BI の管理者権限を持つユーザーにて管理ポータルを開き、[容量の設定]から対象の容量の設定アイコンをクリックし、SKU/サイズ、地域、容量 ID を確認します。  
ID はすべてテキストコピーするようにお気をつけください。

<div align="left">
<img src="4.png">
</div>
</p> 
 </br>

・データソースの種類と接続モード　（例：SQL Server、インポート）  
・オンプレミス データ ゲートウェイの有無  
・オンプレミス データ ゲートウェイを使用している場合  
　・・・種類（個人用またはエンタープライズ）  
　・・・バージョン  

### <font color="HotPink"> ＜その他確認事項＞  </font>  
お問合せ前に、可能な範囲で以下確認も実施いただけますとスムーズに調査が開始できます。  

・事象発生期間の確認（事象が現在も継続しているか、またはいつからいつまで発生していたか　など）  
・特定の時間帯に再現する場合はその時間帯の確認 
・特定のデータセットやレポートのみ問題があるか、他のデータセットやレポートでも同じ事象が発生するかの確認



</br>
以上、本ブログ が少しでも皆様のお役に立てますと幸いでございます。  

---

**アンケートご協力のお願い**
Japan CSS Support Power BI Blog では、作成する記事やブログの品質向上を目的に、匿名回答でのアンケートを実施しております。
ユーザー様のご意見・ご要望を参考に今後もお役に立てるブログを目指してまいりますので、ぜひご協力いただけますと幸いでございます。 

※　所要時間は1分程度となります。
[【ご協力のお願い】Microsoft Japan CSS Power BI Blog ご利用に関するアンケート](https://jpbap-sqlbi.github.io/blog/powerbi/pbi_blogsurvey2022/)