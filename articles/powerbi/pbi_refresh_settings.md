---
title: Power BI サービスのデータセット更新手順について
date: 2021-10-31 00:00:00 
tags:
  - Power BI　　
  - データセット
  - dataset
  - 更新　
  - refresh
  - オンプレミスデータゲートウェイ
  - onpremisedatagateway
---


こんにちは、Power BI サポート チームです。 
  
Power BI Desktopで作成したレポートを Power BI サービスへ発行した後、データ ソースとの接続設定を行っておりますでしょうか？  
「Power BI サービス上に発行したレポートのデータが古いまま」、「毎回 Power BI Desktop でレポートのデータ更新をしてから、Power BI サービスへ都度上書き発行していて面倒」などでお困りの場合、Power BI サービスでは、データ取得先となるデータ ソースと直接接続を行うことで、レポートのデータを最新に保つことが可能です。
  
本ブログでは、Power BI サービス上でのデータ更新設定方法についてご紹介いたします。  

<!-- more -->

> [!IMPORTANT]  
> 本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、　　
> 本記事編集時点と実際の機能に相違がある場合がございます。  
> 最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。

---

## はじめに

Power BI のレポートは、Power BI サービスに発行すると、レポートと、レポートに紐づく “データセット“ で構成されます。
このデータセットとデータ ソースを直接接続することで、Power BI Desktop から都度最新データを取り込んだレポートを発行する必要なく、Power BI サービス上でデータを更新したレポートを閲覧できるようになります。
また、“毎日午前9時” のように定期的な自動スケジュール更新の設定も可能でございます。


#### Power BI サービスへの発行 ～ スケジュール更新設定までの流れ  

（１）Power BI Desktop から Power BI サービスへレポート発行する  
（２）Power BI サービス上で、発行されたレポートに紐づくデータセット設定にてデータ ソースとの接続設定を行う  
（３）［スケジュールされている更新］設定にてスケジュール更新設定を行う

なお、項番（２）のデータ ソースとの接続設定につきましては、データ ソースが ① クラウド上（例：SharePoint Online や Azure SQL Database など）に存在するか、② オンプレミス上（お使いの PC の C ドライブ配下や共有サーバーなど）に存在するまたは接続時にオンプレミス データ ゲートウェイが必須なデータ ソースであるか、によって設定方法が異なります。  
以下に各設定方法をご案内いたします。


## １．データ ソースがクラウド上（例：Sharepoint OnlineやAzure SQL Databaseなど）に存在する場合

対象レポートに紐づくデータセットの設定画面にて、“データ ソースの資格情報” からデータ ソースにアクセス可能な資格情報の設定を行います。  
正しく設定がなされると、データ ソースとの接続が確立しスケジュール更新設定が可能となります。  

#### ＝＝　手順詳細　＝＝
（１）発行したレポートが存在するワークスペース内で、レポートに紐づくデータセットを選択し、[更新のスケジュール設定] アイコンをクリックします。

<div align="center">
<img src="1_1.png">
</div>

（２）　[データ ソースの資格情報] を展開し、[資格情報を編集] から、対象のデータ ソースにアクセス権限をもつ資格情報を設定します。

<div align="center">
<img src="1_2.png">
</div>

（３）データ ソースとの接続が正しく設定されると、画面右上に以下のメッセージが表示されます。　　

<div align="center">
<img src="1_3.png">
</div>

（４）続けて、“スケジュールされている更新”を展開し、「データを最新の状態に保つ」をオンにし、データ ソースと接続を行い更新を行う時間帯を設定し、適用します。

<div align="center">
<img src="1_4.png">
</div>

上記につきましては、以下公開情報でも詳細にご説明しておりますので、ご参考になりましたら幸いでございます。　　


参考情報：[Power BI でのデータの更新](https://docs.microsoft.com/ja-jp/power-bi/connect-data/refresh-data)  
参考情報：[スケジュールされた更新の構成](https://docs.microsoft.com/ja-jp/power-bi/connect-data/refresh-scheduled-refresh)　


## ２．オンプレミス上（お使いの PC の C ドライブや共有サーバーなど）に存在するまたは接続時にゲートウェイが必須なデータ ソースである場合　

オンプレミス上のデータと Power BI サービス（クラウド）を接続するためのアプリ「オンプレミス データ ゲートウェイ」（無償）を対象のオンプレミス端末（または対象のオンプレミス端末に接続できる同じネットワーク内に存在する他の端末）にインストール・構築し、Power BI サービスの “ゲートウェイの管理” 画面にてデータ ソースとの接続設定を行う必要があります。
スケジュール更新設定は上記と同じ手順となります。　　

※　こちらの設定が必要な場合は、上記１の「データ ソースの資格情報」の項目はグレー アウトしています。

#### ＝＝　手順詳細　＝＝
（１）PC にオンプレミス データ ゲートウェイを構築します。  
データ ソースに接続できる端末にオンプレミス データ ゲートウェイをインストールし、Power BI を使用するアカウントでサインインし構成を行います。  

<div align="center">
<img src="2_1.png">
</div>

参考情報：[オンプレミス データ ゲートウェイをインストールする](https://docs.microsoft.com/ja-jp/data-integration/gateway/service-gateway-install#download-and-install-a-standard-gateway)　

（２）Power BI サービス上で、“ゲートウェイ管理” 画面にて対象のデータ ソースとの接続を確立します。  
 項番（１）にてサインインしたアカウントで Power BI サービスにサインインすると、「ゲートウェイの管理」画面に構築したゲートウェイ名（ゲートウェイ クラスター）が表示されます。

<div align="center">
<img src="2_2.png">
</div>

このクラスター配下に、データ ソースとの接続を行うための “データ ソースの追加” 設定を行います。（資格情報はこちらの設定で保持されます。）  

<div align="center">
<img src="2_3.png">
</div>

正常に接続できると、”接続成功”と表示されます。

<div align="center">
<img src="2_4.png">
</div>

参考情報：[オンプレミス データ ゲートウェイの管理](https://docs.microsoft.com/ja-jp/data-integration/gateway/service-gateway-manage)　

（３）対象のデータセットの設定画面の“ゲートウェイ接続” にて（２）で設定したデータ ソースを紐づけます。

<div align="center">
<img src="2_5.png">
</div>

※オンプレミス データ ゲートウェイが必須なデータ ソースであるかどうかは以下公開情報からご確認いただけます。  

参考情報：[Power BI データ ソース](https://docs.microsoft.com/ja-jp/power-bi/connect-data/power-bi-data-sources)　


## ３．上記１と２が混在している場合　

オンプレミス上のデータとクラウド上のデータ両方に接続してデータセットを作成している場合、クラウドのデータ ソースの資格情報はグレー アウトしていますが、ゲートウェイ接続の設定を行うことでアクティブになりますので、ゲートウェイ接続　→　データ ソースの資格情報の順番で設定を行います。  
なお、ゲートウェイ接続とデータ ソースの資格情報に、各データ ソースの接続が表示されますが、オンプレミス上のデータは“ゲートウェイ接続”、クラウド上のデータは“データ ソースの資格情報”にて設定を行います。

<div align="center">
<img src="3_1.png">
</div>



以上、本ブログ が少しでも皆様のお役に立てますと幸いでございます。


